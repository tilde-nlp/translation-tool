var uiResources={en:{sourceSystem:"From:",targetSystem:"To:",systemSelect:"System",swapLanguage:"Reverse",translateButton:"Translate",systemDomain:"Domain",systemLoadError:"Error while loading systems",en:"English",lv:"Latvian",lt:"Lithuanian",fr:"French",ru:"Russian",et:"Estonian",ar:"Arabic",bg:"Bulgarian",de:"German"},fr:{sourceSystem:"From:",targetSystem:"To:",systemSelect:"System",swapLanguage:"Reverse",translateButton:"Traduire",systemDomain:"Domain",systemLoadError:"Error while loading systems"},lt:{sourceSystem:"Iš:",targetSystem:"Į:",systemSelect:"System",swapLanguage:"Pakeisti",translateButton:"Versti",systemDomain:"Domain",systemLoadError:"Įkeliant sistemas įvyko klaida",en:"Anglų",lv:"Latvių",lt:"Lietuvių",ru:"Rusų",et:"Estų",ar:"Arabų"},lv:{sourceSystem:"No:",targetSystem:"Uz:",systemSelect:"System",swapLanguage:"Apgriezt",translateButton:"Tulkot",systemDomain:"Domēns",systemLoadError:"Neizdevās ielādēt tulkošanas sistēmas",en:"Angļu",lv:"Latviešu",lt:"Lietuviešu",fr:"Franču",ru:"Krievu",et:"Igauņu",ar:"Arābu",bg:"Bulgāru",de:"Vācu"},ru:{sourceSystem:"Направление перевода",targetSystem:"На",systemSelect:"System",swapLanguage:"Перевернуть",translateButton:"Перевести",systemDomain:"Тематическая область",systemLoadError:"Error while loading systems",en:"Английский",lv:"Латышский",lt:"Литовский",fr:"Французский",ru:"Русский"},et:{sourceSystem:"Lähtekeel:",targetSystem:"Sihtkeel:",systemSelect:"",swapLanguage:"Vastupidi",translateButton:"Tõlgi",systemDomain:"Domain",systemLoadError:"Süsteemide laadimise tõrge",en:"Inglise",lv:"Läti",lt:"Leedu",et:"Eesti",ru:"Vene",ar:"Araabia"},bg:{sourceSystem:"От:",targetSystem:"На:",systemSelect:"Система",swapLanguage:"Обратно",translateButton:"Превеждам",systemDomain:"Domain",systemLoadError:"Грешка при зареждане на системите",en:"Английски",lv:"Латвийски",lt:"Литовски",fr:"Френски",ru:"Руски",et:"Естонски",ar:"Арабски",bg:"Български"},de:{sourceSystem:"Aus:",targetSystem:"Zu:",systemSelect:"System",swapLanguage:"Rückgängig machen",translateButton:"Übersetzen",systemDomain:"Domain",systemLoadError:"Fehler beim Laden des Systems",en:"Englisch",lv:"Lettisch",lt:"Litauisch",fr:"Französisch",ru:"Russisch",et:"Estnisch",ar:"Arabisch",bg:"Bulgarisch",de:"Deutsch"}};"undefined"==typeof Tilde&&(Tilde={}),Tilde.TranslatorWidgetDefaultOptions={_systemListUrl:"https://letsmt.eu/ws/Service.svc/json/GetSystemList",_apiIsInTheSameDomain:!1,_jsonType:"json",_appId:"",_clientId:"",_systems:null,_allowedSystemStatuses:"running",_templateId:null,_replaceContainer:!1,_translations:{},_language:"en",_useFancySelect:!0,_systemSelectType:"language",_replaceSourceWithBlock:!1,_defaultSourceLang:null,_defaultTargetLang:null,_defaultDomain:null,_defaultSystem:null,_customSelectText:"",_swapLanguages:!0,_getFilteredSystems:!1,_onGetSystemListError:null,_onSystemsLoaded:null,_onSystemChanged:null,_onWidgetLoaded:null,_onWidgetTemplateLoaded:null,_loginUrl:null,_sourceLanguageOrder:null,_targetLanguageOrder:null},Tilde.TranslatorWidget=function(e,t){if(0!==$(e).length){var n=$.extend(Tilde.TranslatorWidgetDefaultOptions,t,{container:$(e)});this.initWidget(n)}},Tilde.TranslatorWidget.prototype={$widget:null,activeSystemId:null,settings:null,reverseSystems:[{}],fancySource:null,fancyTarget:null,fancyDomain:null,onSystemChangedHandlers:[],pluginInitializers:[],onSystemListLoadedHandlers:[],onWidgetLoadedCalled:!1,initWidget:function(e){$widget=this,$widget.settings=e,$widget.onSystemListLoadedHandlers.push($widget.systemLoadComplete),$widget.initWidgetTemplate(),$widget.initPlugins(),$widget.initWidgetLanguage(),$widget.settings._onSystemsLoaded&&"function"==typeof $widget.settings._onSystemsLoaded&&$widget.onSystemListLoadedHandlers.push($widget.settings._onSystemsLoaded),$widget.settings._onWidgetLoaded&&"function"==typeof $widget.settings._onWidgetLoaded&&$widget.onSystemListLoadedHandlers.push(function(e){$widget.onWidgetLoadedCalled||($widget.onWidgetLoadedCalled=!0,$widget.settings._onWidgetLoaded(e))}),$widget.retrieveSystemData()},pluginsInitialized:!1,initPlugins:function(){$widget.pluginInitializers&&!$widget.pluginsInitialized&&($widget.pluginsInitialized=!0,$.each($widget.pluginInitializers,function(e,t){t()}))},getAuthHeaders:function(){var e={};if(null!==$widget.settings._clientId&&(e={"client-id":$widget.settings._clientId}),!$widget.settings._apiIsInTheSameDomain){var t=$widget.readCookie("smts");t&&(e["website-auth-cookie"]=t)}return e},retrieveSystemData:function(){if($widget.settings._predefinedSystems)$.each($widget.onSystemListLoadedHandlers,function(e,t){t($widget.settings._systems)});else{var e={appID:$widget.settings._appId,uiLanguageID:$widget.settings._language};$widget.settings._getFilteredSystems&&(e.options="filter"),$widget.readCookie("show-public-systems")&&(e.options?e.options+=",public":e.options="public"),$.ajax({dataType:$widget.settings._json_type,type:"GET",url:$widget.settings._systemListUrl,headers:$widget.getAuthHeaders(),data:e,success:function(e){if($(".systemsLoading").addClass("hide"),$(".translateContainerHeader").removeClass("hide"),$widget.settings._systems=[],$.each(e.System,function(e,t){var n=$widget.getSystemMetaValue(t.Metadata,"status");-1!==$widget.settings._allowedSystemStatuses.indexOf(n)&&$widget.settings._systems.push(t)}),!$widget.settings._systems.length&&!$widget.readCookie("show-public-systems")&&!$widget.readCookie("show-private-systems"))return document.cookie="show-public-systems=true",void $widget.retrieveSystemData();$.each($widget.onSystemListLoadedHandlers,function(e,t){t($widget.settings._systems)})},error:function(){$widget.settings._onGetSystemListError&&"function"==typeof $widget.settings._onGetSystemListError&&$widget.settings._onGetSystemListError(),$(".systemsLoading").addClass("hide"),$(".translateContainerHeader").removeClass("hide"),$widget.settings.container.text(uiResources[$widget.settings._language].systemLoadError).addClass("noNetwork")}})}},getSystemMetaValue:function(e,n){if(void 0===e)return!1;var i=null;return $.each(e,function(e,t){if(t.Key===n)return i=t.Value,!1}),i},setSystemMetaValue:function(n,i,a){var s=null;return $.each($widget.settings._systems,function(e,t){t.ID===n&&(s=t)}),null===s||void 0===s.Metadata||$.each(s.Metadata,function(e,t){if(t.Key===i)return t.Value=a,!0}),!1},systemLoadComplete:function(){if("system"===$widget.settings._systemSelectType&&($.each($widget.settings._systems,function(e,t){t.order=$widget.getSystemMetaValue(t.Metadata,"order")}),$widget.settings._systems.sort(function(e,t){if(void 0===e.order||null===e.order||isNaN(parseInt(e.order,10))){if(void 0===t.order||null===t.order||isNaN(parseInt(t.order,10))){var n=3,i=3,a=$widget.getSystemMetaValue(e.Metadata,"status"),s=$widget.getSystemMetaValue(t.Metadata,"status");return"running"===a||"queuingtransl"===a?n=1:"standby"===a&&(n=2),"running"===s||"queuingtransl"===s?i=1:"standby"===s&&(i=2),n===i?e.Title.Text.toLowerCase()>t.Title.Text.toLowerCase()?1:-1:i<n?1:-1}return 1}return void 0===t.order||null===t.order||isNaN(parseInt(t.order,10))?-1:parseInt(e.order,10)>parseInt(t.order,10)?1:-1}),$widget.fancySystem=$(".translateSystem",$widget.settings.container),$widget.fancySystem.empty(),$.each($widget.settings._systems,function(e,t){$widget.fancySystem.append($("<option/>",{value:t.ID,text:t.Title.Text}))}),null!==$widget.settings._defaultSystem?$(".translateSystem",$widget.settings.container).val($widget.settings._defaultSystem):0<$widget.settings._systems.length&&$(".translateSystem",$widget.settings.container).val($widget.settings._systems[0].ID),$widget.fancySystem.parent().hasClass("fancy-select")||$widget.fancySystem.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,includeBlank:!0,triggerTemplate:function(e){return $widget.activeSystemId!==e.val()&&($widget.activeSystemId=e.val(),$widget.settings._onSystemChanged&&"function"==typeof $widget.settings._onSystemChanged&&$widget.settings._onSystemChanged($widget.activeSystemId),$widget.onSystemChangedHandlers&&$.each($widget.onSystemChangedHandlers,function(e,t){t($widget.activeSystemId)})),e.val()?e.text():"-"}})),"language"===$widget.settings._systemSelectType||"domain"===$widget.settings._systemSelectType){if(($widget.settings._sourceLanguageOrder||$widget.settings._targetLanguageOrder)&&($.each($widget.settings._systems,function(e,t){var n=-1,i=-1;if($widget.settings._sourceLanguageOrder)for(langIndex=0;langIndex<$widget.settings._sourceLanguageOrder.length;langIndex++)$widget.settings._sourceLanguageOrder[langIndex]==t.SourceLanguage.Code&&(n=langIndex);if($widget.settings._targetLanguageOrder)for(langIndex=0;langIndex<$widget.settings._targetLanguageOrder.length;langIndex++)$widget.settings._targetLanguageOrder[langIndex]==t.TargetLanguage.Code&&(i=langIndex);t.order=0,-1<n&&(t.order=t.order+100*n),-1<i&&(t.order=t.order+i)}),$widget.settings._systems.sort(function(e,t){return void 0!==t.order&&null!==t.order&&e.order>t.order?1:-1})),$widget.settings._defaultSystem&&$.each($widget.settings._systems,function(e,t){t.ID===$widget.settings._defaultSystem&&($widget.settings._defaultSourceLang=t.SourceLanguage.Code,$widget.settings._defaultTargetLang=t.TargetLanguage.Code)}),$widget.settings._systems&&$.each($widget.settings._systems,function(e,t){0==$('.translateSourceLang option[value="'+t.SourceLanguage.Code+'"]',$widget.settings.container).length&&$(".translateSourceLang",$widget.settings.container).append($("<option>",{value:t.SourceLanguage.Code,text:uiResources[$widget.settings._language][t.SourceLanguage.Code]?uiResources[$widget.settings._language][t.SourceLanguage.Code]:t.SourceLanguage.Name.Text}))}),1===$(".translateSourceLang option",$widget.settings.container).length&&$widget.settings._replaceSourceWithBlock){var e=$(".translateSourceLang",$widget.settings.container),t=e.val(),n=e.text();e.replaceWith('<div class="translateSingleSourceLang" data-value="'+t+'">'+n+"</div>"),$widget.loadTargetLangList(t,null,"language"===$widget.settings._systemSelectType)}else null!==$widget.settings._defaultSourceLang&&$('.translateSourceLang option[value="'+$widget.settings._defaultSourceLang+'"]',$widget.settings.container).attr("selected",!0),$widget.fancySource=$(".translateSourceLang",$widget.settings.container),$widget.fancySource.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,triggerTemplate:function(e){var t=$widget.fancyTarget,n=t&&t.length?t[0].options&&t[0].options.length?t[0].options[t[0].selectedIndex].lang:null:$widget.settings._defaultTargetLang;return $widget.loadTargetLangList(e.val(),n,"language"===$widget.settings._systemSelectType),""!=$widget.settings._customSelectText?$widget.settings._customSelectText:e.text()}});$widget.settings._swapLanguages&&($(".swapLanguage",$widget.settings.container).off("click"),$(".swapLanguage",$widget.settings.container).on("click",function(){$widget.swapSystemLanguages()}),$("#webSwapLanguage").off("click"),$("#webSwapLanguage").on("click",function(){$widget.swapSystemLanguages()}))}"language"===$widget.settings._systemSelectType&&($widget.fancyTarget=$(".translateTargetLang",$widget.settings.container),$widget.fancyTarget.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,triggerTemplate:function(e){return $widget.activeSystemId!==e.val()&&($widget.activeSystemId=e.val(),$widget.settings._swapLanguages&&($widget.checkReverseSystem()?$(".swapLanguage",$widget.settings.container).removeClass("hide"):$(".swapLanguage",$widget.settings.container).addClass("hide")),$widget.settings._onSystemChanged&&"function"==typeof $widget.settings._onSystemChanged&&$widget.settings._onSystemChanged($widget.activeSystemId),$widget.onSystemChangedHandlers&&$.each($widget.onSystemChangedHandlers,function(e,t){t($widget.activeSystemId)})),""!=$widget.settings._customSelectText?$widget.settings._customSelectText:e.text()}})),"domain"===$widget.settings._systemSelectType&&($(".translateDomainContainer",$widget.settings.container).removeClass("hide"),null!==$widget.settings._defaultTargetLang&&$('.translateTargetLang option[lang="'+$widget.settings._defaultTargetLang+'"]',$widget.settings.container).val($widget.settings._defaultTargetLang),$widget.fancyTarget=$(".translateTargetLang",$widget.settings.container),$widget.fancyTarget.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,triggerTemplate:function(e){var t=$(".translateSourceLang",$widget.settings.container).val();return 0!==$(".translateSingleSourceLang",$widget.settings.container).length&&(t=$(".translateSingleSourceLang",$widget.settings.container).attr("data-value")),$widget.loadDomainList(t,e.val()),e.text()}}),null!==$widget.settings._defaultDomain&&$('.translateDomain option[domain="'+$widget.settings._defaultDomain+'"]',$widget.settings.container).prop("selected",!0),$widget.fancyDomain=$(".translateDomain",$widget.settings.container),$widget.fancyDomain.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,triggerTemplate:function(e){return $widget.activeSystemId!==e.val()&&void 0!==e.val()&&($widget.activeSystemId=e.val(),$widget.settings._onSystemChanged&&"function"==typeof $widget.settings._onSystemChanged&&$widget.settings._onSystemChanged($widget.activeSystemId),$widget.onSystemChangedHandlers&&$.each($widget.onSystemChangedHandlers,function(e,t){t($widget.activeSystemId)})),e.text()}}))},onWidgetActivated:function(){$(document).trigger("resize")},initWidgetTemplate:function(){if($widget.onWidgetActivated(),null!==$widget.settings._templateId||""!==$widget.settings._templateId)if($widget.settings._replaceContainer){var e=$("#"+$widget.settings._templateId).html(),t=$widget.settings.container;$(e).insertBefore($widget.settings.container),$widget.settings.container=$widget.settings.container.parent(),t.remove()}else $widget.settings.container.html($("#"+$widget.settings._templateId).html());$widget.settings._onWidgetTemplateLoaded&&"function"==typeof $widget.settings._onWidgetTemplateLoaded&&$widget.settings._onWidgetTemplateLoaded()},initWidgetLanguage:function(){uiResources[$widget.settings._language]=$.extend(uiResources[$widget.settings._language],$widget.settings._translations[$widget.settings._language]),$.each(uiResources[$widget.settings._language],function(e,t){$('[data-text="'+e+'"]',$widget.settings.container).text(t),$('[data-html="'+e+'"]',$widget.settings.container).html(t),$('[data-title="'+e+'"]',$widget.settings.container).attr("title",t)})},setActiveSystem:function(n){if(n!==$widget.activeSystemId){var i="",a="";null!=$widget.settings._systems&&$.each($widget.settings._systems,function(e,t){if(t.ID===n)return i=t.SourceLanguage.Code,a=t.TargetLanguage.Code,!1}),"language"===$widget.settings._systemSelectType||"domain"===$widget.settings._systemSelectType?($('.translateSourceLang option[selected="selected"]',$widget.settings.container).removeAttr("selected"),$('.translateSourceLang option[value="'+i+'"]',$widget.settings.container).prop("selected",!0),"language"===$widget.settings._systemSelectType?$widget.loadTargetLangList(i,a,!0):"domain"===$widget.settings._systemSelectType&&$widget.loadTargetLangList(i,a,!1),null!==$widget.fancySource&&($("#source_lang_div .options li").each(function(){$(this).data("raw-value")!=i?$(this).removeClass("selected"):$(this).addClass("selected")}),$widget.fancySource.trigger("change.fs")),null!==$(".w .translateSourceLang")&&$(".web_transl_types .options li").each(function(){$(this).data("raw-value")!=i?$(this).removeClass("selected"):$(this).addClass("selected")})):($('.translateSystem option[selected="selected"]',$widget.settings.container).removeAttr("selected"),$('.translateSystem option[value="'+n+'"]',$widget.settings.container).prop("selected",!0),$(".translateSystem.fancified",$widget.settings.container)&&$(".translateSystem.fancified",$widget.settings.container).trigger("change.fs"))}},getActiveSystemObj:function(){if(!$widget.settings._systems)return null;var n=null;return $.each($widget.settings._systems,function(e,t){if(t.ID===$widget.activeSystemId)return n=t,!1}),n},checkReverseSystem:function(){if(!$widget.settings._systems)return!1;var n="",i="",a=!1;return $.each($widget.settings._systems,function(e,t){t.ID===$widget.activeSystemId&&(n=t.SourceLanguage.Code,i=t.TargetLanguage.Code)}),$.each($widget.settings._systems,function(e,t){t.SourceLanguage.Code===i&&t.TargetLanguage.Code===n&&(a=!0)}),a},swapSystemLanguages:function(){var n="",i="";$widget.activeSystemId||($widget.activeSystemId=$widget.settings._systems[0].ID),$.each($widget.settings._systems,function(e,t){if(t.ID===$widget.activeSystemId)return n=t.SourceLanguage.Code,i=t.TargetLanguage.Code,!1}),$.each($widget.settings._systems,function(e,t){if(t.SourceLanguage.Code===i&&t.TargetLanguage.Code===n)return $widget.setActiveSystem(t.ID),!1})},disableSystemChange:function(){$(".swapLanguage").attr("data-disabled",!0),$widget.fancySource&&$widget.fancySource.trigger("disable"),$widget.fancyTarget&&$widget.fancyTarget.trigger("disable"),$widget.fancyDomain&&$widget.fancyDomain.trigger("disable"),$widget.fancySystem&&$widget.fancySystem.trigger("disable"),$widget.terminology&&$widget.terminology.trigger("disable")},enableSystemChange:function(){$(".swapLanguage").attr("data-disabled",!1),$widget.fancySource&&$widget.fancySource.trigger("enable"),$widget.fancyTarget&&$widget.fancyTarget.trigger("enable"),$widget.fancyDomain&&$widget.fancyDomain.trigger("enable"),$widget.fancySystem&&$widget.fancySystem.trigger("enable"),$widget.terminology&&$widget.terminology.trigger("enable")},loadTargetLangList:function(n,e,i){if($(".translateTargetLang",$widget.settings.container).empty(),$widget.settings._systems&&$.each($widget.settings._systems,function(e,t){t.SourceLanguage.Code===n&&(i?0===$('.translateTargetLang option[lang="'+t.TargetLanguage.Code+'"]',$widget.settings.container).length&&$(".translateTargetLang",$widget.settings.container).append($("<option>",{value:t.ID,text:uiResources[$widget.settings._language][t.TargetLanguage.Code]?uiResources[$widget.settings._language][t.TargetLanguage.Code]:t.TargetLanguage.Name.Text,lang:t.TargetLanguage.Code})):0===$('.translateTargetLang option[lang="'+t.TargetLanguage.Code+'"]',$widget.settings.container).length&&$(".translateTargetLang",$widget.settings.container).append($("<option>",{value:t.TargetLanguage.Code,text:uiResources[$widget.settings._language][t.TargetLanguage.Code]?uiResources[$widget.settings._language][t.TargetLanguage.Code]:t.TargetLanguage.Name.Text})))}),null!=e){var t=$('.translateTargetLang option[lang="'+e+'"]',$widget.settings.container);1==t.length?$(t[0]).prop("selected",!0):$widget.settings._defaultTargetLang&&$('.translateTargetLang option[lang="'+$widget.settings._defaultTargetLang+'"]',$widget.settings.container).prop("selected",!0)}null!==$widget.fancyTarget&&$widget.fancyTarget.trigger("update.fs")},loadDomainList:function(n,i){var e="";0!==$(".translateDomain option:selected",$widget.settings.container).length&&(e=$(".translateDomain option:selected",$widget.settings.container).attr("domain")),$(".translateDomain",$widget.settings.container).empty(),$.each($widget.settings._systems,function(e,t){t.SourceLanguage.Code===n&&t.TargetLanguage.Code===i&&$(".translateDomain",$widget.settings.container).append($("<option>",{value:t.ID,domain:t.Domain,text:t.Domain}))}),""===e?$(".translateDomain",$widget.settings.container).val($(".translateDomain option:first",$widget.settings.container).val()):$('.translateDomain option[domain="'+e+'"]',$widget.settings.container).prop("selected",!0),null!==$widget.fancyDomain&&$widget.fancyDomain.trigger("update.fs")},readCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}},function(){var g;(g=window.jQuery||window.Zepto||window.$).fn.fancySelect=function(e){var r,l=!1,d=!1;return null==e&&(e={}),r=g.extend({useNativeSelect:!1,includeBlank:!1,optionTemplate:function(e){return e.text()},triggerTemplate:function(e){return e.text()}},e),this.each(function(){var e,t,a,i,s,n,o;if(!(i=g(this)).hasClass("fancified")&&"SELECT"===i[0].tagName)return i.addClass("fancified"),r.useNativeSelect?i.css({display:"block",position:"absolute",top:0,left:0,opacity:0}):i.css({width:1,height:1,display:"block",position:"absolute",top:0,left:0,opacity:0}),i.wrap('<div class="fancy-select">'),o=i.parent(),i.data("class")&&o.addClass(i.data("class")),o.append('<div class="trigger">'),r.useNativeSelect||o.append('<ul class="options">'),s=o.find(".trigger"),a=o.find(".options"),(t=i.prop("disabled"))&&o.addClass("disabled"),n=function(){var e;return e=r.triggerTemplate(i.find(":selected")),s.html(e)},i.on("blur.fs",function(){if(!l)return d&&!l?(d=!1,void i.focus()):s.hasClass("open")?s.trigger("close.fs"):void 0}),s.on("close.fs",function(){return l=!1,s.removeClass("open"),a.removeClass("open")}),s.on("mousedown.fs",function(){l=!0}),s.on("click.fs",function(){var e;if(l=!1,!t)if(s.toggleClass("open"),r.useNativeSelect){if(s.hasClass("open"))return i.focus()}else if(s.hasClass("open")&&((e=s.parent()).offsetParent(),e.offset().top+e.outerHeight()+a.outerHeight()+20>g(window).height()+g(window).scrollTop()?a.addClass("overflowing"):a.removeClass("overflowing")),a.toggleClass("open"),!r.useNativeSelect)return i.focus()}),i.on("enable",function(){return i.prop("disabled",!1),o.removeClass("disabled"),t=!1}),i.on("disable",function(){return i.prop("disabled",!0),o.addClass("disabled"),t=!0}),i.on("change.fs",function(e){return r.useNativeSelect?n():e.originalEvent&&e.originalEvent.isTrusted?e.stopPropagation():n()}),i.on("keydown",function(e){var t,n,i;if(i=e.which,(t=a.find(".hover")).removeClass("hover"),a.hasClass("open")){if(38===i?(e.preventDefault(),t.length&&0<t.index()?t.prev().addClass("hover"):a.find("li:last-child").addClass("hover")):40===i?(e.preventDefault(),t.length&&t.index()<a.find("li").length-1?t.next().addClass("hover"):a.find("li:first-child").addClass("hover")):27===i?(e.preventDefault(),s.trigger("click.fs")):13===i||32===i?(e.preventDefault(),t.trigger("click.fs")):9===i&&s.hasClass("open")&&s.trigger("close.fs"),(n=a.find(".hover")).length)return a.scrollTop(0),a.scrollTop(n.position().top-12)}else if(13===i||32===i||38===i||40===i)return e.preventDefault(),s.trigger("click.fs")}),a.on("click.fs","li",function(e){var t;t=g(this),i.val(t.data("raw-value")),r.useNativeSelect||i.trigger("blur.fs").trigger("focus.fs"),a.find(".selected").removeClass("selected"),t.addClass("selected"),s.addClass("selected");var n=i.val(t.data("raw-value")).trigger("change.fs").trigger("blur.fs").trigger("focus.fs");return d=l=!1,n}),a.on("mousedown",function(){d=!0}),a.on("mouseup",function(){d&&(d=!1,i.focus()),l=!1}),a.on("mousedown.fs","li",function(){l=!0}),a.on("mouseenter.fs","li",function(){var e;return e=g(this),a.find(".hover").removeClass("hover"),e.addClass("hover")}),a.on("mouseleave.fs","li",function(){return a.find(".hover").removeClass("hover")}),e=function(){if(n(),!r.useNativeSelect)return i.find("option"),i.find("option").each(function(e,t){var n;if(!(t=g(t)).prop("disabled")&&(t.val()||r.includeBlank))return n=r.optionTemplate(t),t.prop("selected")?a.append('<li data-raw-value="'+t.val()+'" class="selected">'+angular.element(g("#my_translator_app")).scope().localize(n)+"</li>"):a.append('<li data-raw-value="'+t.val()+'">'+angular.element(g("#my_translator_app")).scope().localize(n)+"</li>")})},i.on("update.fs",function(){return o.find(".options").empty(),e()}),e()})}}.call(this);var qq=qq||{};qq.extend=function(e,t){for(var n in t)e[n]=t[n]},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var i=e.length;for(n<0&&(n+=i);n<i;n++)if(n in e&&e[n]===t)return n;return-1},qq.getUniqueId=function(){var e=0;return function(){return e++}}(),qq.attach=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},qq.detach=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n)},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.insertBefore=function(e,t){t.parentNode.insertBefore(e,t)},qq.remove=function(e){e.parentNode.removeChild(e)},qq.contains=function(e,t){return e==t||(e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e)))},qq.toElement=function(){var n=document.createElement("div");return function(e){n.innerHTML=e;var t=n.firstChild;return n.removeChild(t),t}}(),qq.css=function(e,t){null!=t.opacity&&"string"!=typeof e.style.opacity&&void 0!==e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t)},qq.hasClass=function(e,t){return new RegExp("(^| )"+t+"( |$)").test(e.className)},qq.addClass=function(e,t){qq.hasClass(e,t)||(e.className+=" "+t)},qq.removeClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,"")},qq.setText=function(e,t){e.innerText=t,e.textContent=t},qq.children=function(e){for(var t=[],n=e.firstChild;n;)1==n.nodeType&&t.push(n),n=n.nextSibling;return t},qq.getByClass=function(e,t){if(e.querySelectorAll)return e.querySelectorAll("."+t);for(var n=[],i=e.getElementsByTagName("*"),a=i.length,s=0;s<a;s++)qq.hasClass(i[s],t)&&n.push(i[s]);return n},qq.obj2url=function(e,i,t){var a=[],n="&",s=function(e,t){var n=i?/\[\]$/.test(i)?i:i+"["+t+"]":t;"undefined"!=n&&"undefined"!=t&&a.push("object"==typeof e?qq.obj2url(e,n,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(n)+"="+encodeURIComponent(e()):encodeURIComponent(n)+"="+encodeURIComponent(e))};if(!t&&i)n=/\?/.test(i)?/\?$/.test(i)?"":"&":"?",a.push(i),a.push(qq.obj2url(e));else if("[object Array]"===Object.prototype.toString.call(e)&&void 0!==e)for(var o=0,r=e.length;o<r;++o)s(e[o],o);else if(null!=e&&"object"==typeof e)for(var o in e)s(e[o],o);else a.push(encodeURIComponent(i)+"="+encodeURIComponent(e));return a.join(n).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(e){this._options={debug:!1,action:"/server/upload",headers:null,params:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],allowedMimetypes:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(e,t){},onProgress:function(e,t,n,i){},onComplete:function(e,t,n){},onCancel:function(e,t){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(e){alert(e)}},qq.extend(this._options,e),this._filesInProgress=0,this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FileUploaderBasic.prototype={setParams:function(e){this._options.params=e},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(e){var t=this;return new qq.UploadButton({element:e,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),allowedMimetypes:this._options.allowedMimetypes,onChange:function(e){t._onInputChange(e)}})},_createUploadHandler:function(){var e,a=this;return e=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm",new qq[e]({debug:this._options.debug,action:this._options.action,headers:this._options.headers,maxConnections:this._options.maxConnections,onProgress:function(e,t,n,i){a._onProgress(e,t,n,i),a._options.onProgress(e,t,n,i)},onComplete:function(e,t,n){a._onComplete(e,t,n),a._options.onComplete(e,t,n)},onCancel:function(e,t){a._onCancel(e,t),a._options.onCancel(e,t)}})},_preventLeaveInProgress:function(){var t=this;qq.attach(window,"beforeunload",function(e){if(t._filesInProgress)return(e=e||window.event).returnValue=t._options.messages.onLeave,t._options.messages.onLeave})},_onSubmit:function(e,t){this._filesInProgress++},_onProgress:function(e,t,n,i){},_onComplete:function(e,t,n){this._filesInProgress--,n.error&&this._options.showMessage(n.error)},_onCancel:function(e,t){this._filesInProgress--},_onInputChange:function(e){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(e.files):this._validateFile(e)&&this._uploadFile(e),this._button.reset()},_uploadFileList:function(e){for(var t=0;t<e.length;t++)if(!this._validateFile(e[t]))return;for(t=0;t<e.length;t++)this._uploadFile(e[t])},_uploadFile:function(e){var t=this._handler.add(e),n=this._handler.getName(t);!1!==this._options.onSubmit(t,n)&&(this._onSubmit(t,n),this._handler.upload(t,this._options.params))},_validateFile:function(e){var t,n;return e.value?t=e.value.replace(/.*(\/|\\)/,""):(t=null!=e.fileName?e.fileName:e.name,n=null!=e.fileSize?e.fileSize:e.size),t&&(t=decodeURIComponent(t)),this._isAllowedExtension(t)?0===n?(this._error("emptyError",t),!1):n&&this._options.sizeLimit&&n>this._options.sizeLimit?(this._error("sizeError",t),!1):!(n&&n<this._options.minSizeLimit)||(this._error("minSizeError",t),!1):(this._error("typeError",t),!1)},_error:function(e,t){var n=this._options.messages[e];function i(e,t){n=n.replace(e,t)}i("{file}",this._formatFileName(t)),i("{extensions}",this._options.allowedExtensions.join(", ")),i("{sizeLimit}",this._formatSize(this._options.sizeLimit)),i("{minSizeLimit}",this._formatSize(this._options.minSizeLimit)),this._options.showMessage(n)},_formatFileName:function(e){return e},_isAllowedExtension:function(e){var t=-1!==e.indexOf(".")?e.replace(/.*[.]/,"").toLowerCase():"",n=this._options.allowedExtensions;if(!n.length)return!0;for(var i=0;i<n.length;i++)if(n[i].toLowerCase()==t)return!0;return!1},_formatSize:function(e){for(var t=-1;t++,999<(e/=1024););return+e.toFixed(2)+["kB","MB","GB","TB","PB","EB"][t]}},qq.FileUploader=function(e){qq.FileUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button">Upload a file</div><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}}),qq.extend(this._options,e),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button=this._createUploadButton(this._find(this._element,"button")),this._bindCancelEvent(),this._setupDragDrop()},qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype),qq.extend(qq.FileUploader.prototype,{_find:function(e,t){var n=qq.getByClass(e,this._options.classes[t])[0];if(!n)throw new Error("element not found "+t);return n},_setupDragDrop:function(){var t=this,n=this._find(this._element,"drop"),i=new qq.UploadDropZone({element:n,onEnter:function(e){qq.addClass(n,t._classes.dropActive),e.stopPropagation()},onLeave:function(e){e.stopPropagation()},onLeaveNotDescendants:function(e){qq.removeClass(n,t._classes.dropActive)},onDrop:function(e){n.style.display="none",qq.removeClass(n,t._classes.dropActive),t._uploadFileList(e.dataTransfer.files)}});n.style.display="none",qq.attach(document,"dragenter",function(e){i._isValidFileDrag(e)&&(n.style.display="block")}),qq.attach(document,"dragleave",function(e){if(i._isValidFileDrag(e)){var t=document.elementFromPoint(e.clientX,e.clientY);t&&"HTML"!=t.nodeName||(n.style.display="none")}})},_onSubmit:function(e,t){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onProgress:function(e,t,n,i){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var a,s=this._getItemByFileId(e),o=this._find(s,"size");o.style.display="inline",a=n!=i?Math.round(n/i*100)+"% from "+this._formatSize(i):this._formatSize(i),qq.setText(o,a)},_onComplete:function(e,t,n){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var i=this._getItemByFileId(e);qq.remove(this._find(i,"cancel")),n.success?qq.addClass(i,this._classes.success):qq.addClass(i,this._classes.fail)},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);n.qqFileId=e;var i=this._find(n,"file");qq.setText(i,this._formatFileName(t)),this._find(n,"size").style.display="none",this._listElement.appendChild(n)},_getItemByFileId:function(e){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==e)return t;t=t.nextSibling}},_bindCancelEvent:function(){var i=this,e=this._listElement;qq.attach(e,"click",function(e){var t=(e=e||window.event).target||e.srcElement;if(qq.hasClass(t,i._classes.cancel)){qq.preventDefault(e);var n=t.parentNode;i._handler.cancel(n.qqFileId),qq.remove(n)}})}}),qq.UploadDropZone=function(e){this._options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}},qq.extend(this._options,e),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_disableDropOutside:function(e){qq.UploadDropZone.dropOutsideDisabled||(qq.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var n=this;qq.attach(n._element,"dragover",function(e){if(n._isValidFileDrag(e)){var t=e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"==t||"linkMove"==t?"move":"copy",e.stopPropagation(),e.preventDefault()}}),qq.attach(n._element,"dragenter",function(e){n._isValidFileDrag(e)&&n._options.onEnter(e)}),qq.attach(n._element,"dragleave",function(e){if(n._isValidFileDrag(e)){n._options.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);qq.contains(this,t)||n._options.onLeaveNotDescendants(e)}}),qq.attach(n._element,"drop",function(e){n._isValidFileDrag(e)&&(e.preventDefault(),n._options.onDrop(e))})},_isValidFileDrag:function(e){var t=e.dataTransfer,n=-1<navigator.userAgent.indexOf("AppleWebKit");return t&&"none"!=t.effectAllowed&&(t.files||!n&&t.types.contains&&t.types.contains("Files"))}},qq.UploadButton=function(e){this._options={element:null,multiple:!1,allowedMimetypes:[],name:"file",onChange:function(e){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,e),this._element=this._options.element,qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input),qq.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var e=document.createElement("input");if(this._options.multiple&&e.setAttribute("multiple","multiple"),e.setAttribute("type","file"),-1<navigator.userAgent.indexOf("Edge")&&this._options.allowedMimetypes)for(var t=[],n=0;n<this._options.allowedMimetypes.length;n++)"application/xhtml+xml"!=this._options.allowedMimetypes[n]&&t.push(this._options.allowedMimetypes[n]);else e.setAttribute("accept",this._options.allowedMimetypes.join(", "));e.setAttribute("name",this._options.name),qq.css(e,{position:"absolute",right:0,top:0,fontSize:"180px",height:"100%",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(e);var i=this;return qq.attach(e,"change",function(){i._options.onChange(e)}),qq.attach(e,"mouseover",function(){qq.addClass(i._element,i._options.hoverClass)}),qq.attach(e,"mouseout",function(){qq.removeClass(i._element,i._options.hoverClass)}),qq.attach(e,"focus",function(){qq.addClass(i._element,i._options.focusClass)}),qq.attach(e,"blur",function(){qq.removeClass(i._element,i._options.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}},qq.UploadHandlerAbstract=function(e){this._options={debug:!1,action:"/upload.php",headers:null,maxConnections:999,onProgress:function(e,t,n,i){},onComplete:function(e,t,n){},onCancel:function(e,t){}},qq.extend(this._options,e),this._queue=[],this._params=[]},qq.UploadHandlerAbstract.prototype={log:function(e){this._options.debug&&"undefined"!=typeof console&&console.log("[uploader] "+e)},add:function(e){},upload:function(e,t){var n=this._queue.push(e),i={};qq.extend(i,t),this._params[e]=i,n<=this._options.maxConnections&&this._upload(e,this._params[e])},cancel:function(e){this._cancel(e),this._dequeue(e)},cancelAll:function(){for(var e=0;e<this._queue.length;e++)this._cancel(this._queue[e]);this._queue=[]},getName:function(e){},getSize:function(e){},getQueue:function(){return this._queue},_upload:function(e){},_cancel:function(e){},_dequeue:function(e){var t=qq.indexOf(this._queue,e);this._queue.splice(t,1);var n=this._options.maxConnections;if(this._queue.length>=n&&t<n){var i=this._queue[n-1];this._upload(i,this._params[i])}}},qq.UploadHandlerForm=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(e){e.setAttribute("name","fname");var t="qq-upload-handler-iframe"+qq.getUniqueId();return(this._inputs[t]=e).parentNode&&qq.remove(e),t},getName:function(e){return this._inputs[e].value.replace(/.*(\/|\\)/,"")},_cancel:function(e){this._options.onCancel(e,this.getName(e)),delete this._inputs[e];var t=document.getElementById(e);t&&(t.setAttribute("src","javascript:false;"),qq.remove(t))},_upload:function(t,e){var n=this._inputs[t];if(!n)throw new Error("file with passed id was not added, or already uploaded or cancelled");var i=this.getName(t),a=this._createIframe(t),s=this._createForm(a,e);s.appendChild(n);var o=this;return this._attachLoadEvent(a,function(){o.log("iframe loaded");var e=o._getIframeContentJSON(a);o._options.onComplete(t,i,e),o._dequeue(t),delete o._inputs[t],setTimeout(function(){qq.remove(a)},1)}),s.submit(),qq.remove(s),t},_attachLoadEvent:function(e,t){qq.attach(e,"load",function(){e.parentNode&&(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML||t())})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+doc.body.outerText);try{response=eval("("+doc.body.outerText+")")}catch(e){response={}}return response},_createIframe:function(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e,t){var n=qq.toElement('<form method="post" enctype="multipart/form-data"></form>'),i=qq.obj2url(t,this._options.action);return n.setAttribute("action",i),n.setAttribute("target",e.name),n.style.display="none",document.body.appendChild(n),n}}),qq.UploadHandlerXhr=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var e=document.createElement("input");return e.type="file","multiple"in e&&"undefined"!=typeof File&&void 0!==(new XMLHttpRequest).upload},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(e){if(!(e instanceof File))throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(e)-1},getName:function(e){var t=this._files[e],n=null!=t.fileName?t.fileName:t.name;return n?decodeURIComponent(n):n},getSize:function(e){var t=this._files[e];return null!=t.fileSize?t.fileSize:t.size},getLoaded:function(e){return this._loaded[e]||0},_upload:function(t,e){var n=this._files[t],i=this.getName(t);this.getSize(t);this._loaded[t]=0;var a=this._xhrs[t]=new XMLHttpRequest,s=this;a.upload.onprogress=function(e){e.lengthComputable&&(s._loaded[t]=e.loaded,s._options.onProgress(t,i,e.loaded,e.total))},a.onreadystatechange=function(){4==a.readyState&&s._onComplete(t,a)},(e=e||{}).fname=i;var o=qq.obj2url(e,this._options.action);for(var r in a.open("POST",o,!0),this._options.headers)this._options.headers.hasOwnProperty(r)&&a.setRequestHeader(r,this._options.headers[r]);a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-File-Name",encodeURIComponent(i)),a.setRequestHeader("Content-Type","application/octet-stream"),a.send(n)},_onComplete:function(id,xhr){if(this._files[id]){var name=this.getName(id),size=this.getSize(id);if(this._options.onProgress(id,name,size,size),200==xhr.status){var response;this.log("xhr - server response received"),this.log("responseText = "+xhr.responseText);try{response=eval("("+xhr.responseText+")")}catch(e){response={}}this._options.onComplete(id,name,response)}else this._options.onComplete(id,name,{error:"Fail. HTTP status: "+xhr.status+" "+xhr.statusText});this._files[id]=null,this._xhrs[id]=null,this._dequeue(id)}},_cancel:function(e){this._options.onCancel(e,this.getName(e)),this._files[e]=null,this._xhrs[e]&&(this._xhrs[e].abort(),this._xhrs[e]=null)}}),function(){var e={getSelection:function(){var a=this.$?this[0]:this;return("selectionStart"in a&&function(){var e=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:e,text:a.value.substr(a.selectionStart,e)}}||document.selection&&function(){try{var e=document.selection.createRange();if(0<$(e.parentElement()).parents(".translateContainerRight").length)return{start:0,end:a.value.length,length:0,text:""};if(null==e)return{start:0,end:a.value.length,length:0};var t=a.createTextRange(),n=t.duplicate();t.moveToBookmark(e.getBookmark()),n.setEndPoint("EndToStart",t);var i=n.text;return{start:i.replace(/\r\n/g,"\n").length,end:i.length+e.text.length,length:e.text.length,text:e.text}}catch(e){return 0<a.length?{start:0,end:a[0].value.length,length:0,text:""}:{start:0,end:a.value.length,length:0,text:""}}}||function(){return{start:0,end:a.length,length:0,text:""}})()},replaceSelection:function(){var e=this.$?this[0]:this,t=arguments[0]||"";return("selectionStart"in e&&function(){return e.value=e.value.substr(0,e.selectionStart)+t+e.value.substr(e.selectionEnd,e.value.length),this}||document.selection&&function(){return e.focus(),document.selection.createRange().text=t,this}||function(){return e.value+=t,this})()}};$.each(e,function(e){$.fn[e]=this}),$.fn.addOption=function(){var t=function(e,t,n,i,a){var s=document.createElement("option");s.value=t,s.text=n;var o=e.options,r=o.length;if(!e.cache){e.cache={};for(var l=0;l<r;l++)e.cache[o[l].value]=l}if(a||0==a)for(var d=s,g=a;g<=r;g++){var c=e.options[g];e.options[g]=d,o[g]=d,e.cache[o[g].value]=g,d=c}void 0===e.cache[t]&&(e.cache[t]=r),e.options[e.cache[t]]=s,i&&(s.selected=!0)},e=arguments;if(0==e.length)return this;var n,i,a,s=!0,o=!1;return"object"==typeof e[0]&&(o=!0,n=e[0]),2<=e.length&&("boolean"==typeof e[1]?(s=e[1],startindex=e[2]):("boolean"==typeof e[2]&&(s=e[2]),startindex=e[1]),o||(i=e[0],a=e[1])),this.each(function(){if("select"==this.nodeName.toLowerCase())if(o)for(var e in n)t(this,e,n[e],s,startindex),startindex+=1;else t(this,i,a,s,startindex)}),this},$.fn.selectOptions=function(e,t){var i=e,n=typeof e;if("object"==n&&i.constructor==Array){var a=this;$.each(i,function(){a.selectOptions(this,t)})}var s=t||!1;return"string"!=n&&"function"!=n&&"object"!=n||this.each(function(){if("select"!=this.nodeName.toLowerCase())return this;for(var e=this.options,t=e.length,n=0;n<t;n++)i.constructor==RegExp?e[n].value.match(i)?e[n].selected=!0:s&&(e[n].selected=!1):e[n].value==i?e[n].selected=!0:s&&(e[n].selected=!1)}),this},$.fn.selectedValues=function(){var e=[];return this.selectedOptions().each(function(){e[e.length]=this.value}),e},$.fn.selectedOptions=function(){return this.find("option:selected")},$.fn.getDefaultFontSize=function(e){if($.fn.defaultFontSize)return $.fn.defaultFontSize;if(!(e=e||document.body))return null;var t=document.createElement("span");return t.style.cssText="display:inline-block; padding:0; line-height:1; position:absolute; visibility:hidden; font-size:1em",t.appendChild(document.createTextNode("M")),e.appendChild(t),$.fn.defaultFontSize=[t.offsetWidth,t.offsetHeight],e.removeChild(t),$.fn.defaultFontSize}}(),$.extend(Tilde.TranslatorWidgetDefaultOptions,{_useRecentLangSelector:!1}),$.extend(Tilde.TranslatorWidget.prototype,{recentlangsPluginInit:function(){$widget.settings._useRecentLangSelector&&($widget.onSystemListLoadedHandlers.push(function(){$widget.loadPopularSourceLangList(),$widget.loadPopularTargetLangList()}),$widget.onSystemChangedHandlers.push(function(e){$widget.changePopularLangList(e)}),$(document).on("click",".popSourceLangs li",function(){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active")),$('.translateSourceLang option[value="'+$(this).attr("data-value")+'"]').prop("selected",!0),$widget.fancySource.trigger("update.fs")}),$(document).on("click",".popTargetLangs li",function(){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active")),$('.translateTargetLang option[lang="'+$(this).attr("data-value")+'"]').prop("selected",!0),$widget.fancyTarget.trigger("update.fs")}),$(window).on("resize",function(){$widget.loadPopularSourceLangList(),$widget.loadPopularTargetLangList()}))},loadPopularSourceLangList:function(t){t||(t=3),languageIndexes=[],$(".translateSourceLang option").each(function(e){e<t?languageIndexes.push(e):$(this).val()===$(this).parent().val()&&(0<languageIndexes.length&&languageIndexes.pop(),languageIndexes.push(e))});var n="";$(".translateSourceLang option").each(function(e){0<=$.inArray(e,languageIndexes)&&(n+='<li data-value="'+$(this).val()+'"'+($(this).val()===$(this).parent().val()?' class="active"':"")+">"+angular.element($("#my_translator_app")).scope().localize($(this).text())+"</li>")}),$(".translateSystemContainerLeft .fancy-select").toggle($(".translateSourceLang option").length>t),$(".popSourceLangs").html(n),50<$(".translateSystemContainerLeft").height()&&1<t&&$widget.loadPopularSourceLangList(t-1)},loadPopularTargetLangList:function(t){t||(t=3),languageIndexes=[],$(".translateTargetLang option").each(function(e){e<t?languageIndexes.push(e):$(this).val()===$(this).parent().val()&&(0<languageIndexes.length&&languageIndexes.pop(),languageIndexes.push(e))});var n="";$(".translateTargetLang option").each(function(e){0<=$.inArray(e,languageIndexes)&&(n+='<li data-value="'+$(this).attr("lang")+'"'+($(this).val()===$(this).parent().val()?' class="active"':"")+">"+angular.element($("#my_translator_app")).scope().localize($(this).text())+"</li>")}),$(".translateSystemContainerRight .fancy-select").toggle($(".translateTargetLang option").length>t),$(".popTargetLangs").html(n),50<$(".translateSystemContainerRight").height()&&1<t&&$widget.loadPopularTargetLangList(t-1)},changePopularLangList:function(e){var t=$widget.getActiveSystemObj();if(t){var n=t.SourceLanguage.Code,i=t.TargetLanguage.Code;if($(".popSourceLangs li").removeClass("active"),0<$('.popSourceLangs li[data-value="'+n+'"]').length)$('.popSourceLangs li[data-value="'+n+'"]').addClass("active");else{var a=angular.element($("#my_translator_app")).scope().localize($(".translateSourceLang :selected").text());$(".popSourceLangs").prepend('<li data-value="'+n+'" class="active">'+a+"</li>"),$(".popSourceLangs li").last().remove(),1<$(".popSourceLangs li").length&&50<$(".translateSystemContainerLeft").height()&&$(".popSourceLangs li").last().remove()}if($widget.loadPopularTargetLangList(),$(".popTargetLangs li").removeClass("active"),0<$('.popTargetLangs li[data-value="'+i+'"]').length)$('.popTargetLangs li[data-value="'+i+'"]').addClass("active");else{a=angular.element($("#my_translator_app")).scope().localize($(".translateTargetLang :selected").text());$(".popTargetLangs").prepend('<li data-value="'+i+'" class="active">'+a+"</li>"),$(".popTargetLangs li").last().remove(),1<$(".popTargetLangs li").length&&50<$(".translateSystemContainerRight").height()&&$(".popTargetLangs li").last().remove()}}}}),$.extend(Tilde.TranslatorWidgetDefaultOptions,{_uploadUrl:"https://letsmt.eu/ws/Files/Upload",_deleteUrl:"https://letsmt.eu/ws/Files/Delete",_downloadUrl:"https://letsmt.eu/ws/Files/Download",_translateUrl:"https://letsmt.eu/ws/Files/StartTranslation",_previewUrl:"https://letsmt.eu/ws/Files/GetDocumentPreview",_checkStatusUrl:"https://letsmt.eu/ws/Files/GetStatus",_languageNamesUrl:"https://letsmt.eu/ws/Files/GetLanguageNames",_landingView:!1,_allowedFileTypes:[{ext:"txt",mime:"text/plain"}],_showAllowedFileInfo:!1,_mimetypeFilter:!0,_uploadSizeLimit:31457280,_startPercent:3,_docMaxWordCount:0,_docMaxSegmentCount:-1,_docTransMetadata:{},_warnWhenRunningAway:!1,_onFileUpload:null,_onDocTranslationStart:null,_onDocTranslationCancel:null,_onDocTranslationStop:null,_onDocTranslationFinished:null,_onDocTranslationError:null,_onDocTranslationProgress:null,_advancedOptions:!1}),$.extend(Tilde.TranslatorWidget.prototype,{filePluginInit:function(){if(0!==$("#docUploadFile",$widget.settings.container).length){$widget.filePluginEvents(),$widget.filePluginSetTempTextResult(),-1<navigator.userAgent.indexOf("iPhone OS")&&$(".docAppleLimited").removeClass("hide"),$widget.settings._landingView&&$widget.filePluginShowIntro();var e=[],t=[];for(var n in $widget.settings._allowedFileTypes){var i=$widget.settings._allowedFileTypes[n];-1==$.inArray(i.ext,e)&&e.push(i.ext),$widget.settings._mimetypeFilter&&-1==$.inArray(i.mime,t)&&t.push(i.mime)}$widget.onSystemChangedHandlers.push(function(){$("#docSourcePreview",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().SourceLanguage.Code),$(".translateResult",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().TargetLanguage.Code)});var a="";$widget.settings._showAllowedFileInfo&&(a='<span class="supTypesList">'+uiResources[$widget.settings._language].docSupportedTypes.replace("{extensions}",'<span class="format">'+e.join('</span>, <span class="format">')+"</span>")+"</span>"),-1!==$widget.settings._docMaxSegmentCount&&$(".stickyMessageBox").html(uiResources[$widget.settings._language].docLimit.replace("{limit}",$widget.settings._docMaxSegmentCount)).removeClass("hide");new qq.FileUploader({element:document.getElementById("docUploadFile"),multiple:!1,allowedExtensions:e,allowedMimetypes:t,action:$widget.settings._uploadUrl,headers:$widget.getAuthHeaders(),debug:!1,sizeLimit:$widget.settings._uploadSizeLimit,template:'<div class="qq-uploader"> <div class="qq-upload-drop-area"></div>\t<div href="#" class="qq-upload-button">  <div class="qq-upload-button-image"></div>  <div class="qq-upload-button-text">     <span data-text="docUploadTooltip"></span>'+a+'  </div> </div>\t<ul class="qq-upload-list hide"></ul></div>',fileTemplate:'<li> <div class="qq-upload-meta">     <span class="qq-upload-meta-title">'+uiResources[$widget.settings._language].docUploadFilename+'</span>     <span class="qq-upload-file"></span>     <span class="qq-upload-failed-text">'+uiResources[$widget.settings._language].docUploadFailed+'</span>     <a class="qq-upload-cancel hide"></a> </div> <div class="qq-upload-meta">     <span class="qq-upload-meta-title">'+uiResources[$widget.settings._language].docUploadFilesize+'</span>     <span class="qq-upload-size"></span> </div> <div class="qq-upload-meta">     <span class="qq-upload-meta-title">'+uiResources[$widget.settings._language].docUploadWordcount+'</span>     <span class="qq-upload-wordcount"></span> </div></li>',messages:{typeError:uiResources[$widget.settings._language].docUploadMsgType,sizeError:uiResources[$widget.settings._language].docUploadMsgSize,emptyError:uiResources[$widget.settings._language].docUploadMsgEmpty},onSubmit:$widget.filePluginUploadOnSubmit,onComplete:$widget.filePluginUploadOnComplete,showMessage:function(e){$(".translateProgress").addClass("hide"),$(".infoMessageBox").html(e).removeClass("hide")}});$widget.onSystemChangedHandlers.push(function(e){1!==$(".buttonDownDoc").length||$(".buttonDownDoc").hasClass("hide")||$widget.filePluginUploadNew(),$widget.filePluginSetTempTextResult()}),$widget.settings._advancedOptions&&($(".buttonAdvancedOptions").removeClass("hide"),$(".optionBox .optCheck").change(function(){$(this).is(":checked")?($(this).parent().find(".manualInput").slideDown(),"cbAddSourcePrefix"===$(this).attr("id")&&""===$("#inputSourcePrefix").val()&&$("#inputSourcePrefix").val("*M*"),"cbAddTargetPrefix"===$(this).attr("id")&&""===$("#inputTargetPrefix").val()&&$("#inputTargetPrefix").val("*M*")):$(this).parent().find(".manualInput").slideUp()}),$(".optionBox  .langOptCheck").change(function(){if($(this).is(":checked")){$(".tmxSourceLang").empty(),$(".tmxTargetLang").empty();if($widget.activeSystemId){var e=$widget.getActiveSystemObj(),t=e.SourceLanguage.Code+"-"+e.TargetLanguage.Code;$.ajax({type:"POST",url:$widget.settings._languageNamesUrl,headers:$widget.getAuthHeaders(),data:{languagePair:t},success:function(e){var t=e.split("\n");2==t.length&&($(".tmxSourceLang").empty().append(t[0]),$(".tmxTargetLang").empty().append(t[1]))},error:function(e){console.error(e)}})}$(this).parent().find(".manualInput").slideDown()}else $(this).parent().find(".manualInput").slideUp()}))}},filePluginUploadOnSubmit:function(){$(".qq-upload-list, .infoMessageBox").html("").addClass("hide"),$(".translateProgress").removeClass("hide")},filePluginUploadOnComplete:function(e,t,n){if(n.success){$widget.settings._landingView&&($(".translateContainerRight",$widget.settings.container).removeClass("hide"),$(".translateContainerLeft, .translateContainerHeader",$widget.settings.container).removeClass("intro")),$(".transFileMeta").html($(".qq-upload-success").html()),$(".docUploadNewDoc").removeClass("hide"),$(".translateButton").removeClass("hide"),$widget.enableSystemChange(),$("#sendEmail, #sendEmailLabel").removeClass("hide"),$("#sendEmail").removeAttr("disabled");var i=n.filename,a=n.wordcount;if($(".qq-upload-wordcount").html(a),$("#docUploadFile").addClass("hide"),$(".translateProgress").addClass("hide"),$(".uploadedDocumentName").text($(".qq-upload-file:first").text()).removeClass("hide"),0==$("#hidTranslRealFilename").length?$(".docTranslateContent").after($("<input>",{type:"hidden",id:"hidTranslRealFilename",value:i})):$("#hidTranslRealFilename").val(i),$("#docSourcePreview").removeClass("hide"),$("#docSourcePreview").html(n.preview),$("#docSourcePreview").toggleClass("bigIcon",0<$(".no-preview",$("#docSourcePreview")).length),$widget.settings._onFileUpload&&"function"==typeof $widget.settings._onFileUpload&&$widget.settings._onFileUpload(i,a),0!==$widget.settings._docMaxWordCount&&$widget.settings._docMaxWordCount<parseInt(a)){var s=uiResources[$widget.settings._language].docUploadMsgWordcnt.replace("{wordCount}",a);$(".qq-upload-wordcount").addClass("warning"),$(".infoMessageBox").html(s).removeClass("hide"),$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("FT_ERR_WORDCOUNT",s)}else $(".qq-upload-wordcount").removeClass("warning"),$(".qq-upload-warn-msg").remove()}else if(n.error||jQuery.isEmptyObject(n)){s=uiResources[$widget.settings._language].docUploadFailed;$(".translateProgress").addClass("hide"),$(".infoMessageBox").html(s).show(),$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("FT_ERR_UPLOAD",s)}},filePluginTranslate:function(){$widget.disableSystemChange(),$(".translateButton").addClass("hide"),$widget.settings._advancedOptions&&($(".advancedOptions").addClass("hide"),$(".buttonAdvancedOptions").addClass("hide"),$(".buttonAdvancedOptions .btnText").text($(".buttonAdvancedOptions .btnText").text().replace("▴","▾"))),$(".buttonCancelDoc").removeClass("hide"),$(".docTempTarget").addClass("hide"),$(".translateContainerRight").addClass("docProgress"),$(".translateResult").removeClass("hide"),$(".translateResult").addClass("bigIcon"),$widget.settings._onDocTranslationStart&&"function"==typeof $widget.settings._onDocTranslationStart&&$widget.settings._onDocTranslationStart(),$("#hidStopTranslation").val("false"),$(".translateResult").html('<div id="translProgress" class="starting">   <div class="progressImage"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div><div id="transItem" class="transItem">\t    <span class="percent">'+uiResources[$widget.settings._language].docStarting+"</span>   </div></div>");var e={systemid:$widget.activeSystemId,appid:$widget.settings._appId,filename:$(".transFileMeta .qq-upload-file").text(),tmpname:$("#hidTranslRealFilename").val(),wordlimit:$widget.settings._docMaxWordCount,segmentlimit:$widget.settings._docMaxSegmentCount,termcorpusid:$widget.termCorpusId&&"Ready"==$widget.getSelectedTermCorpusStatus()?$widget.termCorpusId:null};$widget.settings._advancedOptions&&(e.sendEmail=0<$("#sendEmail:checked").length,0<$("#cbAddSourcePrefix:checked").length&&(e.sourcePrefix=$("#inputSourcePrefix").val()),0<$("#cbAddTargetPrefix:checked").length&&(e.targetPrefix=$("#inputTargetPrefix").val()),e.doNotReplaceExistingTranslation=0<$("#cbReplaceTarget:checked").length,0<$("#cbLangSpec:checked").length&&(e.sourceLanguage=$(".tmxSourceLang option:selected").val(),e.targetLanguage=$(".tmxTargetLang option:selected").val())),$.ajax({type:"POST",dataType:"json",url:$widget.settings._translateUrl,headers:$widget.getAuthHeaders(),data:e,success:function(e){e.success?($widget.settings._warnWhenRunningAway&&$(window).bind("beforeunload.warn",function(){return uiResources[$widget.settings._language].docTranslInProgress}),0==$("#hidUploadTempId").length?$(".docTranslateContent").after($("<input>",{type:"hidden",id:"hidUploadTempId",value:e.docid})):$("#hidUploadTempId").val(e.docid),$widget.filePluginTranslateProgress(e.docid),void 0!==$widget.checkSystemStatus&&$widget.checkSystemStatus()):($widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("",uiResources[$widget.settings._language].E_FAILED_IN_TRANSLATION),$widget.settings._onDocTranslationStop&&"function"==typeof $widget.settings._onDocTranslationStop&&$widget.settings._onDocTranslationStop(),$(".infoMessageBox").html(uiResources[$widget.settings._language].E_FAILED_IN_TRANSLATION).removeClass("hide"),$(".buttonDelDoc").addClass("hide"),$(".docUploadNewDoc").removeClass("hide"),$(".translateContainerRight").removeClass("docProgress"),$("#translProgress").html(""),$widget.settings._advancedOptions&&$(".buttonAdvancedOptions").removeClass("hide"),"undefined"!=typeof console&&console.log(e))},error:function(e,t,n){if(401==e.status&&$widget.settings._loginUrl&&(window.location=$widget.settings._loginUrl),403==e.status)var i=uiResources[$widget.settings._language].E_UNAUTHORIZED;else i=uiResources[$widget.settings._language].E_FAILED_IN_TRANSLATION;$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("",i),$widget.settings._onDocTranslationStop&&"function"==typeof $widget.settings._onDocTranslationStop&&$widget.settings._onDocTranslationStop(),$(".infoMessageBox").html(i).removeClass("hide"),$(".buttonDelDoc").addClass("hide"),$(".docUploadNewDoc").removeClass("hide"),$(".translateContainerRight").removeClass("docProgress"),$("#translProgress").html(""),$widget.settings._advancedOptions&&$(".buttonAdvancedOptions").removeClass("hide"),"undefined"!=typeof console&&console.error(n)},complete:function(){$("#translProgress").removeClass("starting"),$("#translProgress #transItem .percent").text($widget.settings._startPercent+"%")}})},filePluginEvents:function(){$(".docUploadNewDoc",$widget.settings.container).on("click",function(){$widget.filePluginUploadNew()}),$(".buttonDelDoc",$widget.settings.container).on("click",function(){$widget.filePluginDeleteFile()}),$(".buttonCancelDoc",$widget.settings.container).on("click",function(){$widget.settings._warnWhenRunningAway&&$(window).unbind("beforeunload.warn"),$widget.filePluginDeleteFile()}),$(".translateButton",$widget.settings.container).on("click",function(){if("true"===$(this).attr("data-disabled"))return!1;$widget.filePluginTranslate()}),$widget.settings._advancedOptions&&$(".buttonAdvancedOptions",$widget.settings.container).on("click",function(){$(".advancedOptions").toggleClass("hide"),0<$(".buttonAdvancedOptions .btnText").text().indexOf("▾")?$(".buttonAdvancedOptions .btnText").text($(".buttonAdvancedOptions .btnText").text().replace("▾","▴")):$(".buttonAdvancedOptions .btnText").text($(".buttonAdvancedOptions .btnText").text().replace("▴","▾"))})},filePluginUploadNew:function(){var e=$("#hidUploadTempId").val();void 0===e&&(e=""),this.filePluginDeleteFileOnServer(),$(".docUploadNewDoc").addClass("hide"),$(".buttonDownDoc").removeAttr("href").addClass("hide"),$("#hidTranslRealFilename").remove(),$("#hidTranslTempFilename").remove(),$("#hidUploadTempId").remove(),$(".uploadedDocumentName").text("").addClass("hide"),$(".qq-upload-list").html(""),$(".transFileMeta").html(""),$(".infoMessageBox").html("").addClass("hide"),$("#hidStopTranslation").val("false"),$("#docUploadFile").removeClass("hide"),$("#docSourcePreview").empty(),$("#docSourcePreview").addClass("hide"),$(".translateTextTempSourceContainer style").remove(),$(".translateResult").empty(),$widget.settings._advancedOptions&&$(".buttonAdvancedOptions").removeClass("hide"),$widget.filePluginSetTempTextResult(),$widget.enableSystemChange(),$(".translateButton").addClass("hide"),$widget.settings._onDocTranslationCancel&&"function"==typeof $widget.settings._onDocTranslationCancel&&$widget.settings._onDocTranslationCancel(e),$widget.settings._landingView&&$widget.filePluginShowIntro()},filePluginShowIntro:function(){$(".translateContainerRight",$widget.settings.container).addClass("hide"),$(".translateContainerLeft, .translateContainerHeader",$widget.settings.container).addClass("intro")},filePluginDeleteFile:function(){$(".docUploadNewDoc").click(),$(".docTranslateContent").after($("<input>",{type:"hidden",id:"hidStopTranslation",value:!0})),$(".buttonDelDoc, .buttonCancelDoc").addClass("hide"),$(".translateContainerRight").removeClass("docProgress"),this.filePluginSetTempTextResult(),this.filePluginDeleteFileOnServer()},filePluginDeleteFileOnServer:function(){var e=$("#hidUploadTempId").val();void 0===e&&(e=""),0<e.length&&$.ajax({type:"POST",dataType:"json",url:$widget.settings._deleteUrl,headers:$widget.getAuthHeaders(),data:{docid:e},success:function(e){e.success||"undefined"!=typeof console&&console.error("error while deleting: "+e.error),$widget.enableSystemChange()},error:function(e){"undefined"!=typeof console&&console.error("error while deleting: "+e.error),401==e.status&&$widget.settings._loginUrl&&(window.location=$widget.settings._loginUrl),$widget.enableSystemChange()}})},filePluginTranslateProgress:function(l){"true"!==$("#hidStopTranslation").val()&&($(".translateContainerRight").hasClass("docProgress")||$(".translateContainerRight").addClass("docProgress"),$.ajax({type:"POST",dataType:"json",url:$widget.settings._checkStatusUrl,headers:$widget.getAuthHeaders(),data:{docId:l},success:function(e){var t=e.completed<$widget.settings._startPercent?$widget.settings._startPercent:e.completed;if($("#translProgress").removeClass("starting"),$("#translProgress .percent").text(t+"%"),"error"===e.status){var n=uiResources[$widget.settings._language].E_DEFAULT_ERROR;uiResources[$widget.settings._language][e.error]&&(n=uiResources[$widget.settings._language][e.error]),$(".docUploadNewDoc").removeClass("hide"),$(".buttonCancelDoc").addClass("hide"),$(".infoMessageBox").html(n).removeClass("hide"),$("#translProgress").html(""),$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("",n),$widget.settings._onDocTranslationStop&&"function"==typeof $widget.settings._onDocTranslationStop&&$widget.settings._onDocTranslationStop()}if(e.reload)$(".buttonCancelDoc").removeClass("hide"),$widget.settings._onDocTranslationProgress&&"function"==typeof $widget.settings._onDocTranslationProgress&&$widget.settings._onDocTranslationProgress(t),setTimeout(function(){$widget.filePluginTranslateProgress(l)},5e3);else if("completed"===e.status){if(e.warnings){var i=e.warnings.split(","),a=[];for(counter=0;counter<i.length;counter++)uiResources[$widget.settings._language][i[counter]]?a.push(uiResources[$widget.settings._language][i[counter]]):a.push(i[counter]);$(".infoMessageBox").html(a.join("<br /> ")).removeClass("hide")}var s=$widget.settings._downloadUrl+"?docid="+encodeURIComponent(l)+"&filename="+encodeURIComponent(e.filename),o=$widget.getAuthHeaders();o&&(o["client-id"]&&(s+="&clientId="+encodeURIComponent(o["client-id"])),o["website-auth-cookie"]&&(s+="&websiteAuthCookie="+encodeURIComponent(o["website-auth-cookie"]))),$(".buttonDownDoc").attr("href",s).removeClass("hide"),$(".buttonDelDoc").addClass("hide"),$(".buttonCancelDoc").addClass("hide"),$("#hidTranslRealFilename").remove(),$("#hidTranslTempFilename").remove(),$(".docUploadNewDoc").removeClass("hide"),$widget.settings._warnWhenRunningAway&&$(window).unbind("beforeunload.warn"),$widget.settings._onDocTranslationFinished&&"function"==typeof $widget.settings._onDocTranslationFinished&&$widget.settings._onDocTranslationFinished(l);var r=e.filename;$.ajax({type:"POST",dataType:"json",url:$widget.settings._previewUrl,headers:$widget.getAuthHeaders(),data:{filename:r,docid:l},success:function(e){e.success?e.preview?($(".translateResult").html(e.preview),$(".translateResult").removeClass("bigIcon")):($(".translateResult").html('<a href="'+s+'" download><div class="translated-no-preview"></div><span>'+r+"</span></a>"),$(".translateResult").addClass("bigIcon")):$(".infoMessageBox").html(uiResources[$widget.settings._language].docPreviewError).removeClass("hide"),$(".translateContainerRight").removeClass("docProgress"),$("#translProgress").html("")},error:function(e){401==e.status&&$widget.settings._loginUrl&&(window.location=$widget.settings._loginUrl),$(".infoMessageBox").html(uiResources[$widget.settings._language].docPreviewError).removeClass("hide"),$(".translateContainerRight").removeClass("docProgress"),$("#translProgress").html("")}})}},error:function(e){if($widget.settings._warnWhenRunningAway&&$(window).unbind("beforeunload.warn"),401==e.status&&$widget.settings._loginUrl)window.location=$widget.settings._loginUrl;else{var t=uiResources[$widget.settings._language].docTranslFailed;$(".docUploadNewDoc").removeClass("hide"),$(".infoMessageBox").html(t).removeClass("hide"),$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("FT_ERR_DOCSTATUS",t)}}}))},filePluginGetTranslationStatus:function(){if(0===$(".qq-upload-file").length)return"blank";if($(".translateContainerRight").hasClass("docProgress")){var e=$(".buttonDownDoc").attr("href");return void 0!==e&&0===e.length?"translating":"translated"}return"uploaded"},filePluginSetTempTextResult:function(){var e=uiResources[$widget.settings._language].docTempTarget;if("domain"===$widget.settings._systemSelectType){var t=$(".translateDomain option:selected",$widget.settings.container).text(),n=uiResources[$widget.settings._language]["DOMAIN_"+t.toUpperCase()];void 0!==n&&(e=n+"<p>"+e+"</p>")}$(".docTempTarget",$widget.settings.container).html(e).removeClass("hide"),$(".translateResult",$widget.settings.container).addClass("hide")}}),$.extend(Tilde.TranslatorWidgetDefaultOptions,{_translationUrl:"https://letsmt.eu/ws/Service.svc/json/Translate",_updateTranslationUrl:"https://letsmt.eu/ws/Service.svc/json/UpdateTranslation",_dictionaryUrl:"https://yoursite/api/ajax/GetDictionaryEntry",_ttsUrl:"https://yoursite/TTS/GetSound",_textSource:".translateTextSource",_textResult:".translateTextResult",_landingView:!1,_enableParallelHover:!0,_highlightTranslated:!0,_highlightTranslatedTimeout:1500,_focusAfterClear:!0,_focusAfterTranslate:!0,_focusAfterLoad:!1,_translateAll:!1,_translationLimit:-1,_useDictionary:!1,_useSpeakers:!1,_onTranslationStarted:null,_onTranslationFinished:null,_onUrlEntered:null,_onTextInput:null,_onScrollBarWidthChanged:null,_text:null}),$.extend(Tilde.TranslatorWidget.prototype,{textTranslator:null,translatedCnt:0,hoveredElements:[],textPluginInit:function(){0!==$(".translateTextSource",$widget.settings.container).length&&($widget.settings._focusAfterLoad&&$($widget.settings._textSource,$widget.settings.container).focus(),$widget.textPluginEvents(),$widget.settings._landingView&&($(".fakeCursor",$widget.settings.container).removeClass("hide"),$(".translateContainerRight",$widget.settings.container).addClass("hide"),$(".translateContainerLeft, .translateContainerHeader",$widget.settings.container).addClass("intro")),$widget.settings._enableParallelHover&&$widget.textPluginInitParallelHover(),$widget.textTranslator=new Tilde.TextTranslator($.extend($widget.settings)),$widget.settings._text?($($widget.settings._textSource,$widget.settings.container).text($widget.settings._text),$($widget.settings._textSource,$widget.settings.container).trigger("paste")):$widget.textPluginSetTempText(),$widget.onSystemChangedHandlers.push(function(){$(".translateTextSource",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().SourceLanguage.Code),$(".backGroundSource",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().SourceLanguage.Code),$(".translateTextResult",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().TargetLanguage.Code)}),$widget.onSystemChangedHandlers.push($widget.textPluginTranslate),void 0!==$widget.termCorpusChangedHandlers&&$widget.termCorpusChangedHandlers.push($widget.textPluginTranslate),$(".editButton",$widget.settings.container).click(function(){$.each($("input,select,a,textarea"),function(e,t){jQueryFocusableElement=$(t),jQueryFocusableElement.data("old-tab-index",jQueryFocusableElement.attr("tabindex")),jQueryFocusableElement.attr("tabindex","-1")}),0==$(".translateTextResult .selected",$widget.settings.container).length&&($(".translateTextResult p .sentence",$widget.settings.container).first().addClass("selected"),$(".backGroundSource div .sentence",$widget.settings.container).first().addClass("selected"));var e=$(".backGroundSource .selected",$widget.settings.container).text(),t=$(".translateTextResult .selected",$widget.settings.container).text();$("body").append($("<div></div>",{id:"translationEditBackground"}));var n=$("<div></div>",{id:"translationEditForm",class:"form"});$("body").append(n),n.append($("<a></a>",{href:"javascript:;",id:"translationEditClose",title:uiResources[$widget.settings._language].translationEditClose})),n.append($("<label></label>").text(uiResources[$widget.settings._language].translationEditOriginal)),n.append($("<p>",{id:"translationEditOriginal"}).text(e)),n.append($("<label></label>",{for:"translationEditTranslation"}).text(uiResources[$widget.settings._language].translationEditTranslation)),textarea=$("<textarea></textarea>",{id:"translationEditTranslation",autofocus:"autofocus",maxlength:"5000"}).val(t),n.append(textarea),n.append($("<div></div>",{id:"translationEditDescription"}).text(uiResources[$widget.settings._language].translationEditDescription)),n.append($('<div class="translateProgress progress hide"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'));var i=$("<div></div>",{id:"translationEditButtons"});n.append(i),i.append($("<a></a>",{class:"button",id:"translationEditBack",href:"javascript:;"}).text("◄")),i.append($("<a></a>",{class:"button",id:"translationEditSave",href:"javascript:;"}).text(uiResources[$widget.settings._language].translationEditSave)),i.append($("<a></a>",{class:"button",id:"translationEditForward",href:"javascript:;"}).text("►")),$widget.resizeEditForm(),$(window).on("keydown.translationEditForm",function(e){27==e.which&&$("#translationEditClose").trigger("click")}),$("#translationEditClose").click(function(){$(this).is("[disabled]")?event.preventDefault():($(window).off("keydown.translatioEditForm"),$("#translationEditForm").remove(),$("#translationEditBackground").remove(),$.each($("input,select,a,textarea"),function(e,t){jQueryFocusableElement=$(t),void 0===jQueryFocusableElement.data("old-tab-index")?jQueryFocusableElement.removeAttr("tabindex"):jQueryFocusableElement.attr("tabindex",jQueryFocusableElement.data("old-tab-index"))}))}),$("#translationEditBack").click(function(){for(var e=$(".backGroundSource .sentence",$widget.settings.container),t=$(".translateTextResult .sentence",$widget.settings.container),n=$(".translateTextResult .sentence.selected",$widget.settings.container),i=-1,a=0;a<t.length;a++)if(t[a]==n[0]){i=a;break}$(e[i]).removeClass("selected"),$(t[i]).removeClass("selected");var s=0<i?i-1:i;$(e[s]).addClass("selected"),$(t[s]).addClass("selected"),$("#translationEditOriginal").text($(e[s]).text()),$("#translationEditTranslation").val($(t[s]).text()),$widget.resizeEditForm()}),$("#translationEditForward").click(function(){for(var e=$(".backGroundSource .sentence",$widget.settings.container),t=$(".translateTextResult .sentence",$widget.settings.container),n=$(".translateTextResult .sentence.selected",$widget.settings.container),i=-1,a=0;a<t.length;a++)if(t[a]==n[0]){i=a;break}$(e[i]).removeClass("selected"),$(t[i]).removeClass("selected");var s=i<t.length-1?i+1:i;$(e[s]).addClass("selected"),$(t[s]).addClass("selected"),$("#translationEditOriginal").text($(e[s]).text()),$("#translationEditTranslation").val($(t[s]).text()),$widget.resizeEditForm()}),$("#translationEditSave").click(function(){$("#translationEditButtons").addClass("hide"),$("#translationEditForm .translateProgress").removeClass("hide"),$.ajax({url:$widget.settings._updateTranslationUrl,headers:$widget.getAuthHeaders(),method:"POST",dataType:"text",type:"GET",contentType:"application/json",data:JSON.stringify({appID:$widget.settings._appId,systemID:$widget.activeSystemId,text:$("#translationEditOriginal").text(),translation:$("#translationEditTranslation").val(),options:"suggestion"}),success:function(){$(".translateTextResult .sentence.selected",$widget.settings.container).text($("#translationEditTranslation").val()),$("#translationEditClose").trigger("click")},error:function(e){$("#translationEditButtons").removeClass("hide"),$("#translationEditForm .translateProgress").addClass("hide"),"undefined"!=typeof console&&console.error(e)}})}),$("#translationEditTranslation").focus()}),void 0!==$widget.onSystemWokenUpHandlers&&$widget.onSystemWokenUpHandlers.push(function(){$widget.textTranslator.doTranslation({translateAll:!0})}))},resizeEditForm:function(){var e=$("#translationEditForm"),t=$("#translationEditForm textarea");t.height(0);var n=t[0].scrollHeight;0<navigator.userAgent.indexOf("Trident")||0<navigator.userAgent.indexOf("MSIE")||0<navigator.userAgent.indexOf("Chrome")?n+=t.outerHeight()-t.innerHeight():n+=t.outerHeight()-t.height(),t.css("height",n+"px");var i=0;$.each(e.children(),function(e,t){$(t).hasClass("hide")||"translationEditClose"==$(t).attr("id")||(i+=$(t).outerHeight(!0))}),e.css("height",i+"px"),e.css("top","calc(50% - "+i/2+"px)")},textPluginUnload:function(){$widget.textTranslator&&$widget.textTranslator.clearTranslation()},textPluginEvents:function(){var e="click";-1<navigator.userAgent.indexOf("Android")&&-1<navigator.userAgent.indexOf("Version/")&&(e+=" touchstart"),$(".translateButton",$widget.settings.container).on("click",function(){if("true"===$(this).attr("data-disabled"))return!1;$widget.textPluginTranslate()}),$(".translateResultClear").on("click",function(){$widget.textPluginResultClear()}),$(".sourceSpeak").on("click",function(){$widget.textPluginSpeak("sourceAudio",$(".translateTextSource",$widget.settings.container).val())}),$(".targetSpeak").on("click",function(){$widget.textPluginSpeak("targetAudio",$(".translateTextResult",$widget.settings.container).text())}),$(".translateTextSourceContainer",$widget.settings.container).bind(e,function(){if("true"===$(".translateTextTempSourceContainer").attr("data-disabled"))return!1;$($widget.settings._textSource,$widget.settings.container).focus()}),$($widget.settings._textSource,$widget.settings.container).bind("focusout",$.proxy(function(){""==$($widget.settings._textSource,$widget.settings.container).val()&&$widget.textPluginSetTempText()},this)),$widget.settings._onTranslationStarted=function(){$widget.textPluginTranslationStarted()},$widget.settings._onTranslationFinished=function(){$widget.textPluginTranslationFinished()},$widget.settings._enableParallelHover&&$(".translateTextSource").on("mousemove mouseleave",function(s){var o=[],r=null;$.each($(".backGroundSource").find(".classMTsource"),function(e,t){for(var n=t.getClientRects(),i=0;i<n.length;i++){var a=n[i];if(s.clientX>=a.left&&s.clientY>=a.top&&s.clientX<=a.right&&s.clientY<=a.bottom)return r=t,!1}}),null!=r&&$.each($(r).find("span"),function(e,t){for(var n=t.getClientRects(),i=0;i<n.length;i++){var a=n[i];s.clientX>=a.left&&s.clientY>=a.top&&s.clientX<=a.right&&s.clientY<=a.bottom&&o.push(t)}});for(var e=0;e<$widget.hoveredElements.length;e++){var t=$widget.hoveredElements[e];-1==$.inArray(t,o)&&$(t).trigger("mouseleave")}for(var n=0;n<o.length;n++){var i=o[n];-1==$.inArray(i,$widget.hoveredElements)&&$(i).trigger("mouseenter")}$widget.hoveredElements=o})},textPluginTranslationStarted:function(){$($widget.settings._textResult,$widget.settings.container).removeClass("translateTextTemp"),$(".translateProgress",this.settings.container).removeClass("hide")},textPluginTranslationFinished:function(){$(".translateProgress",$widget.settings.container).addClass("hide"),0!==$($widget.settings._textSource).length&&0==$($widget.settings._textSource).val().length&&$widget.textPluginSetTempTextResult()},textPluginResultClear:function(){$widget.translatedCnt=0,$widget.textPluginSetTempText(),$widget.settings._focusAfterClear&&$($widget.settings._textSource,$widget.settings.container).focus(),$(".translateResultClear").addClass("hide")},textPluginInitParallelHover:function(){var e=/.*Windows Phone (\d.\d).*/.exec(navigator.userAgent);e&&e.length&&1<e.length&&e[1]<="8.0"||($(".translateTextSource").on("scroll",function(){var e=$(".backGroundSource")[0],t=$(".translateTextSource")[0];if(e.scrollTop!=t.scrollTop&&(e.scrollTop=t.scrollTop),!window.Tilde.targetScrollingTime||200<(new Date).getTime()-window.Tilde.targetScrollingTime){var n=$(".translateTextResult")[0];n.scrollTop!=t.scrollTop&&(window.Tilde.sourceScrollingTime=(new Date).getTime(),n.scrollTop=t.scrollTop)}}),$(".translateTextResult").on("scroll",function(){var e=$(".translateTextSource");-1<navigator.userAgent.indexOf("Android")&&-1<navigator.userAgent.indexOf("Version/")&&null!=document.activeElement&&document.activeElement!=document&&document.activeElement!=document.body||(!window.Tilde.sourceScrollingTime||200<(new Date).getTime()-window.Tilde.sourceScrollingTime)&&e[0].scrollTop!=this.scrollTop&&(window.Tilde.targetScrollingTime=(new Date).getTime(),e[0].scrollTop=this.scrollTop)}),-1<navigator.userAgent.indexOf("Android")&&-1<navigator.userAgent.indexOf("Version/")&&$(".translateContainerRight").bind("touchstart",function(){$(":focus").blur()}),$(".translateTextResult").on("mouseenter mouseleave",".mt-translation",function(e){$(".hoverStyleSource").removeClass("hoverStyleSource"),$(".mt-translation.hover").removeClass("hover"),"mouseenter"===e.type&&($(this).addClass("hover"),$('.classMTsource[cursorId="'+$(this).attr("cursorId")+'"]').addClass("hoverStyleSource"))}))},textPluginTranslate:function(){$widget.settings._onUrlEntered&&$widget.textTranslator.checkTextForUrl(),$widget.textTranslator&&$widget.textTranslator.doTranslation({translateAll:!0})},textPluginSetTempText:function(){$widget.textTranslator&&$widget.textTranslator.clearTranslation(),$widget.textPluginSetTempTextResult(),$widget.textPluginSetTempTextSource(),$($widget.settings._textResult,$widget.settings.container).removeClass("transLimit"),$(".sourceLang, .targetLang",$widget.settings.container).text(""),$(".translateResultClear",$widget.settings.container).addClass("hide"),$(".translateProgress",$widget.settings.container).addClass("hide"),$widget.settings._useSpeakers&&$(".sourceSpeak, .targetSpeak",$widget.settings.container).addClass("hide")},textPluginSetTempTextSource:function(){$($widget.settings._textSource,$widget.settings.container).val(""),$widget.settings._landingView&&$(".intro .fakeCursor",$widget.settings.container).removeClass("hide"),$(".translateTextTempSourceContainer",$widget.settings.container).removeClass("hide"),$(".translateTextTempSourceContainer",$widget.settings.container).html(uiResources[$widget.settings._language].sourceTextTooltip),$(".translateTextTempSourceContainer",$widget.settings.container).unbind("focus"),$(".translateTextTempSourceContainer",$widget.settings.container).bind("focus",function(){$(".translateTextTempSourceContainer",$widget.settings.container).addClass("hide")}),$($widget.settings._textSource,$widget.settings.container).unbind("focus"),$($widget.settings._textSource,$widget.settings.container).bind("focus",function(){$widget.settings._landingView&&$(".intro .fakeCursor",$widget.settings.container).addClass("hide"),$(".translateTextTempSourceContainer",$widget.settings.container).addClass("hide")})},textPluginSetTempTextResult:function(){$($widget.settings._textResult,$widget.settings.container).addClass("translateTextTemp");var e=uiResources[$widget.settings._language].targetTextTooltip;if("domain"===$widget.settings._systemSelectType){var t=$(".translateDomain option:selected",$widget.settings.container).text(),n=uiResources[$widget.settings._language]["DOMAIN_"+t.toUpperCase()];void 0!==n&&(e=n+"<p>"+e+"</p>")}$($widget.settings._textResult,$widget.settings.container).html(e).removeClass("noNetwork")},textPluginSpeak:function(e,t){$('audio[id="'+e+'"] source').attr("src",$widget.settings._ttsUrl+"?text="+t.substring(0,144));var n=document.getElementById(e);n.paused?(n.load(),n.play()):n.pause()}}),Tilde.TextTranslator=function(e){this.init(e)},Tilde.TextTranslator.prototype={options:null,pta:null,timeoutParagraph:null,timeoutText:null,translationInProgress:!1,init:function(e){void 0===e&&alert('no options specified for "Tilde.TextTranslator"'),this.options=e;var t=new Tilde.ProgressiveTextAreaOptions;if(t.directCompare=!1,t.textAreaSelector=e._textSource,t.onNewParagraph=$.proxy(this.onNewParagraph,this),t.onTextChanged=$.proxy(this.onTextChanged,this),t.onTextInput=$.proxy(this.onTextInput,this),this.options._focusAfterLoad&&(t.onTextChangedWithoutDelay=$.proxy(function(){0<$(this.options._textSource).val().length&&$(".translateTextTempSourceContainer",this.options.container).addClass("hide")},this)),this.options._onScrollBarWidthChanged){$(window).resize(this.checkScrollbarWidth);var n=this;if(t.onTextChangedWithoutDelay){var i=t.onTextChangedWithoutDelay;t.onTextChangedWithoutDelay=$.proxy(function(){i(),window.setTimeout(n.checkScrollbarWidth,0)},this)}}t.onBackgroundHover=this.options.onBackgroundHover,this.pta=new Tilde.ProgressiveTextArea(t)},setSystem:function(e){this.options.translatorSystem=e},setTargetText:function(e){$(this.options._textResult).html(e)},clearTranslation:function(){this.setSourceText("")},onNewParagraph:function(){void 0!==this.timeoutParagraph&&null!=this.timeoutParagraph&&(clearTimeout(this.timeoutParagraph),this.timeoutParagraph=null),void 0!==this.timeoutText&&null!=this.timeoutText&&(clearTimeout(this.timeoutText),this.timeoutText=null),$.proxy(this.onNewParagraphWork,this)()},onTextChanged:function(){void 0!==this.timeoutText&&null!=this.timeoutText&&(clearTimeout(this.timeoutText),this.timeoutText=null),this.timeoutText=setTimeout($.proxy(this.onNewParagraphWork,this),250)},onTextInput:function(e){this.options._onTextInput&&this.options._onTextInput(e)},onBackgroundHover:function(e,t){for(var n=this.obj,i=void 0===e?$(".backGroundSource").html(""):null;;){if(null==n){$(".backGroundSource").append($("<br/>"));break}if(void 0===e||n.id==e){var a=n.string,s=null;if(void 0===e?(s=$("<div></div>",{id:"source-mt-"+n.id,cursorId:n.id,class:"classMTsource"+(n.latest?" latestHighlight":"")})).appendTo(i):(0==(s=$("#source-mt-"+e)).length&&(s=$("<div></div>",{id:"source-mt-"+n.id,cursorId:n.id,class:"classMTsource"+(n.latest?" latestHighlight":"")}),t?s.insertAfter($("#source-mt-"+t)):s.appendTo($(".backGroundSource"))),s.empty()),0==a.replace(/\s/g,"").length)s.html("<br />");else{var o=n.translation;$widget.settings._enableParallelHover&&o&&o.originalSentenceRanges&&o.sourceWordRanges&&o.phraseAlignment&&o.confidentWordAlignment?$widget.textTranslator.drawSentencePhraseWordTags(s,a,n.id,o.sourceWordRanges,o.originalSentenceRanges,o.phraseAlignment,o.confidentWordAlignment,0):s.text(a)}}n=n.child}$(".translateTextSource").trigger("scroll")},clearAlltimeouts:function(){void 0!==this.timeoutText&&null!=this.timeoutText&&(clearTimeout(this.timeoutText),this.timeoutText=null),void 0!==this.timeoutParagraph&&null!=this.timeoutParagraph&&(clearTimeout(this.timeoutParagraph),this.timeoutParagraph=null)},onNewParagraphWork:function(){for(var e=this.pta.obj;;)if(e.changed)e.translation=e.string,e.changed=!1,e.translated=!1,e.translating&&(e.retranslate=!0);else if(null==(e=e.child))break;this.redrawResult(),$widget.settings._onUrlEntered&&$widget.textTranslator.checkTextForUrl(),this.doTranslation({translateAll:$widget.settings._translateAll})},previousScrollBarWidth:0,checkScrollbarWidth:function(){var e=$($widget.settings._textSource)[0];if(void 0!==e){var t=e.offsetWidth-e.clientWidth;this.previousScrollBarWidth!=t&&(window.setTimeout(function(){$(".translateTextSource").trigger("scroll")},50),$widget.settings._onScrollBarWidthChanged(t),this.previousScrollBarWidth=t)}},redrawResult:function(){var e=this.pta.obj;for($(this.options._textResult).html(""),$(".backGroundSource .selected").removeClass("selected");;){if(null==e)break;var t=e.translation;translationData=null,void 0!==e.translation.translation&&(t=e.translation.translation,translationData=e.translation);var n=e.translated||0==t.replace(/\s/g,"").length,i=0==t.replace(/\s/g,"").length,a=$("<p></p>",{cursorId:e.id,class:"mt-translation","aria-haspopup":"true",id:"mt-result-"+e.id});if(i?a.append($("<br />")):$widget.settings._enableParallelHover&&translationData&&translationData.translationSentenceRanges&&translationData.targetWordRanges&&translationData.phraseAlignment&&translationData.confidentWordAlignment?this.drawSentencePhraseWordTags(a,t,e.id,translationData.targetWordRanges,translationData.translationSentenceRanges,translationData.phraseAlignment,translationData.confidentWordAlignment,1):a.text(t),$(this.options._textResult).append(a),null!=e.scroll&&this.options.scrollToTranslated&&($(this.options._textResult)[0].scrollTop=a[0].offsetTop-$(this.options._textResult).height()/2,e.scroll=null),null!=e.latest&&this.options._highlightTranslated){$('.mt-translation[cursorId="'+e.id+'"]').addClass("latestHighlight"),$('.classMTsource[cursorId="'+e.id+'"]').addClass("latestHighlight");var s=e.id;setTimeout($.proxy(function(){this.latest=null,$('.mt-translation[cursorId="'+s+'"]').removeClass("latestHighlight"),$('.classMTsource[cursorId="'+s+'"]').removeClass("latestHighlight")},e),this.options._highlightTranslatedTimeout)}n?a.removeAttr("translationProgress"):a.attr("translationProgress","true"),e=e.child}this.options._onScrollBarWidthChanged&&this.checkScrollbarWidth()},highlightMouseEnter:function(e){for(var t=$(this).attr("class").split(" "),n=[],i=[],a=1;a<t.length;a++)t[a]&&"hover"!=t[a]&&"highlight-sibling"!=t[a]&&0==!t[a].indexOf("sibling")&&n.push("."+t[a]),t[a]&&0==t[a].indexOf("sibling")&&i.push("."+t[a].replace("sibling","word"));0<n.length&&$(n.join(", ")).addClass("hover"),0<i.length&&$(i.join(", "),$(this).parent().parent()).addClass("highlight-sibling")},highlightMouseLeave:function(e){for(var t=$(this).attr("class").split(" "),n=[],i=[],a=1;a<t.length;a++)t[a]&&"hover"!=t[a]&&"highlight-sibling"!=t[a]&&0==!t[a].indexOf("sibling")&&n.push("."+t[a]),t[a]&&0==t[a].indexOf("sibling")&&i.push("."+t[a].replace("sibling","word"));0<n.length&&$(n.join(", ")).removeClass("hover"),0<i.length&&$(i.join(", "),$(this).parent().parent()).removeClass("highlight-sibling")},highlightMouseEnterWithoutBubble:function(e){e.stopPropagation(),$.proxy($widget.textTranslator.highlightMouseEnter,this)(e)},highlightMouseLeaveWithoutBubble:function(e){e.stopPropagation(),$.proxy($widget.textTranslator.highlightMouseLeave,this)(e)},translationSentenceClicked:function(e){$(this).hasClass("selected")?($(this).removeClass("selected"),$(".backGroundSource .sentence."+$(this).attr("class").split(" ")[1]).removeClass("selected")):($(".backGroundSource .sentence.selected").removeClass("selected"),$(".translateTextResult .sentence.selected").removeClass("selected"),$(this).addClass("selected"),$(".backGroundSource .sentence."+$(this).attr("class").split(" ")[1]).addClass("selected"))},drawSentencePhraseWordTags:function(e,t,n,i,a,s,o,r){0==r&&(sortedPhraseAlignment=s.slice(),sortedPhraseAlignment.sort(function(e,t){return e[0][0]-t[0][0]}),s=sortedPhraseAlignment),lastRangeEnd=0,phraseIndex=-1,phraseHtml=null,sentenceIndex=-1,sentenceHtml=null;for(var l=0;l<i.length;l++){var d=null;lastRangeEnd<i[l][0]&&(d=document.createTextNode(t.substring(lastRangeEnd,i[l][0]))),lastRangeEnd=i[l][1],0<=phraseIndex&&-1<$.inArray(l,s[phraseIndex][r])?null!==d&&(""==$.trim(d.nodeValue)?phraseHtml.append(d):(sentenceHtml.append(phraseHtml),sentenceHtml.append(d),phraseHtml=$("<span></span>",{class:"phrase phrase-"+n+"-"+s[phraseIndex][0].join("-")+"-"+s[phraseIndex][1].join("-")}),phraseHtml.hover(1==r?this.highlightMouseEnter:this.highlightMouseEnterWithoutBubble,1==r?this.highlightMouseLeave:this.highlightMouseLeaveWithoutBubble))):(phraseHtml&&sentenceHtml.append(phraseHtml),null!==d&&0<=sentenceIndex&&i[l][0]<=a[sentenceIndex][0]+a[sentenceIndex][1]&&sentenceHtml.append(d),phraseIndex+=1,phraseHtml=$("<span></span>",{class:"phrase phrase-"+n+"-"+(0<s.length?s[phraseIndex][0].join("-")+"-"+s[phraseIndex][1].join("-"):"0")}),phraseHtml.hover(1==r?this.highlightMouseEnter:this.highlightMouseEnterWithoutBubble,1==r?this.highlightMouseLeave:this.highlightMouseLeaveWithoutBubble)),(sentenceIndex<0||i[l][0]>a[sentenceIndex][0]+a[sentenceIndex][1])&&(sentenceHtml&&e.append(sentenceHtml),null!==d&&e.append(d),sentenceIndex+=1,sentenceHtml=$("<span></span>",{class:"sentence sentence-"+n+"-"+sentenceIndex}),sentenceHtml.hover(1==r?this.highlightMouseEnter:this.highlightMouseEnterWithoutBubble,1==r?this.highlightMouseLeave:this.highlightMouseLeaveWithoutBubble),1==r&&sentenceHtml.click(this.translationSentenceClicked));for(var g=[],c=0;c<o.length;c++)if(o[c][r]==l){g.push("word-"+n+"-"+o[c][0]+"-"+o[c][1]);for(var u=0;u<o.length;u++)o[u][1==r?0:1]==o[c][1==r?0:1]&&u!=c&&g.push("sibling-"+n+"-"+o[u][0]+"-"+o[u][1])}wordHtml=$("<span></span>",{class:"word "+g.join(" ")}).text(t.substring(i[l][0],i[l][1])),wordHtml.hover(1==r?this.highlightMouseEnter:this.highlightMouseEnterWithoutBubble,1==r?this.highlightMouseLeave:this.highlightMouseLeaveWithoutBubble),phraseHtml.append(wordHtml)}phraseHtml.html()&&sentenceHtml.append(phraseHtml),sentenceHtml.html()&&e.append(sentenceHtml),lastRangeEnd<t.length&&e.append(document.createTextNode(t.substring(lastRangeEnd,t.length)))},makeAllNotTranslated:function(){for(var e=this.pta.obj;;){if(null==e)break;e.translated=!1,e.changed=!1,e.translating=!1,e.retranslate=!1,e.translation=e.string,e=e.child}this.redrawResult()},setSourceText:function(e){this.setTargetText(""),this.pta.setSourceText(e),this.doTranslation({translateAll:!0})},checkTextForUrl:function(){var e=$(this.options._textSource,this.options.container).val(),t=/\b((?:https?:(?:\/{1,3}|[a-z0-9%])|[a-z0-9.\-]+[.](?:com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|Ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\/)(?:[^\s()<>{}\[\]]+|\([^\s()]*?\([^\s()]+\)[^\s()]*?\)|\([^\s]+?\))+(?:\([^\s()]*?\([^\s()]+\)[^\s()]*?\)|\([^\s]+?\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’])|(?:[a-z0-9]+(?:[.\-][a-z0-9]+)*[.](?:com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|Ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\b\/?(?!@)))/gi.exec(e);if(t){var n=t[0];.8<n.length/$.trim(e).length&&$widget.settings._onUrlEntered(n)}},doTranslation:function(e){($(".editButtonContainer").addClass("hide"),$(".backGroundSource .selected").removeClass("selected"),$(".translateTextResult .selected").removeClass("selected"),this.redrawBackground(),cursor=this.pta.obj,!this.translationInProgress&&cursor&&(this.translationInProgress=!0,this.options._onTranslationStarted&&this.options._onTranslationStarted()),void 0===e&&(e={translateAll:!1}),e.translateAll&&this.makeAllNotTranslated(),$widget.settings._useSpeakers)&&($(".sourceSpeak").addClass("hide"),$widget.getActiveSystemObj()&&$(".translateTextSource").val()&&"lv"===$widget.getActiveSystemObj().SourceLanguage.Code&&$(".sourceSpeak").removeClass("hide"));if(null!==$widget.getActiveSystemObj()){var t=$widget.getActiveSystemObj().SourceLanguage.Code,n=$widget.getActiveSystemObj().TargetLanguage.Code,i=t+"-"+n;if($widget.settings._useDictionary&&("en-lv"===i||"lv-en"===i||"lv-ru"===i)&&(text=$(".translateTextSource").val().trim(),0<text.length&&-1==text.search(/\s/g)))return void this.doDictionaryTranslation(t,n,cursor.string,e)}this.doTextTranslation(e)},doDictionaryTranslation:function(e,t,n,i){$.ajax({context:{ref:this},dataType:this.options.jsonType,type:"GET",contentType:"application/json",url:this.options._dictionaryUrl,data:{appid:this.options._appId,srcLng:e,trgLng:t,phrase:n},success:function(e){var t=e.data;""!==t?(t=t.split("SEE_FULL_ENTRY").join(uiResources[$widget.settings._language].seeFullEntry),$(this.ref.options._textResult).html(t),$(".translateResultClear",$widget.settings.container).removeClass("hide"),cursor.translating=!1,cursor.translated=!0,this.ref.checkIfStoppedTranslating()):this.ref.doTextTranslation(i)},error:this.onSuccess})},checkIfStoppedTranslating:function(){for(var e=this.pta.obj,t=!1;e&&(""==e.string||e.translated&&!e.translating||(t=!0),e=e.child),e;);t||(this.translationInProgress=!1,this.options._onTranslationFinished&&this.options._onTranslationFinished(),$(".editButtonContainer").hasClass("hide")&&0<$(".translateTextResult p").length&&0==$(".translateTextResult p[translationprogress=true]").length&&$(".editButtonContainer").removeClass("hide"))},doTextTranslation:function(e){for(var t=null;;){var n=this;if(cursor&&cursor.translating){window.setTimeout(function(){n.doTextTranslation(e)},100);break}if(!cursor||cursor.changed||cursor.translated&&!cursor.retranslate||cursor.translating){if(null==cursor){this.checkIfStoppedTranslating();break}t=cursor.id,cursor=cursor.child}else{if(cursor.translating=!0,cursor.retranslate=!1,"false"===$("#hidOnline").val())return this.options._onTranslationFinished&&this.options._onTranslationFinished(),this.translationInProgress=!1,$($widget.settings._textResult,$widget.settings.container).text(uiResources[$widget.settings._language].noInternet).addClass("noNetwork"),void(cursor.translating=!1);if(-1!==$widget.settings._translationLimit&&$widget.translatedCnt>$widget.settings._translationLimit)return this.options._onTranslationFinished&&this.options._onTranslationFinished(),this.translationInProgress=!1,$($widget.settings._textResult,$widget.settings.container).text(uiResources[$widget.settings._language].transLimit).addClass("transLimit"),void(cursor.translating=!1);if("true"===$(".translateTextTempSourceContainer").attr("data-disabled"))return this.options._onTranslationFinished&&this.options._onTranslationFinished(),this.translationInProgress=!1,void(cursor.translating=!1);if(this.redrawBackground(cursor.id,t),void 0!==cursor.translation.translation||0!=cursor.translation.replace(/\s/g,"").length){$widget.settings._focusAfterTranslate||$($widget.settings._textSource).blur(),$(".translateResultClear",$widget.settings.container).removeClass("hide"),$(".sourceLang",$widget.settings.container).text($(".translateSourceLang option:selected",$widget.settings.container).text()),$(".targetLang",$widget.settings.container).text($(".translateTargetLang option:selected",$widget.settings.container).text()),$($widget.settings._textResult,$widget.settings.container).removeClass("noNetwork"),$widget.settings._landingView&&($(".fakeCursor",$widget.settings.container).addClass("hide"),$(".translateContainerRight",$widget.settings.container).removeClass("hide"),$(".translateContainerLeft, .translateContainerHeader",$widget.settings.container).removeClass("intro")),$.ajax({context:{id:cursor.id,obj:this,onAjaxError:this.options.onAjaxError},dataType:this.options.jsonType,type:"POST",contentType:"application/json",url:this.options._translationUrl,headers:$widget.getAuthHeaders(),data:JSON.stringify({appID:this.options._appId,text:cursor.string,systemID:$widget.activeSystemId,options:"widget=text,alignment,markSentences"+($widget.termCorpusId&&"Ready"==$widget.getSelectedTermCorpusStatus()?",termCorpusId="+$widget.termCorpusId:"")}),success:this.onSuccess,error:this.onSuccess});break}cursor.translated=!0,cursor.translating=!1}}},onSuccess:function(e){401==e.status&&$widget.settings._loginUrl&&(window.location=$widget.settings._loginUrl);var t=this.id,n=null;if(void 0!==this.obj){for(var i=this.obj.pta.obj;;){if(i.id==t&&(i.translating=!1),i.id==t&&!i.changed){if(i.translated=!0,i.latest=!0,i.scroll=!0,void 0===e||null==e||e.status&&"200"!==e.status||!e.translation&&!e.replace){var a=!1;void 0!==e.responseJSON&&void 0!==e.responseJSON.ErrorCode&&"21"===e.responseJSON.ErrorCode&&$widget.showSystemWaking&&"function"==typeof $widget.showSystemWaking&&($widget.showSystemWaking(!1),a=!0),i.translation=a?i.translation:"{{"+i.translation+"}}"}else{if(void 0!==e.countSentences){var s=parseInt(e.countSentences);$widget.translatedCnt+=0<s?s:1}else $widget.translatedCnt++;if(i.translation=e,$widget.settings._useSpeakers)$(".targetSpeak").addClass("hide"),"lv"===$widget.getActiveSystemObj().TargetLanguage.Code&&$(".targetSpeak").removeClass("hide")}this.obj.checkIfStoppedTranslating();break}if(n=i.id,null==(i=i.child))break}this.obj.redrawResult(),this.obj.redrawBackground(t,n),this.obj.doTranslation({translateAll:!1})}},redrawBackground:function(e,t){this.options._enableParallelHover&&$.proxy(this.onBackgroundHover,this.pta)(e,t)}},Tilde.ProgressiveTextAreaElement=function(){},Tilde.ProgressiveTextAreaElement.prototype={start:function(){for(var e=this,t=0;;){if(null==e.parent)break;t+=(e=e.parent).string.length+1}return t},string:"",end:function(){return this.start()+this.string.length},child:null,parent:null,changed:!0,translation:"",translated:!1,translating:!1,retranslate:!1,latest:null,scroll:null,id:0,copy:function(e){var t=new Tilde.ProgressiveTextAreaElement;void 0===e&&(e=this),t.string=e.string,t.id=e.id,t.changed=e.changed,t.translated=e.translated,t.translating=e.translating,t.retranslate=e.retranslate;var n=null;return null!=e.child&&(n=e.child.copy()),null!=n&&((t.child=n).parent=t),t}},Tilde.ProgressiveTextAreaOptions=function(){},Tilde.ProgressiveTextAreaOptions.prototype={textAreaSelector:"",directCompare:!1,onTextInput:null,onTextChanged:null,onNewParagraph:null,onBackgroundHover:null},Tilde.ProgressiveTextArea=function(e){this.init(e)},Tilde.ProgressiveTextArea.prototype={NEW_LINE:"<BREAK>",obj:null,objID:0,oldString:"",options:new Tilde.ProgressiveTextAreaOptions,init:function(e){void 0===e&&alert('no options specified for "Tilde.ProgressiveTextArea"'),this.options=e,this.obj=new Tilde.ProgressiveTextAreaElement,$(this.options.textAreaSelector).off("keypress keyup keydown").keypress($.proxy(this.onKeyStroke,this)).keyup($.proxy(this.onKeyStroke,this)).keydown($.proxy(this.onKeyStroke,this)),$(this.options.textAreaSelector).off("paste copy cut delete input").bind("paste",$.proxy(this.onKeyStroke,this)).bind("copy",$.proxy(this.onKeyStroke,this)).bind("cut",$.proxy(this.onKeyStroke,this)).bind("delete",$.proxy(this.onKeyStroke,this)).bind("input",$.proxy(this.onKeyStroke,this))},getLastChild:function(e){return void 0===e?this.getLastChild(this.obj):null==e.child?e:this.getLastChild(e.child)},getStringBetween:function(e,t,n){for(var i=e.length,a=0,s=n;s<e.length;s++)if("\n"==e.charAt(s)){i=s;break}for(s=n-1;0<=s;s--)if("\n"==e.charAt(s)){a=s+1;break}return{string:e.substring(a,i),start:a,end:i}},getCharChanged:function(e,t){var n="removed",i="";e.length<=t.length&&(n="added",e.length==t.length&&(n="changed",e==t&&(n="equal")));var a=0;switch(n){case"added":for(var s=0;s<t.length;s++)if(e.charAt(s)!=t.charAt(s)){i=t.charAt(s),a=s+(t.length-e.length);break}break;case"removed":case"changed":for(s=0;s<e.length;s++)if(e.charAt(s)!=t.charAt(s)){i=e.charAt(s),a=s;break}}return"\n"==i&&(i=this.NEW_LINE),{type:n,char:i,start:a}},saveState:function(){for(var e=this.obj;;){if(null==e)break;e.changed=!1,e=e.child}},recalculate:function(){this.obj=this.createNewObject()},createNewObject:function(){var e=new Tilde.ProgressiveTextAreaElement,t=e,n="";0!==$(this.options.textAreaSelector).length&&(n=$(this.options.textAreaSelector).val());for(var i=0,a=this.objID;;){if(t.string=this.getStringBetween(n,"\n",i).string,t.id=++a,t.changed=!0,(i=t.end()+1)>n.length)break;t.child=new Tilde.ProgressiveTextAreaElement,t=(t.child.parent=t).child}return this.objID=a,e},setSourceText:function(e){this.objID=0,this.oldString="",$(this.options.textAreaSelector).val(e),this.recalculate(),this.redrawBackground()},kayTimeout:null,onKeyStroke:function(e){if(this.options.onTextChangedWithoutDelay&&this.options.onTextChangedWithoutDelay(),void 0!==this.kayTimeout&&null!=this.kayTimeout&&(clearTimeout(this.kayTimeout),this.kayTimeout=null),void 0===e||13==e.keyCode)return this.onKeyStrokeSub(e),void this.triggerOnTextInput(e);var t=e;this.kayTimeout=setTimeout($.proxy(function(){this.onKeyStrokeSub(t),this.kayTimeout=null,this.triggerOnTextInput(t)},this),2e3)},onKeyStrokeSub:function(e){var t=$(this.options.textAreaSelector).val(),n=Math.abs(t.length-this.oldString.length),i=t==this.oldString,a=$(this.options.textAreaSelector).getSelection(),s=this.getCharChanged(this.oldString,t),o=a.start,r=!1;if(activeSource=this.obj,current=this.getStringBetween(t,"\n",o),0==t.length&&(this.objID=0),!i&&n<2){var l,d,g=t.length;for(t.length>this.oldString.length&&(g=this.oldString.length),l=0;l<g&&t.charAt(l)==this.oldString.charAt(l);l++);for(d=1;d<g-l&&t.charAt(t.length-l)==this.oldString.charAt(this.oldString.length-l);d++);n=Math.abs(d-l)}if(!i&&0==n){var c=0;s=0;do{if(t.charAt(c)!==this.oldString.charAt(c)&&(s++,"\n"!=t.charAt(c)&&"\n"!=this.oldString.charAt(c)||s++,2==s)){r=!0;break}c++}while(c<t.length)}if(this.options.directCompare||1<=Math.abs(n)||r){var u=this.obj,p=this.createNewObject(),h=p;for(h=p;;){for(u=this.obj;;){if(null!=u&&-1!=u.id&&u.string==h.string){h.id=u.id,h.changed=u.changed,h.translated=u.translated,h.translating=u.translating,h.retranslate=u.retranslate,h.translation=u.translation,u.id=-1;break}if(null==(u=u.child)){h.id=++this.objID,h.changed=!0,0;break}}if(null==(h=h.child))break}this.obj=p}else switch(s.type){case"removed":if(s.char==this.NEW_LINE)for(1;;){if(activeSource.end()>o){var m=activeSource.string.length;activeSource=activeSource.parent,activeSource.child=activeSource.child.child,m+=activeSource.string.length,null!=activeSource.child&&(activeSource.child.parent=activeSource),activeSource.string.length==m&&null!=activeSource.parent&&activeSource.string==current.string||(activeSource.translated=!1,activeSource.changed=!0,activeSource.translation="",activeSource.id=++this.objID),activeSource.string=current.string;break}activeSource=activeSource.child}else{if("\n"==t.charAt(o)){for(var f=!1,w=this.getStringBetween(t,"\n",o),v=this.getStringBetween(t,"\n",o+1);;){if(activeSource.start()==w.start){f=!(activeSource.string==w.string);break}activeSource=activeSource.child}f?current=w:(current=v,o++),activeSource=this.obj}else current=this.getStringBetween(t,"\n",o);for(;;){if(activeSource.start()<=o&&(null==activeSource.child||activeSource.end()>=o)){activeSource.string=current.string,activeSource.changed=!0;break}activeSource=activeSource.child}}break;case"changed":case"added":if(s.char==this.NEW_LINE)if(t.length-1<=o)for(;;){if(null==activeSource.child){var _=activeSource;activeSource.child=new Tilde.ProgressiveTextAreaElement,activeSource=activeSource.child,activeSource.parent=_,activeSource.string="",activeSource.id=++this.objID,activeSource.changed=!0;break}activeSource=activeSource.child}else for(;;){if(activeSource.start()<=o&&activeSource.end()>=o){var T=null,S=null;if("\n"==t.charAt(o))T=this.getStringBetween(t,"\n",o+1),S=this.getStringBetween(t,"\n",o);else T=this.getStringBetween(t,"\n",o),S=this.getStringBetween(t,"\n",o-1);var y=null,b=null,C=null,x=null,k=null,E=null;if(activeSource.string==T.string)y=activeSource.id,b=activeSource.changed,C=activeSource.translated,x=activeSource.translation,k=activeSource.translating,E=activeSource.retranslate;activeSource.string!=S.string&&(activeSource.changed=!0,activeSource.translated=!1,activeSource.translation="",activeSource.id=++this.objID),activeSource.string=S.string;var L=activeSource.child;activeSource.child=new Tilde.ProgressiveTextAreaElement,activeSource.child.string!=T.string&&(activeSource.child.changed=!0,activeSource.child.translated=!1,activeSource.child.translation="",activeSource.child.id=++this.objID),null!=y?(activeSource.child.id=y,activeSource.child.changed=b,activeSource.child.translated=C,activeSource.child.translation=x,activeSource.child.translating=k,activeSource.child.retranslate=E):activeSource.child.id=++this.objID,activeSource.child.string=T.string,activeSource.child.id=++this.objID,activeSource.child.parent=activeSource,null!=(activeSource.child.child=L)&&(L.parent=activeSource.child);break}activeSource=activeSource.child}else for(;;){if(activeSource.start()<=o&&(null==activeSource.child||activeSource.end()+1>=o)){activeSource.string=current.string,activeSource.changed=!0;break}activeSource=activeSource.child}}(this.oldString.match(/\n/g)||[]).length!=($(this.options.textAreaSelector).val().match(/\n/g)||[]).length?this.triggerOnNewParagraph():i||this.triggerOnNewText(),this.oldString=$(this.options.textAreaSelector).val(),this.redrawBackground()},trimIfTooLarge:function(){for(var e=this.obj,t="",n=1;;){if(null==e.child)break;if(n++,t+=e.string+"\r\n",250<n){e.child=null,$(this.options.textAreaSelector).val(t);break}e=e.child}},redrawBackground:function(e,t){this.options.onBackgroundHover&&$.proxy(this.options.onBackgroundHover,this)(e,t)},triggerOnTextInput:function(e){this.options.onTextInput&&this.options.onTextInput(e)},triggerOnNewParagraph:function(){this.options.onNewParagraph&&this.options.onNewParagraph()},triggerOnNewText:function(){this.options.onTextChanged&&this.options.onTextChanged()}},$.extend(Tilde.TranslatorWidgetDefaultOptions,{_websiteTranslationUrl:"http://localhost:53130/Translate/WebsiteEmbedded?embeddedStyle=noUI",_debug:!1,_onWebTranslateUrlLoaded:null,_webLangAutodetect:!0}),$.extend(Tilde.TranslatorWidget.prototype,{webPluginInit:function(){if(0!=$("#websiteFrame",$widget.settings.container).length){var e,t=$widget.settings._websiteTranslationUrl.indexOf("returnUrl");e=-1<t?decodeURIComponent($widget.settings._websiteTranslationUrl.substring(t+10)):$widget.settings._websiteTranslationUrl,$widget.translateWeb_IframeSchemaPortDomain=e.substring(0,e.indexOf("/",e.indexOf("://")+3)),$widget.translateWeb_Url=$(".url",$widget.settings.container),$widget.translateWeb_Iframe=$("#websiteFrame")[0],$widget.translateWeb_IframeContainer=$("#websiteFrameContainer"),$widget.translateWeb_translateButton=$(".translateButton",$widget.settings.container),$widget.translateWeb_cancelButton=$(".cancelButton",$widget.settings.container),$widget.translateWeb_restoreButton=$(".restoreButton",$widget.settings.container),$widget.translateWeb_spinner=$(".translateProgress",$widget.settings.container),$widget.translateWeb_translating=!1;var n="";-1<$widget.settings._websiteTranslationUrl.indexOf("returnUrl")?(-1<$widget.settings._websiteTranslationUrl.indexOf("%3f")?n+="%26":n+="%3f",n+="appId%3d"+$widget.settings._appId,$widget.settings._clientId&&(n+="%26clientId%3d"+$widget.settings._clientId),$widget.settings._allowedSystemStatuses&&(n+="%26allowedSystemStatuses%3d"+encodeURIComponent(encodeURIComponent($widget.settings._allowedSystemStatuses))),$widget.settings._getFilteredSystems&&(n+="%26filterSystemsByAppId%3dtrue")):(-1<$widget.settings._websiteTranslationUrl.indexOf("?")?n+="&":n+="?",n+="appId="+$widget.settings._appId,$widget.settings._clientId&&(n+="&clientId="+$widget.settings._clientId),$widget.settings._allowedSystemStatuses&&(n+="&allowedSystemStatuses="+encodeURIComponent($widget.settings._allowedSystemStatuses)),$widget.settings._getFilteredSystems&&(n+="&filterSystemsByAppId=true")),$widget.settings._websiteTranslationUrl+=n,$(".loadButton",$widget.settings.container).click(function(){$widget.translateWeb_loadUrl()}),$(".url",$widget.settings.container).keypress(function(e){13==e.which&&($widget.translateWeb_loadUrl(),e.preventDefault())}),$widget.translateWeb_translateButton.click(function(){if("true"===$widget.translateWeb_translateButton.attr("data-disabled"))return!1;$widget.translateWeb_translateButton.attr("data-disabled",!0),$widget.disableSystemChange();var e={message:"loadUrl",url:$widget.translateWeb_Url.val(),translateAfterLoad:!0};$widget.termCorpusId&&"Ready"==$widget.getSelectedTermCorpusStatus()&&(e.termCorpusId=$widget.termCorpusId),$widget.translateWeb_sendMessageToIframe(e)}),$widget.translateWeb_cancelButton.click(function(){$widget.translateWeb_cancelButton.attr("data-disabled",!0),$widget.translateWeb_sendMessageToIframe({message:"untranslate"})}),$widget.translateWeb_restoreButton.click(function(){$widget.translateWeb_restoreButton.attr("data-disabled",!0),$widget.translateWeb_sendMessageToIframe({message:"untranslate"})}),window.removeEventListener("message",$widget.translateWeb_initIframeMsg),window.addEventListener("message",$widget.translateWeb_initIframeMsg,!1),$widget.translateWeb_IframeLastScrollWidth=null,$widget.translateWeb_IframeLastScrollHeight=null,$widget.translateWeb_resizeLayout(),$widget.settings._onWidgetLoaded=function(){window.open($widget.settings._websiteTranslationUrl,"websiteFrame")}}},translateWeb_initIframeMsg:function(e){if($widget.settings._debug&&console.info("Message received from iframe:"+JSON.stringify(e.data)),e.data&&e.data.message)switch(e.data.message){case"ready":$widget.onSystemChangedHandlers.push(function(e){$widget.translateWeb_systemSuggestedByIframe==e?$widget.translateWeb_systemSuggestedByIframe=null:$widget.translateWeb_sendMessageToIframe({message:"changeSystem",systemId:$widget.activeSystemId})}),$widget.onSystemListLoadedHandlers.push(function(e){for(var t=[],n=0;n<e.length;n++)t.push({id:e[n].ID,sourceLanguage:e[n].SourceLanguage.Code,targetLanguage:e[n].TargetLanguage.Code,name:e[n].Title?e[n].Title.Text:e[n].ID,order:n});$widget.translateWeb_sendMessageToIframe({message:"setSystemList",systemList:t})});var t=[],n=$widget.settings._systems;if(null!=n)for(var i=0;i<n.length;i++)t.push({id:n[i].ID,sourceLanguage:n[i].SourceLanguage.Code,targetLanguage:n[i].TargetLanguage.Code,name:n[i].Title?n[i].Title.Text:n[i].ID,order:i});$widget.settingSystemListForFirstTime=!0,$widget.translateWeb_sendMessageToIframe({message:"setSystemList",systemList:t}),$("input.url").blur().focus();break;case"urlLoaded":$widget.translateWeb_Url.val(e.data.url),$widget.translateWeb_translateButton.removeClass("hide"),$widget.translateWeb_translateButton.attr("data-disabled",!1);break;case"startedLoading":$widget.translateWeb_spinner.removeClass("hide"),$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.addClass("hide"),$widget.translateWeb_translateButton.addClass("hide");break;case"stoppedLoading":$widget.translateWeb_translating||($widget.enableSystemChange(),$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.addClass("hide"),$widget.translateWeb_translateButton.removeClass("hide"),$widget.translateWeb_translateButton.attr("data-disabled",!1),$widget.translateWeb_spinner.addClass("hide"));break;case"systemChanged":$widget.settingSystemListForFirstTime?($widget.settingSystemListForFirstTime=!1,$widget.translateWeb_sendMessageToIframe({message:"changeSystem",systemId:$widget.activeSystemId})):e.data.auto&&e.data.changed&&($widget.settings._webLangAutodetect?($widget.translateWeb_systemSuggestedByIframe=e.data.systemId,$widget.setActiveSystem(e.data.systemId),$(".translateSourceLangContainer .fancy-select .trigger",$widget.settings.container).addClass("attention"),$(".translateSourceLangContainer .translateSingleSourceLang",$widget.settings.container).addClass("attention"),$(".translateSystemContainer .fancy-select .trigger",$widget.settings.container).addClass("attention"),setTimeout(function(){$(".translateSourceLangContainer .fancy-select .trigger",$widget.settings.container).removeClass("attention"),$(".translateSourceLangContainer .translateSingleSourceLang",$widget.settings.container).removeClass("attention"),$(".translateSystemContainer .fancy-select .trigger",$widget.settings.container).removeClass("attention")},5e3)):($widget.translateWeb_systemSuggestedByIframe=$widget.activeSystemId,$widget.translateWeb_sendMessageToIframe({message:"changeSystem",systemId:$widget.activeSystemId})));break;case"translationStarted":$widget.disableSystemChange(),$widget.translateWeb_translateButton.addClass("hide"),$widget.translateWeb_cancelButton.removeClass("hide"),$widget.translateWeb_cancelButton.attr("data-disabled",!1),$widget.translateWeb_spinner.removeClass("hide"),$widget.translateWeb_translating=!0;break;case"translationStopped":$widget.translateWeb_translating=!1,$widget.translateWeb_spinner.addClass("hide");break;case"translated":$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.removeClass("hide"),$widget.translateWeb_restoreButton.attr("data-disabled",!1);break;case"untranslated":$widget.enableSystemChange(),$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.addClass("hide"),$widget.translateWeb_translateButton.removeClass("hide"),$widget.translateWeb_translateButton.attr("data-disabled",!1);break;case"error":$widget.enableSystemChange(),$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.addClass("hide"),$widget.translateWeb_translateButton.removeClass("hide"),$widget.translateWeb_translateButton.attr("data-disabled",!1),console&&console.error(e.data.description),e.data.shownInUI||(-1!==e.data.description.indexOf("system is starting")&&$widget.showSystemWaking&&"function"==typeof $widget.showSystemWaking?$widget.showSystemWaking(!1):alert(e.data.description));break;case"warning":console&&console.warn(e.data.description)}},translateWeb_loadUrl:function(){$widget.translateWeb_sendMessageToIframe({message:"loadUrl",url:$widget.translateWeb_Url.val(),translateAfterLoad:!1}),$widget.enableSystemChange(),$widget.settings._onWebTranslateUrlLoaded&&"function"==typeof $widget.settings._onWebTranslateUrlLoaded&&$widget.settings._onWebTranslateUrlLoaded($widget.translateWeb_Url.val())},translateWeb_sendMessageToIframe:function(e){$widget.settings._debug&&console.info("Message sent to iframe:"+JSON.stringify(e));try{$widget.translateWeb_Iframe.contentWindow.postMessage(e,$widget.translateWeb_IframeSchemaPortDomain)}catch(e){}},translateWeb_resizeLayout:function(){window.innerWidth<50*$.fn.getDefaultFontSize()[0]||window.innerHeight<30*$.fn.getDefaultFontSize()[1]?($widget.translateWeb_Iframe.contentWindow&&$widget.translateWeb_Iframe.contentWindow.document&&$widget.translateWeb_Iframe.contentWindow.document.body?$widget.translateWeb_IframeLastScrollWidth==$widget.translateWeb_Iframe.contentWindow.document.body.scrollWidth&&$widget.translateWeb_IframeLastScrollHeight==$widget.translateWeb_Iframe.contentWindow.document.body.scrollHeight||($widget.translateWeb_IframeLastScrollWidth=$widget.translateWeb_Iframe.contentWindow.document.body.scrollWidth,$widget.translateWeb_IframeContainer.width($widget.translateWeb_IframeLastScrollWidth),$widget.translateWeb_IframeLastScrollHeight=$widget.translateWeb_Iframe.contentWindow.document.body.scrollHeight,$widget.translateWeb_IframeContainer.height($widget.translateWeb_IframeLastScrollHeight)):($widget.translateWeb_IframeContainer.css("height",""),$widget.translateWeb_IframeContainer.css("width",""),$widget.translateWeb_IframeLastScrollWidth=null,$widget.translateWeb_IframeLastScrollHeight=null),$widget.translateWeb_IframeContainer.css("position","static")):void 0!==$widget.translateWeb_IframeContainer&&($widget.translateWeb_IframeContainer.css("height",""),$widget.translateWeb_IframeContainer.css("width",""),$widget.translateWeb_IframeContainer.css("position","")),window.setTimeout($widget.translateWeb_resizeLayout,100)}}),uiResources=$.extend(!0,uiResources,{en:{E_DEFAULT_ERROR:"Error occurred while translating.",E_UNKNOWN_FILE_TYPE:"Unknown file type.",E_CANNOT_READ_FILE:"Cannot read file, file may be corrupted.",E_FAILED_IN_TRANSLATION:"Error occurred while translating.",E_FORMAT_TRACK_CHANGES:"Could not translate because track changes was turned on. Changes must first be accepted.",E_UNKNOWN_ERROR:"An unknown error occurred.",E_UNAUTHORIZED:"Document translation was denied.",W_TIMEOUT:"Some sentences are not translated, because translation took too much time.",W_SENTENCE_TOO_LONG:"Some sentences are not translated, because they are too long."},lv:{E_DEFAULT_ERROR:"Tulkojot radās kļūda.",E_UNKNOWN_FILE_TYPE:"Nezināms faila tips.",E_CANNOT_READ_FILE:"Neizdevās nolasīt faila saturu, iespējams, fails ir bojāts.",E_FAILED_IN_TRANSLATION:"Tulkojot radās kļūda.",E_FORMAT_TRACK_CHANGES:"Nevarēja iztulkot dokumentu, jo bija ieslēgta izmaiņu reģistrēšana. Vispirms apstipriniet izmaiņas.",E_UNKNOWN_ERROR:"Radās nezināma kļūda.",E_UNAUTHORIZED:"Dokumenta tulkošana tika liegta.",W_TIMEOUT:"Daži teikumi netika iztulkoti, jo tulkošana prasīja pārāk daudz laika.",W_SENTENCE_TOO_LONG:"Daži teikumi nav iztulkoti, jo tie bija pārāk gari."},ru:{E_DEFAULT_ERROR:"Во время перевода возникла ошибка.",E_UNKNOWN_FILE_TYPE:"Неизвестный тип файла.",E_CANNOT_READ_FILE:"Не удалось считать содержание файла, возможно, файл поврежден.",E_FAILED_IN_TRANSLATION:"Во время перевода возникла ошибка.",E_FORMAT_TRACK_CHANGES:"Не удалось перевести, поскольку был включен режим отслеживания исправлений. Сначала примите исправления.",E_UNKNOWN_ERROR:"Возникла неизвестная ошибка.",E_UNAUTHORIZED:"Перевод документа запрещен.",W_TIMEOUT:"Some sentences are not translated, because translation took too much time.",W_SENTENCE_TOO_LONG:"Some sentences are not translated, because they are too long."},lt:{E_DEFAULT_ERROR:"Verčiant įvyko klaida.",E_UNKNOWN_FILE_TYPE:"Nežinomas failo tipas.",E_CANNOT_READ_FILE:"Failo nuskaityti nepavyko. Jis gali būti sugadintas.",E_FAILED_IN_TRANSLATION:"Verčiant įvyko klaida.",E_FORMAT_TRACK_CHANGES:"Išversti nepavyko, nes įjungtas keitimų sekimas (angl. track changes). Pirmiausia sutikite su visais keitimais.",E_UNKNOWN_ERROR:"Aptikta nenustatyta klaida.",E_UNAUTHORIZED:"Dokumento vertimas atmestas.",W_TIMEOUT:"Kai kurie sakiniai liko neišversti, nes baigėsi vertimui skirtas laikas.",W_SENTENCE_TOO_LONG:"Kai kurie sakiniai liko neišversti, nes jie per ilgi."},fr:{E_DEFAULT_ERROR:"Une erreur est survenue pendant la traduction.",E_UNKNOWN_FILE_TYPE:"Type de fichier inconnu.",E_CANNOT_READ_FILE:"Impossible de lire le fichier, le fichier est peut-être endommagé.",E_FAILED_IN_TRANSLATION:"Une erreur est survenue pendant la traduction.",E_FORMAT_TRACK_CHANGES:"Impossible de traduire car le suivi des corrections est activé. Les corrections doivent d'abord être acceptées.",E_UNKNOWN_ERROR:"Une erreur inconnue s'est produite.",E_UNAUTHORIZED:"La traduction du document a été refusée.",W_TIMEOUT:"Some sentences are not translated, because translation timed out.",W_SENTENCE_TOO_LONG:"Some sentences are not translated, because they are too long."},et:{E_DEFAULT_ERROR:"Tõlkimisel ilmnes tõrge.",E_UNKNOWN_FILE_TYPE:"Tundmatu failitüüp.",E_CANNOT_READ_FILE:"Faili ei saa lugeda. See võib olla rikutud.",E_FAILED_IN_TRANSLATION:"Tõlkimisel ilmnes tõrge.",E_FORMAT_TRACK_CHANGES:"Tõlkida ei saanud, kuna muutuste jälitus oli sisse lülitatud. Muutused tuleb esmalt aktsepteerida.",E_UNKNOWN_ERROR:"Ilmnes tundmatu tõrge.",E_UNAUTHORIZED:"Dokumendi tõlkimine keelati.",W_TIMEOUT:"Mõni lause jäi tõlkimata, kuna tõlkimisel ilmnes ajalõpp.",W_SENTENCE_TOO_LONG:"Mõnda lauset ei tõlgitud, kuna need on liiga pikad."},bg:{E_DEFAULT_ERROR:"Грешка в процеса на превод.",E_UNKNOWN_FILE_TYPE:"Непознат формат на файл.",E_CANNOT_READ_FILE:"Cannot read file, file may be corrupted.",E_FAILED_IN_TRANSLATION:"Файлът не се чете, файлът може би е повреден.",E_FORMAT_TRACK_CHANGES:"Преводът не можа да бъде осъществен, защото режимът „Проследете промените“ е включен. Направените промени трябва да бъдат одобрени.",E_UNKNOWN_ERROR:"Възникна неизвестна грешка.",E_UNAUTHORIZED:"Преводът на документа бе отказан.",W_TIMEOUT:"Някои изречения не са преведени, защото преводът отне твърде много време.",W_SENTENCE_TOO_LONG:"Някои изречения не са преведени, защото са прекалено дълги."},de:{E_DEFAULT_ERROR:"Beim Übersetzen ist ein Fehler aufgetreten.",E_UNKNOWN_FILE_TYPE:"Unbekannter Dateityp.",E_CANNOT_READ_FILE:"Die Datei kann nicht gelesen werden. Die Datei könnte beschädigt sein.",E_FAILED_IN_TRANSLATION:"Beim Übersetzen ist ein Fehler aufgetreten.",E_FORMAT_TRACK_CHANGES:'Übersetzen war nicht möglich, da "Änderungen nachverfolgen" aktiviert ist. Die Änderungen müssen zuerst angenommen werden.',E_UNKNOWN_ERROR:"Ein unbekannter Fehler ist aufgetreten.",E_UNAUTHORIZED:"Die Übersetzung des Dokuments wurde verweigert.",W_TIMEOUT:"Manche Sätze wurden nicht übersetzt, da die Übersetzung zu viel Zeit in Anspruch nahm.",W_SENTENCE_TOO_LONG:"Manche Sätze wurden nicht übersetzt, da sie zu lang sind."}}),uiResources=$.extend(!0,uiResources,{en:{docTempTarget:"Machine translation results for documents help to understand the meaning of a source text, but do not equal translation by a human.",docDownload:"Download",docCancel:"Cancel",docUploadTooltip:"Upload document",docUploadMsgType:'The file "{file}" format is not recognized. Translation is supported for these document formats: {extensions}.',docUploadMsgSize:'File "{file}" is too large. Maximum file size is {sizeLimit}.',docUploadMsgEmpty:'File "{file}" is empty. Please select a file with content.',docUploadMsgWordcnt:"The maximum word count for one translation ({wordCount}) has been exceeded.",docUploadFilename:"Document title:",docUploadFilesize:"Document size:",docUploadWordcount:"Word count:",docUploadFailed:"File upload was not successful.",docTranslFailed:"Document translation failed. Please try again.",docUploadNewDoc:"Delete",docStarting:"Document translation is starting...",docPreviewError:"Could not generate a preview of the document.",docAppleLimited:"File upload on iOS devices is limited.",docTranslInProgress:"Document translation is in progress. If you leave the page, the translation will be lost.",docSupportedTypes:"Currently the system supports {extensions} file formats. UTF-8 or UTF-16 coding required.",docLimit:'Please be informed that only first {limit} segments of each document will be translated for you as a DEMO user. We kindly invite you to contact us <a href="mailto:mt@tilde.com">mt@tilde.com</a> to get full access',advancedOptions:"Options▾"},lv:{docTempTarget:"Dokumentu mašīntulkošanas rezultāti ļauj saprast teksta nozīmi, bet nevar aizstāt cilvēka radītu tulkojumu.",docDownload:"Atvērt",docCancel:"Atcelt",docUploadTooltip:"Augšupielādēt dokumentu",docUploadMsgType:'Faila "{file}" formāts nav atpazīts. Tulkošana tiek atbalstīta šādiem dokumentu formātiem: {extensions}.',docUploadMsgSize:'Fails "{file}" ir pārāk liels. Maksimālais lielums ir {sizeLimit}.',docUploadMsgEmpty:'Fails "{file}" ir tukšs. Izvēlieties failu, kurā ir saturs.',docUploadMsgWordcnt:"Ir pārsniegts vienam tulkojumam pieejamais vārdu skaits ({wordCount}), tādēļ dokuments tiks iztulkots daļēji. Pilnam tulkojumam, lūdzu, sadaliet tekstu vairākos dokumentos.",docUploadFilename:"Dokumenta nosaukums:",docUploadFilesize:"Dokumenta lielums:",docUploadWordcount:"Vārdu skaits:",docUploadFailed:"Neizdevās ielādēt failu.",docUploadNewDoc:"Izdzēst",docStarting:"Tiek sākta dokumenta tulkošana...",docPreviewError:"Neizdevās izveidot dokumenta priekšskatījumu.",docAppleLimited:"iOS iekārtās failu augšupielāde ir ierobežota.",docTranslInProgress:"Patreiz notiek dokumenta tulkošana. Pametot lapu, tulkojums tiks pazaudēts.",docSupportedTypes:"Tiek atbalstīti šādi dokumentu formāti: {extensions}. Nepieciešams UTF-8 vai UTF-16 kodējums."},ru:{docTempTarget:"Результаты машинного перевода документов позволяют понять значение текста, но не позволяют заменить сделанный человеком перевод.",docDownload:"Открыть",docCancel:"Отменить",docUploadTooltip:"Загрузить документ",docUploadMsgType:'Формат файла "{file}" не опознан. Перевод поддерживается для следующих форматов документов: {extensions}.',docUploadMsgSize:'Файл "{file}" слишком большой. Максимальный размер: {sizeLimit}.',docUploadMsgEmpty:'Файл "{file}" пустой. Выберите файл с содержимым.',docUploadMsgWordcnt:"Превышено количество слов, доступное для одного файла ({wordCount}).",docUploadFilename:"Название документа:",docUploadFilesize:"Размер документа:",docUploadWordcount:"Количество слов:",docUploadFailed:"Файл не удалось загрузить.",docUploadNewDoc:"Удалить",docStarting:"Начат перевод документа...",docPreviewError:"Не удалось создать предварительный просмотр документа.",docAppleLimited:"Загрузка файла на устройствах IOS ограничено.",docTranslInProgress:"Перевод документов в процессе. Если вы уйдете со страницы, перевод будет потерян.",docSupportedTypes:"Currently the system supports {extensions} file formats. UTF-8 or UTF-16 coding required."},lt:{docTempTarget:"Dokumentų mašininio vertimo rezultatai padeda suprasti originalo teksto prasmę, tačiau jo kokybės negalima lyginti su žmonių atliekamu vertimu.",docDownload:"Atidaryti",docCancel:"Atšaukti",docUploadTooltip:"Įkelti dokumentą",docUploadMsgType:"Failo „{file}“ formatas neatpažintas. Atliekamas tik šių dokumentų formatų vertimas: {extensions}.",docUploadMsgSize:"Failas „{file}“ yra per didelis. Maksimalus leistinas failo dydis: {sizeLimit}.",docUploadMsgEmpty:"Failas „{file}“ yra tuščias. Pasirinkite failą su turiniu.",docUploadMsgWordcnt:"Viršytas maksimalus vieno vertimo žodžių skaičius ({wordCount}).",docUploadFilename:"Document title:",docUploadFilesize:"Document size:",docUploadWordcount:"Word count:",docUploadFailed:"Failo įkelti nepavyko.",docTranslFailed:"Document translation failed. Please try again.",docUploadNewDoc:"Ištrinti",docStarting:"Pradedamas dokumento vertimas...",docPreviewError:"Dokumento peržiūros sugeneruoti nepavyko.",docAppleLimited:"Failų įkėlimas iOS įrenginiuose yra apribotas.",docTranslInProgress:"Dokumentas verčiamas. Jei uždarysite šį puslapį, vertimas bus prarastas.",docSupportedTypes:"Šiuo metu sistema palaiko {extensions} failų formatus. Būtinas UTF-8 arba UTF-16 kodavimas."},fr:{docTempTarget:"Les résultats de la traduction automatique de documents aident à comprendre le sens d'un texte source, mais ils ne sont pas équivalents à une traduction humaine.",docDownload:"Ouvrir",docCancel:"Annuler",docUploadTooltip:"Charger le document",docUploadMsgType:'Le format du fichier "{file}" n\'est pas reconnu. La traduction est prise en charge pour les formats de document suivants : {extensions}.',docUploadMsgSize:'Le fichier "{file}" est trop grand. La taille maximum du fichier est de {sizeLimit}.',docUploadMsgEmpty:'Le fichier "{file}" est vide. Veuillez sélectionner un fichier avec contenu.',docUploadMsgWordcnt:"Le nombre maximum de mots pour une traduction ({wordCount}) a été dépassé.",docUploadFilename:"Document title:",docUploadFilesize:"Document size:",docUploadWordcount:"Word count:",docUploadFailed:"Failo įkelti nepavyko.",docTranslFailed:"Échec du chargement du fichier.",docUploadNewDoc:"Supprimer",docStarting:"La traduction du document démarre…",docPreviewError:"Impossible de générer un aperçu du document.",docAppleLimited:"Le chargement de fichiers sur les appareils iOS est limité.",docTranslInProgress:"La traduction du document est en cours. Si vous quittez la page, la traduction sera perdue.",docSupportedTypes:"Currently the system supports {extensions} file formats. UTF-8 or UTF-16 coding required."},et:{docTempTarget:"Masintõlge aitab teksti sisust aru saada, kuid ei asenda inimtõlget.",docDownload:"Laadi alla",docCancel:"Tühista",docUploadTooltip:"Laadi dokument üles",docUploadMsgType:'Faili "{file}" vorming on tundmatu. Tõlketugi on olemas järgmiste failivormingute puhul: {extensions}.',docUploadMsgSize:'Fail "{file}" on liiga suur. Faili lubatud maksimummaht on {sizeLimit}.',docUploadMsgEmpty:'Fail "{file}" on tühi. Valige andmeid sisaldav fail.',docUploadMsgWordcnt:"Ühe tõlke suurim lubatud sõnaarv ({wordCount}) on ületatud.",docUploadFilename:"Dokumendi pealkiri:",docUploadFilesize:"Dokumendi suurus:",docUploadWordcount:"Sõnade arv:",docUploadFailed:"Faili üleslaadimine nurjus.",docTranslFailed:"Dokumendi tõlkimine nurjus. Proovige uuesti.",docUploadNewDoc:"Kustuta",docStarting:"Algab dokumendi tõlkimine...",docPreviewError:"Dokumendi eelvaate loomine nurjus.",docAppleLimited:"Failide üleslaadimine iOS-seadmetest on piiratud.",docTranslInProgress:"Dokumendi tõlkimine on pooleli. Kui lehelt lahkute, läheb tõlge kaotsi.",docSupportedTypes:"Tõlketugi on olemas järgmiste failivormingute puhul: {extensions}. Vajalik on kodeering UTF-8 või UTF-16."},bg:{docTempTarget:"Резултатите от машинния превод на документи помагат да се разбере смисълът на изходния текст, но не са равностойни на превод, направен от човек.",docDownload:"Свали",docCancel:"Отказ",docUploadTooltip:"Зареди документ",docUploadMsgType:'Файлът {file}" не беше разпознат. Преводът се поддържа за следните формати: {extensions}.',docUploadMsgSize:'Файлът {file}" е прекалено голям. Допустимият размер за файл е {sizeLimit}.',docUploadMsgEmpty:'Файлът  {file}" е празен. Моля, изберете файл със съдържание.',docUploadMsgWordcnt:"Максималният брой думи за един превод ({wordCount}) е превишен.",docUploadFilename:"Име на документ:",docUploadFilesize:"Размер на документ:",docUploadWordcount:"Брой думи:",docUploadFailed:"Зареждането на файл не беше успешно.",docTranslFailed:"Документът не беше преведен. Моля, опитайте отново.",docUploadNewDoc:"Изтрий",docStarting:"Преводът на документа започва...",docPreviewError:"Не може да се генерира предварителен изглед на документа.",docAppleLimited:"Зареждането на файлове на устройства с iOS е ограничено.",docTranslInProgress:"В момента се извършва превод на документа. Ако излезете от тази страница, преводът ще бъде загубен.",docSupportedTypes:"Понастоящем системата поддържа следните {extensions} файлови формати. Необходимо е кодиране на UTF-8 или UTF-16.",docLimit:"Моля, имайте предвид, че само първите {limit} части от всеки документ ще бъдат преведени за Вас като потребител на демо версия. Любезно Ви каним да се свържете с нас на имейл mt@tilde.com, за да получите пълен достъп.",advancedOptions:"Настройки▾"},de:{docTempTarget:"Die Ergebnisse der maschinellen Übersetzung helfen dabei, den Inhalt eines Ausgangstextes zu verstehen, aber sie sind nicht mit von Menschen gemachten Übersetzungen gleichzusetzen.",docDownload:"Download",docCancel:"Abbrechen",docUploadTooltip:"Dokument hochladen",docUploadMsgType:'Das Dateiformat {file}" wird nicht erkannt. Für die folgenden Dokumentformate wird die Übersetzung unterstützt: {extensions}.',docUploadMsgSize:'Die Datei {file}" ist zu groß. Die maximale Dateigröße beträgt {sizeLimit}.',docUploadMsgEmpty:'Die Datei {file}" ist leer. Bitte wählen Sie eine Datei mit Inhalt.',docUploadMsgWordcnt:"Die maximale Wortanzahl für eine Übersetzung ({wordCount}) wurde überschritten.",docUploadFilename:"Dokumenttitel:",docUploadFilesize:"Dokumentgröße:",docUploadWordcount:"Wortanzahl:",docUploadFailed:"Das Hochladen der Datei war nicht erfolgreich.",docTranslFailed:"Das Dokument konnte nicht übersetzt werden. Bitte versuchen Sie es noch einmal.",docUploadNewDoc:"Löschen",docStarting:"Mit der Übersetzung des Dokuments wird begonnen...",docPreviewError:"Eine Vorschau des Dokuments konnte nicht erstellt werden.",docAppleLimited:"Der Dateiupload auf iOS-Geräten ist nur begrenzt möglich.",docTranslInProgress:"Die Übersetzung des Dokuments wird bearbeitet. Wenn Sie diese Seite verlassen, geht die Übersetzung verloren.",docSupportedTypes:"Derzeit unterstützt das System {extensions} Dateiformate. Es sind die Kodierungen UTF-8 oder UTF-16 erforderlich.",docLimit:"Bitte beachten Sie, dass Sie als DEMO-BenutzerIn nur die ersten {limit} Segmente eines einzelnen Dokuments übersetzen lassen können. Wir laden Sie herzlich ein, uns unter mt@tilde.com zu kontaktieren, um Vollzugriff zu erhalten.",advancedOptions:"Optionen▾"}}),uiResources=$.extend(!0,uiResources,{en:{clearTranslation:"Clear",sourceTextTooltip:"Enter the text you want to translate.",noInternet:"No internet connection",targetTextTooltip:"Machine translation results help to understand the meaning of a source text, but do not equal translation by a human.",transLimit:"You have reached the maximum word limit for one translation request. To translate the untranslated part please make another request.",seeFullEntry:"Read complete entry",speaker:"Listen",editButton:"Edit",editButtonTooltip:"Suggest a better translation",translationEditSave:"Contribute",translationEditClose:"Close",translationEditOriginal:"Original sentence",translationEditTranslation:"Translation",translationEditDescription:"Your translation suggestion will be used to improve the quality of machine translation."},fr:{clearTranslation:"Effacer",sourceTextTooltip:"Entrez le texte que vous voulez traduire",noInternet:"No internet connection",targetTextTooltip:"Les résultats de traduction électronique aident à comprendre le sens du texte original mais ils ne remplacent pas un traducteur humain.",transLimit:"Ir sasniegts maksimālais vārdu limits vienā tulkošanas pieprasījumā. Lūdzu, sadaliet tekstu mazākos gabalos.",seeFullEntry:"Read complete entry",speaker:"Listen",editButton:"Edit",translationEditSave:"Contribute",translationEditClose:"Close",translationEditOriginal:"Original sentence",translationEditTranslation:"Translation",translationEditDescription:"Your translation suggestion will be used to improve the quality of machine translation."},lt:{clearTranslation:"Ištrinti",sourceTextTooltip:"Įveskite norimą versti tekstą",noInternet:"No internet connection",targetTextTooltip:"Automatinio vertimo rezultatai padeda suprasti teksto prasmę, tačiau nepakeičia žmonių kuriamų vertimų.",transLimit:"Pasiekėte vienos vertimo užklausos leistiną žodžių ribą. Jei norite versti neišverstą dalį, pateikite kitą užklausą.",seeFullEntry:"Read complete entry",speaker:"Klausykite",editButton:"Redaguoti",editButtonTooltip:"Siūlyti vertimą",translationEditSave:"Siūlyti",translationEditClose:"Uždaryti",translationEditOriginal:"Originalo sakinys",translationEditTranslation:"Vertimas",translationEditDescription:"Jūsų vertimo pasiūlymą naudosime, kad pagerintume mašininio vertimo kokybę."},lv:{clearTranslation:"Notīrīt",sourceTextTooltip:"Ievadiet tulkojamo tekstu",noInternet:"No internet connection",targetTextTooltip:"Mašīntulkošanas rezultāti ļauj saprast teksta nozīmi, bet nevar aizstāt cilvēka radītu tulkojumu.",transLimit:"You have reached the maximum word limit for one translation request. To translate the untranslated part please make another request.",seeFullEntry:"Skatīt pilnu šķirkli",speaker:"Klausīties",editButton:"Rediģēt",editButtonTooltip:"Ieteikt labāku tulkojumu",translationEditSave:"Ieteikt",translationEditClose:"Aizvērt",translationEditOriginal:"Sākotnējais teikums",translationEditTranslation:"Tulkojums",translationEditDescription:"Jūsu tulkojuma ieteikums tiks izmantots tulkošanas kvalitātes uzlabošanai."},ru:{clearTranslation:"Очистить",sourceTextTooltip:"Введите текст для перевода",noInternet:"No internet connection",targetTextTooltip:"Результаты машинного перевода позволяют понять значение текста, но не позволяют заменить сделанный человеком перевод.",transLimit:"You have reached the maximum word limit for one translation request. To translate the untranslated part please make another request.",seeFullEntry:"Read complete entry",speaker:"Listen",editButton:"Edit",translationEditSave:"Contribute",translationEditClose:"Close",translationEditOriginal:"Original sentence",translationEditTranslation:"Translation",translationEditDescription:"Your translation suggestion will be used to improve the quality of machine translation."},et:{clearTranslation:"Tühjenda",sourceTextTooltip:"Sisesta tekst, mida soovid tõlkida...",noInternet:"No internet connection",targetTextTooltip:"Masintõlge aitab teksti sisust aru saada, kuid ei asenda inimtõlget.",transLimit:"Ühe tõlketaotluse suurim sõnaarv on täis. Tõlkimata osa tõlkimiseks esitage uus taotlus.",seeFullEntry:"Read complete entry",speaker:"Kuulake",editButton:"Redigeeri",editButtonTooltip:"Soovita tõlget",translationEditSave:"Andke oma panus",translationEditClose:"Sule",translationEditOriginal:"Algne lause",translationEditTranslation:"Tõlge",translationEditDescription:"Teie tõlkesoovitust kasutatakse masintõlke kvaliteedi parandamiseks."},bg:{clearTranslation:"Изчисти",sourceTextTooltip:"Въведете текста, който искате да преведете.",noInternet:"Няма възка с интернет.",targetTextTooltip:"Резултатите от машинния превод помагат да се разбере смисълът на изходния текст, но не са равностойни на превод, направен от човек.",transLimit:"Достигнахте максималния лимит за думите за една заявка за превод. За да преведете непреведената част от документа, моля да направите друга заявка.",seeFullEntry:"Прочети пълния запис",speaker:"Чуй",editButton:"Редактирай",editButtonTooltip:"Предложи по-добър превод",translationEditSave:"Помогнете ни",translationEditClose:"Затвори",translationEditOriginal:"Изречение в оригинал",translationEditTranslation:"Превод",translationEditDescription:"Вашето предложение за превод ще бъде използвано за подобряване качеството на машинния превод."},de:{clearTranslation:"Löschen",sourceTextTooltip:"Geben Sie den Text ein, den Sie übersetzen möchten.",noInternet:"Keine Internetverbindung",targetTextTooltip:"Die Ergebnisse der maschinellen Übersetzung helfen dabei, den Inhalt eines Ausgangstextes zu verstehen, aber sie sind nicht mit von Menschen gemachten Übersetzungen gleichzusetzen.",transLimit:"Sie haben die maximale Wortanzahl für eine Übersetzungsanfrage erreicht. Um den restlichen Teil des Dokuments übersetzen zu lassen, stellen Sie bitte eine weitere Anfrage.",seeFullEntry:"Den kompletten Eintrag lesen",speaker:"Anhören",editButton:"Bearbeiten",editButtonTooltip:"Eine bessere Übersetzung vorschlagen",translationEditSave:"Beitragen",translationEditClose:"Schließen",translationEditOriginal:"Originalsatz",translationEditTranslation:"Übersetzung",translationEditDescription:"Wir werden Ihren Übersetzungsvorschlag verwenden, um die Qualität der maschinellen Übersetzung zu verbessern."}}),uiResources=$.extend(!0,uiResources,{en:{address:"Address",loadButton:"Load webpage",cancelButton:"Cancel",restoreButton:"Restore"},lv:{address:"Adrese",loadButton:"Ielādēt lapu",cancelButton:"Atcelt",restoreButton:"Atjaunot"},lt:{address:"Adresas",loadButton:"Įkelti svetainę",cancelButton:"Atšaukti",restoreButton:"Atkurti"},et:{address:"Aadress",loadButton:"Laadi veebileht",cancelButton:"Tühista",restoreButton:"Taasta"},bg:{address:"Адрес",loadButton:"Зареждане на страница",cancelButton:"Отказ",restoreButton:"Възстанови"},de:{address:"Adresse",loadButton:"Webseite laden",cancelButton:"Abbrechen",restoreButton:"Wiederherstellen"}});