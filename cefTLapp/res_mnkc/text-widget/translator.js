var uiResources={en:{sourceSystem:"From:",targetSystem:"To:",systemSelect:"System",swapLanguage:"Reverse",translateButton:"Translate",systemDomain:"Domain",systemLoadError:"Error while loading systems",en:"English",lv:"Latvian",lt:"Lithuanian",fr:"French",ru:"Russian",et:"Estonian",ar:"Arabic",pl:"Polish",bg:"Bulgarian",de:"German"},fr:{sourceSystem:"From:",targetSystem:"To:",systemSelect:"System",swapLanguage:"Reverse",translateButton:"Traduire",systemDomain:"Domain",systemLoadError:"Error while loading systems"},lt:{sourceSystem:"Iš:",targetSystem:"Į:",systemSelect:"System",swapLanguage:"Pakeisti",translateButton:"Versti",systemDomain:"Domain",systemLoadError:"Įkeliant sistemas įvyko klaida",en:"Anglų",lv:"Latvių",lt:"Lietuvių",ru:"Rusų",et:"Estų",ar:"Arabų",pl:"Lenkų"},lv:{sourceSystem:"No:",targetSystem:"Uz:",systemSelect:"System",swapLanguage:"Apgriezt",translateButton:"Tulkot",systemDomain:"Domēns",systemLoadError:"Neizdevās ielādēt tulkošanas sistēmas",en:"Angļu",lv:"Latviešu",lt:"Lietuviešu",fr:"Franču",ru:"Krievu",et:"Igauņu",ar:"Arābu",pl:"Poļu",bg:"Bulgāru",de:"Vācu"},ru:{sourceSystem:"Направление перевода",targetSystem:"На",systemSelect:"System",swapLanguage:"Перевернуть",translateButton:"Перевести",systemDomain:"Тематическая область",systemLoadError:"Error while loading systems",en:"Английский",lv:"Латышский",lt:"Литовский",fr:"Французский",ru:"Русский",pl:"Польский"},et:{sourceSystem:"Lähtekeel:",targetSystem:"Sihtkeel:",systemSelect:"",swapLanguage:"Vastupidi",translateButton:"Tõlgi",systemDomain:"Domain",systemLoadError:"Süsteemide laadimise tõrge",en:"Īnglise",lv:"Läti",lt:"Leedu",et:"Eesti",ru:"Vene",ar:"Araabia",pl:"Poola"},bg:{sourceSystem:"От:",targetSystem:"На:",systemSelect:"Система",swapLanguage:"Обратно",translateButton:"Превеждам",systemDomain:"Domain",systemLoadError:"Грешка при зареждане на системите",en:"Английски",lv:"Латвийски",lt:"Литовски",fr:"Френски",ru:"Руски",et:"Естонски",ar:"Арабски",bg:"Български"},de:{sourceSystem:"Aus:",targetSystem:"Zu:",systemSelect:"System",swapLanguage:"Rückgängig machen",translateButton:"Übersetzen",systemDomain:"Domain",systemLoadError:"Fehler beim Laden des Systems",en:"Englisch",lv:"Lettisch",lt:"Litauisch",fr:"Französisch",ru:"Russisch",et:"Estnisch",ar:"Arabisch",bg:"Bulgarisch",de:"Deutsch"}};"undefined"==typeof Tilde&&(Tilde={}),Tilde.TranslatorWidgetDefaultOptions={_systemListUrl:"https://yoursite/ws/Service.svc/json/GetSystemList",_apiIsInTheSameDomain:!1,_jsonType:"json",_appId:"unknown",_clientId:"u-bfcaf986-8147-4901-a131-f0d618a7354b",_jwtAuth:!1,_systems:null,_allowedSystemStatuses:"running",_templateId:null,_adminEnv:!1,_replaceContainer:!1,_translations:{},_language:"en",_localizeMTSystems:!1,_useFancySelect:!0,_systemSelectType:"language",_replaceSourceWithBlock:!1,_defaultSourceLang:null,_defaultTargetLang:null,_defaultDomain:null,_defaultSystem:null,_customSelectText:"",_swapLanguages:!0,_swapLanguagesButtonSelector:".swapLanguage",_getFilteredSystems:!1,_onGetSystemListError:null,_onSystemsLoaded:null,_onSystemChanged:null,_onWidgetLoaded:null,_onWidgetTemplateLoaded:null,_loginUrl:null,_sourceLanguageOrder:null,_targetLanguageOrder:null,_bootstrap:!1},Tilde.TranslatorWidget=function(e,t){if(0!==$(e).length){var n=$.extend(Tilde.TranslatorWidgetDefaultOptions,t,{container:$(e)});this.initWidget(n)}},Tilde.TranslatorWidget.prototype={$widget:null,activeSystemId:null,settings:null,reverseSystems:[{}],fancySource:null,fancyTarget:null,fancyDomain:null,onSystemChangedHandlers:[],pluginInitializers:[],onSystemListLoadedHandlers:[],onWidgetLoadedCalled:!1,initWidget:function(e){$widget=this,$widget.settings=e,$widget.onSystemListLoadedHandlers.push($widget.systemLoadComplete),$widget.initWidgetTemplate(),$widget.initPlugins(),$widget.initWidgetLanguage(),$widget.settings._onSystemsLoaded&&"function"==typeof $widget.settings._onSystemsLoaded&&$widget.onSystemListLoadedHandlers.push($widget.settings._onSystemsLoaded),$widget.settings._onWidgetLoaded&&"function"==typeof $widget.settings._onWidgetLoaded&&$widget.onSystemListLoadedHandlers.push(function(e){$widget.onWidgetLoadedCalled||($widget.onWidgetLoadedCalled=!0,$widget.settings._onWidgetLoaded(e))}),$widget.retrieveSystemData()},pluginsInitialized:!1,initPlugins:function(){$widget.pluginInitializers&&!$widget.pluginsInitialized&&($widget.pluginsInitialized=!0,$.each($widget.pluginInitializers,function(e,t){t()}))},getAuthHeaders:function(){var e={};if($widget.settings._jwtAuth){var t=Cookies.get("jwt");null!=t?e.Authorization="Bearer "+t:console.warn("Cannot find JWT token in cookies")}if(!$widget.settings._apiIsInTheSameDomain){var n=$widget.readCookie("smts");n&&(e["website-auth-cookie"]=n)}return null!==$widget.settings._clientId&&0==Object.keys(e).length&&(e["client-id"]=$widget.settings._clientId),e},retrieveSystemData:function(){if($widget.settings._predefinedSystems)$.each($widget.onSystemListLoadedHandlers,function(e,t){t($widget.settings._systems)});else{var e={appID:$widget.settings._appId,uiLanguageID:$widget.settings._language};$widget.settings._getFilteredSystems&&(e.options="filter"),$widget.readCookie("show-public-systems")&&(e.options?e.options+=",public":e.options="public"),$.ajax({dataType:$widget.settings._json_type,type:"GET",url:$widget.settings._systemListUrl,headers:$widget.getAuthHeaders(),data:e,success:function(e){if($(".systemsLoading").addClass("hide"),$(".translateContainerHeader").removeClass("hide"),$widget.settings._systems=[],$.each(e.System,function(e,t){var n=$widget.getSystemMetaValue(t.Metadata,"status");-1!==$widget.settings._allowedSystemStatuses.indexOf(n)&&$widget.settings._systems.push(t)}),!$widget.settings._systems.length){if(!$widget.readCookie("show-public-systems")&&!$widget.readCookie("show-private-systems"))return document.cookie="show-public-systems=true",void $widget.retrieveSystemData();$widget.settings._adminEnv||($widget.settings._onGetSystemListError&&"function"==typeof $widget.settings._onGetSystemListError&&$widget.settings._onGetSystemListError(),$(".systemsLoading").addClass("hide"),$(".translateContainerHeader").removeClass("hide"),$widget.settings.container.text(uiResources[$widget.settings._language].systemLoadError).addClass("noNetwork"))}$.each($widget.onSystemListLoadedHandlers,function(e,t){t($widget.settings._systems)})},error:function(){$widget.settings._onGetSystemListError&&"function"==typeof $widget.settings._onGetSystemListError&&$widget.settings._onGetSystemListError(),$(".systemsLoading").addClass("hide"),$(".translateContainerHeader").removeClass("hide"),$widget.settings.container.text(uiResources[$widget.settings._language].systemLoadError).addClass("noNetwork")}})}},getSystemMetaValue:function(e,n){if(void 0===e)return!1;var a=null;return $.each(e,function(e,t){if(t.Key===n)return a=t.Value,!1}),a},setSystemMetaValue:function(n,a,i){var s=null;return $.each($widget.settings._systems,function(e,t){t.ID===n&&(s=t)}),null===s||void 0===s.Metadata||$.each(s.Metadata,function(e,t){if(t.Key===a)return t.Value=i,!0}),!1},systemLoadComplete:function(){if("system"===$widget.settings._systemSelectType&&($.each($widget.settings._systems,function(e,t){t.order=$widget.getSystemMetaValue(t.Metadata,"order")}),$widget.settings._systems.sort(function(e,t){if(void 0===e.order||null===e.order||isNaN(parseInt(e.order,10))){if(void 0===t.order||null===t.order||isNaN(parseInt(t.order,10))){var n=3,a=3,i=$widget.getSystemMetaValue(e.Metadata,"status"),s=$widget.getSystemMetaValue(t.Metadata,"status");return"running"===i||"queuingtransl"===i?n=1:"standby"===i&&(n=2),"running"===s||"queuingtransl"===s?a=1:"standby"===s&&(a=2),n===a?e.Title.Text.toLowerCase()>t.Title.Text.toLowerCase()?1:-1:a<n?1:-1}return 1}return void 0===t.order||null===t.order||isNaN(parseInt(t.order,10))?-1:parseInt(e.order,10)>parseInt(t.order,10)?1:-1}),$widget.fancySystem=$(".translateSystem",$widget.settings.container),$widget.fancySystem.empty(),$.each($widget.settings._systems,function(e,t){$widget.fancySystem.append($("<option/>",{value:t.ID,text:t.Title.Text}))}),null!==$widget.settings._defaultSystem&&$(".translateSystem",$widget.settings.container).val($widget.settings._defaultSystem),$widget.fancySystem.parent().hasClass("fancy-select")||$widget.fancySystem.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,includeBlank:!0,triggerTemplate:function(e){return $widget.activeSystemId!==e.val()&&($widget.activeSystemId=e.val(),$widget.settings._onSystemChanged&&"function"==typeof $widget.settings._onSystemChanged&&$widget.settings._onSystemChanged($widget.activeSystemId),$widget.onSystemChangedHandlers&&$.each($widget.onSystemChangedHandlers,function(e,t){t($widget.activeSystemId)})),e.val()?e.text():"-"}})),"language"===$widget.settings._systemSelectType||"domain"===$widget.settings._systemSelectType){if(($widget.settings._sourceLanguageOrder||$widget.settings._targetLanguageOrder)&&($.each($widget.settings._systems,function(e,t){var n=-1,a=-1;if($widget.settings._sourceLanguageOrder)for(langIndex=0;langIndex<$widget.settings._sourceLanguageOrder.length;langIndex++)$widget.settings._sourceLanguageOrder[langIndex]==t.SourceLanguage.Code&&(n=langIndex);if($widget.settings._targetLanguageOrder)for(langIndex=0;langIndex<$widget.settings._targetLanguageOrder.length;langIndex++)$widget.settings._targetLanguageOrder[langIndex]==t.TargetLanguage.Code&&(a=langIndex);t.order=0,-1<n&&(t.order=t.order+100*n),-1<a&&(t.order=t.order+a)}),$widget.settings._systems.sort(function(e,t){return void 0!==t.order&&null!==t.order&&e.order>t.order?1:-1})),$widget.settings._defaultSystem&&$.each($widget.settings._systems,function(e,t){t.ID===$widget.settings._defaultSystem&&($widget.settings._defaultSourceLang=t.SourceLanguage.Code,$widget.settings._defaultTargetLang=t.TargetLanguage.Code)}),$widget.settings._systems&&$.each($widget.settings._systems,function(e,t){$widget.settings._bootstrap?0===$('.translate-source-language .dropdown-item[data-value="'+t.SourceLanguage.Code+'"]').length&&$(".translate-source-language .dropdown-menu").append($("<button>",{text:uiResources[$widget.settings._language][t.SourceLanguage.Code]?uiResources[$widget.settings._language][t.SourceLanguage.Code]:t.SourceLanguage.Name.Text,class:"dropdown-item p-2 border-md border-md-right-0",type:"button","data-value":t.SourceLanguage.Code})):0==$('.translateSourceLang option[value="'+t.SourceLanguage.Code+'"]',$widget.settings.container).length&&$(".translateSourceLang",$widget.settings.container).append($("<option>",{value:t.SourceLanguage.Code,text:uiResources[$widget.settings._language][t.SourceLanguage.Code]?uiResources[$widget.settings._language][t.SourceLanguage.Code]:t.SourceLanguage.Name.Text}))}),1===$(".translateSourceLang option",$widget.settings.container).length&&$widget.settings._replaceSourceWithBlock){var e=$(".translateSourceLang",$widget.settings.container),t=e.val(),n=e.text();e.replaceWith('<div class="translateSingleSourceLang" data-value="'+t+'">'+n+"</div>"),$widget.loadTargetLangList(t,null,"language"===$widget.settings._systemSelectType)}else if($widget.settings._bootstrap){if(null!==$widget.settings._defaultSourceLang){var a=$('.translate-source-language .dropdown-item[data-value="'+$widget.settings._defaultSourceLang+'"]'),i=$(".translate-source-language .dropdown-toggle");a.addClass("active"),i.attr("data-value",$widget.settings._defaultSourceLang),i.text(a.text());var s=$("translate-target-language").find(".dropdown-toggle").attr("data-value"),o=$("translate-target-language .dropdown-item.active"),r=s;r&&"undefined"!==r||(r=o.attr("data-value"))&&"undefined"!==r||(r=o.attr("lang"))&&"undefined"!==r||(r="undefined"===$widget.settings._defaultTargetLang?null:$widget.settings._defaultTargetLang),$widget.loadTargetLangList(i.attr("data-value"),r,"language"===$widget.settings._systemSelectType)}}else null!==$widget.settings._defaultSourceLang&&$('.translateSourceLang option[value="'+$widget.settings._defaultSourceLang+'"]',$widget.settings.container).attr("selected",!0),$widget.fancySource=$(".translateSourceLang",$widget.settings.container),$widget.fancySource.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,triggerTemplate:function(e){var t=$widget.fancyTarget,n=t&&t.length?t[0].options&&t[0].options.length?t[0].options[t[0].selectedIndex].lang:null:$widget.settings._defaultTargetLang;return $widget.loadTargetLangList(e.val(),n,"language"===$widget.settings._systemSelectType),""!=$widget.settings._customSelectText?$widget.settings._customSelectText:e.text()}});$widget.settings._swapLanguages&&$($widget.settings._swapLanguagesButtonSelector).click(function(){$widget.swapSystemLanguages()})}if("language"===$widget.settings._systemSelectType&&($widget.fancyTarget=$(".translateTargetLang",$widget.settings.container),$widget.fancyTarget.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,triggerTemplate:function(e){return $widget.activeSystemId!==e.val()&&($widget.activeSystemId=e.val(),$widget.settings._swapLanguages&&($widget.checkReverseSystem()?$($widget.settings._swapLanguagesButtonSelector,$widget.settings.container).removeClass("hide"):$($widget.settings._swapLanguagesButtonSelector,$widget.settings.container).addClass("hide")),$widget.settings._onSystemChanged&&"function"==typeof $widget.settings._onSystemChanged&&$widget.settings._onSystemChanged($widget.activeSystemId),$widget.onSystemChangedHandlers&&$.each($widget.onSystemChangedHandlers,function(e,t){t($widget.activeSystemId)})),""!=$widget.settings._customSelectText?$widget.settings._customSelectText:e.text()}})),"domain"===$widget.settings._systemSelectType){if($widget.settings._bootstrap){$(".translate-domain").removeClass("hide");var l=$(".translate-target-language .dropdown-toggle");if(null!==$widget.settings._defaultTargetLang)(a=$('.translate-target-language .dropdown-item[data-value="'+$widget.settings._defaultTargetLang+'"]')).addClass("active"),l.attr("data-value",$widget.settings._defaultTargetLang),l.attr("lang",$widget.settings._defaultTargetLang),l.text(a.text());$widget.loadDomainList($(".translate-source-language .dropdown-toggle").attr("data-value"),l.attr("data-value"))}else $(".translateDomainContainer",$widget.settings.container).removeClass("hide"),null!==$widget.settings._defaultTargetLang&&$('.translateTargetLang option[lang="'+$widget.settings._defaultTargetLang+'"]',$widget.settings.container).val($widget.settings._defaultTargetLang),$widget.fancyTarget=$(".translateTargetLang",$widget.settings.container),$widget.fancyTarget.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,triggerTemplate:function(e){var t=$(".translateSourceLang",$widget.settings.container).val();return 0!==$(".translateSingleSourceLang",$widget.settings.container).length&&(t=$(".translateSingleSourceLang",$widget.settings.container).attr("data-value")),$widget.loadDomainList(t,e.val()),e.text()}});$widget.settings._bootstrap?$widget.activeSystemId=$(".translate-domain .dropdown-toggle-reverse").attr("domain"):(null!==$widget.settings._defaultDomain&&$('.translateDomain option[domain="'+$widget.settings._defaultDomain+'"]',$widget.settings.container).prop("selected",!0),$widget.fancyDomain=$(".translateDomain",$widget.settings.container),$widget.fancyDomain.fancySelect({useNativeSelect:!$widget.settings._useFancySelect,triggerTemplate:function(e){return $widget.activeSystemId!==e.val()&&void 0!==e.val()&&($widget.activeSystemId=e.val(),$widget.settings._onSystemChanged&&"function"==typeof $widget.settings._onSystemChanged&&$widget.settings._onSystemChanged($widget.activeSystemId),$widget.settings._swapLanguages&&($widget.checkReverseSystem()?$($widget.settings._swapLanguagesButtonSelector,$widget.settings.container).removeClass("hide"):$($widget.settings._swapLanguagesButtonSelector,$widget.settings.container).addClass("hide")),$widget.onSystemChangedHandlers&&$.each($widget.onSystemChangedHandlers,function(e,t){t($widget.activeSystemId)})),e.text()}}))}$widget.settings._bootstrap&&$widget.setDropdownItemClickEvents(".translate-source-language")},setDropdownItemClickEvents:function(e){var t=$(e+" .dropdown-item"),n=".translate-domain"===e?$(e+" .dropdown-toggle-reverse"):$(e+" .dropdown-toggle"),a=function(e){switch(e){case".translate-source-language":return function(e,t,n){var a=e.attr("data-value");t.attr("data-value",a),t.attr("lang",e.attr("lang")),t.text(e.text()),n.removeClass("active"),e.addClass("active"),$widget.loadTargetLangList(a,$(".translate-target-language .dropdown-toggle").attr("data-value"))};case".translate-target-language":return function(e,t,n){var a=e.attr("data-value");t.attr("data-value",a),t.attr("lang",e.attr("lang")),t.text(e.text()),n.removeClass("active"),e.addClass("active"),$widget.loadDomainList($(".translate-source-language .dropdown-toggle").attr("data-value"),a)};case".translate-domain":return function(e,t,n){var a=e.attr("domain");t.attr("domain",a),t.attr("data-value",e.attr("data-value")),t.find(".name").text(e.text()),n.removeClass("active"),e.addClass("active"),$widget.activeSystemId=a}}}(e);t.click(function(){a($(this),n,t),$widget.settings._onSystemChanged&&"function"==typeof $widget.settings._onSystemChanged&&$widget.settings._onSystemChanged($widget.activeSystemId),$widget.onSystemChangedHandlers&&$.each($widget.onSystemChangedHandlers,function(e,t){t($widget.activeSystemId)})})},onWidgetActivated:function(){$(document).trigger("resize")},initWidgetTemplate:function(){if($widget.onWidgetActivated(),null!==$widget.settings._templateId||""!==$widget.settings._templateId)if($widget.settings._replaceContainer){var e=$("#"+$widget.settings._templateId).html(),t=$widget.settings.container;$(e).insertBefore($widget.settings.container),$widget.settings.container=$widget.settings.container.parent(),t.remove()}else $widget.settings.container.html($("#"+$widget.settings._templateId).html());$widget.settings._onWidgetTemplateLoaded&&"function"==typeof $widget.settings._onWidgetTemplateLoaded&&$widget.settings._onWidgetTemplateLoaded()},initWidgetLanguage:function(){uiResources[$widget.settings._language]=$.extend(uiResources[$widget.settings._language],$widget.settings._translations[$widget.settings._language]),$.each(uiResources[$widget.settings._language],function(e,t){$('[data-text="'+e+'"]',$widget.settings.container).text(t),$('[data-html="'+e+'"]',$widget.settings.container).html(t),$('[data-title="'+e+'"]',$widget.settings.container).attr("title",t),$('[data-aria-label="'+e+'"]',$widget.settings.container).attr("aria-label",t)})},setActiveSystem:function(n){if(n!==$widget.activeSystemId){$widget.activeSystemId=n;var a="",i="";if(null!==$widget.settings._systems&&$.each($widget.settings._systems,function(e,t){if(t.ID===n)return a=t.SourceLanguage.Code,i=t.TargetLanguage.Code,!1}),"language"===$widget.settings._systemSelectType||"domain"===$widget.settings._systemSelectType){if($widget.settings._bootstrap){var e=$(".translate-source-language"),t=e.find(".dropdown-toggle"),s=e.find('.dropdown-item[data-value="'+a+'"]');e.find(".dropdown-item.active").removeClass("active"),t.attr("data-value",a),t.text(s.text()),s.addClass("active")}else $('.translateSourceLang option[selected="selected"]',$widget.settings.container).removeAttr("selected"),$('.translateSourceLang option[value="'+a+'"]',$widget.settings.container).prop("selected",!0);"language"===$widget.settings._systemSelectType?$widget.loadTargetLangList(a,i,!0):"domain"===$widget.settings._systemSelectType&&$widget.loadTargetLangList(a,i),$widget.settings._bootstrap||null!==$widget.fancySource&&$widget.fancySource.trigger("change.fs")}else $('.translateSystem option[selected="selected"]',$widget.settings.container).removeAttr("selected"),$('.translateSystem option[value="'+n+'"]',$widget.settings.container).prop("selected",!0),$(".translateSystem.fancified",$widget.settings.container)&&$(".translateSystem.fancified",$widget.settings.container).trigger("update.fs");$widget.settings._onSystemChanged&&"function"==typeof $widget.settings._onSystemChanged&&$widget.settings._onSystemChanged($widget.activeSystemId),$widget.onSystemChangedHandlers&&$.each($widget.onSystemChangedHandlers,function(e,t){t($widget.activeSystemId)})}},getActiveSystemObj:function(){if(!$widget.settings._systems)return null;var n=null;return $.each($widget.settings._systems,function(e,t){if(t.ID===$widget.activeSystemId)return n=t,!1}),n},checkReverseSystem:function(){return null!==$widget.getReverseSystem()},swapSystemLanguages:function(){var e=$widget.getReverseSystem();e&&$widget.setActiveSystem(e.ID)},getReverseSystem:function(){if(!$widget.settings._systems)return null;var n=$widget.getActiveSystemObj(),a=null;return $.each($widget.settings._systems,function(e,t){t.SourceLanguage.Code!==n.TargetLanguage.Code||t.TargetLanguage.Code!==n.SourceLanguage.Code||t.Domain!==n.Domain&&null!==a||(a=t)}),a},disableSystemChange:function(){$($widget.settings._swapLanguagesButtonSelector).attr("data-disabled",!0),$widget.fancySource&&$widget.fancySource.trigger("disable"),$widget.fancyTarget&&$widget.fancyTarget.trigger("disable"),$widget.fancyDomain&&$widget.fancyDomain.trigger("disable"),$widget.fancySystem&&$widget.fancySystem.trigger("disable"),$widget.terminology&&$widget.terminology.trigger("disable")},enableSystemChange:function(){$($widget.settings._swapLanguagesButtonSelector).attr("data-disabled",!1),$widget.fancySource&&$widget.fancySource.trigger("enable"),$widget.fancyTarget&&$widget.fancyTarget.trigger("enable"),$widget.fancyDomain&&$widget.fancyDomain.trigger("enable"),$widget.fancySystem&&$widget.fancySystem.trigger("enable"),$widget.terminology&&$widget.terminology.trigger("enable")},loadTargetLangList:function(n,e,a){if($widget.settings._bootstrap?$(".translate-target-language .dropdown-menu").empty():$(".translateTargetLang",$widget.settings.container).empty(),$widget.settings._systems&&$.each($widget.settings._systems,function(e,t){t.SourceLanguage.Code===n&&(a?$widget.settings._bootstrap?0===$('.translate-target-language .dropdown-item[data-value="'+t.TargetLanguage.Code+'"]').length&&$(".translate-target-language .dropdown-menu").append($("<button>",{text:uiResources[$widget.settings._language][t.TargetLanguage.Code]?uiResources[$widget.settings._language][t.TargetLanguage.Code]:t.TargetLanguage.Name.Text,class:"dropdown-item p-2 border-md border-md-right-0",type:"button","data-value":t.ID,lang:t.TargetLanguage.Code})):0===$('.translateTargetLang option[lang="'+t.TargetLanguage.Code+'"]',$widget.settings.container).length&&$(".translateTargetLang",$widget.settings.container).append($("<option>",{value:t.ID,text:uiResources[$widget.settings._language][t.TargetLanguage.Code]?uiResources[$widget.settings._language][t.TargetLanguage.Code]:t.TargetLanguage.Name.Text,lang:t.TargetLanguage.Code})):"domain"===$widget.settings._systemSelectType&&$widget.settings._useRecentLangSelector?$widget.settings._bootstrap?0===$('.translate-target-language .dropdown-item[data-value="'+t.TargetLanguage.Code+'"]').length&&$(".translate-target-language .dropdown-menu").append($("<button>",{text:uiResources[$widget.settings._language][t.TargetLanguage.Code]?uiResources[$widget.settings._language][t.TargetLanguage.Code]:t.TargetLanguage.Name.Text,class:"dropdown-item p-2 border-md border-md-right-0",type:"button","data-value":t.TargetLanguage.Code,lang:t.TargetLanguage.Code})):0===$('.translateTargetLang option[value="'+t.TargetLanguage.Code+'"]',$widget.settings.container).length&&$(".translateTargetLang",$widget.settings.container).append($("<option>",{value:t.TargetLanguage.Code,text:uiResources[$widget.settings._language][t.TargetLanguage.Code]?uiResources[$widget.settings._language][t.TargetLanguage.Code]:t.TargetLanguage.Name.Text,lang:t.TargetLanguage.Code})):$widget.settings._bootstrap?0===$('.translate-target-language .dropdown-item[data-value="'+t.TargetLanguage.Code+'"]').length&&$(".translate-target-language .dropdown-menu").append($("<button>",{text:uiResources[$widget.settings._language][t.TargetLanguage.Code]?uiResources[$widget.settings._language][t.TargetLanguage.Code]:t.TargetLanguage.Name.Text,class:"dropdown-item",type:"button","data-value":t.TargetLanguage.Code})):0===$('.translateTargetLang option[lang="'+t.TargetLanguage.Code+'"]',$widget.settings.container).length&&$(".translateTargetLang",$widget.settings.container).append($("<option>",{value:t.TargetLanguage.Code,text:uiResources[$widget.settings._language][t.TargetLanguage.Code]?uiResources[$widget.settings._language][t.TargetLanguage.Code]:t.TargetLanguage.Name.Text})))}),null!=e)if($widget.settings._bootstrap){var t=$(".translate-target-language"),i=t.find('.dropdown-item[data-value="'+e+'"]'),s=t.find(".dropdown-toggle");i.length||(e=(i=t.find('.dropdown-item[data-value="'+$widget.settings._defaultTargetLang+'"]')).attr("data-value"),i.length||(e=(i=t.find(".dropdown-item:first")).attr("data-value"))),i.addClass("active"),s.attr("data-value",i.attr("data-value")),s.attr("lang",i.attr("lang")),s.text(i.text()),$widget.loadDomainList(n,e),$widget.setDropdownItemClickEvents(".translate-target-language")}else{var o=$('.translateTargetLang option[lang="'+e+'"]',$widget.settings.container);1==o.length?$(o[0]).prop("selected",!0):$widget.settings._defaultTargetLang&&$('.translateTargetLang option[lang="'+$widget.settings._defaultTargetLang+'"]',$widget.settings.container).prop("selected",!0),null!==$widget.fancyTarget&&$widget.fancyTarget.trigger("update.fs")}},loadDomainList:function(a,i){var e=!0;if($widget.settings._bootstrap){var t=$(".translate-domain"),n=t.find(".dropdown-toggle-reverse"),s=t.find(".dropdown-menu"),o=n.attr("data-value");0!==t.find(".dropdown-item.active").length&&(e=!1),s.empty(),$.each($widget.settings._systems,function(e,t){if(t.SourceLanguage.Code===a&&t.TargetLanguage.Code===i){var n=t.Domain;$widget.settings._localizeMTSystems&&void 0!==uiResources[$widget.settings._language]["MTSystem-"+t.Domain]&&(n=uiResources[$widget.settings._language]["MTSystem-"+t.Domain]),s.append($("<button>",{"data-value":t.Domain,type:"button",class:"dropdown-item",domain:t.ID,text:n}))}});var r=s.find('.dropdown-item[data-value="'+o+'"]');(e||0===r.length)&&(r=s.find(".dropdown-item:first")),n.attr("data-value",r.attr("data-value")),n.attr("domain",r.attr("domain")),n.find(".name").text(r.text()),r.addClass("active"),$widget.activeSystemId=r.attr("domain"),$widget.setDropdownItemClickEvents(".translate-domain")}else{var l="";0!==$(".translateDomain option:selected",$widget.settings.container).length&&(l=$(".translateDomain option:selected",$widget.settings.container).attr("domain")),$(".translateDomain",$widget.settings.container).empty(),$.each($widget.settings._systems,function(e,t){if(t.SourceLanguage.Code===a&&t.TargetLanguage.Code===i){var n=t.Domain;$widget.settings._localizeMTSystems&&void 0!==uiResources[$widget.settings._language]["MTSystem-"+t.Domain]&&(n=uiResources[$widget.settings._language]["MTSystem-"+t.Domain]),$(".translateDomain",$widget.settings.container).append($("<option>",{value:t.ID,domain:t.Domain,text:n}))}}),""===l?$(".translateDomain",$widget.settings.container).val($(".translateDomain option:first",$widget.settings.container).val()):$('.translateDomain option[domain="'+l+'"]',$widget.settings.container).prop("selected",!0),null!==$widget.fancyDomain&&$widget.fancyDomain.trigger("update.fs")}},readCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}},function(){var g;(g=window.jQuery||window.Zepto||window.$).fn.fancySelect=function(e){var r,l=!1,d=!1;return null==e&&(e={}),r=g.extend({useNativeSelect:!1,includeBlank:!1,optionTemplate:function(e){return e.text()},triggerTemplate:function(e){return e.text()}},e),this.each(function(){var e,t,i,a,s,n,o;if(!(a=g(this)).hasClass("fancified")&&"SELECT"===a[0].tagName)return a.addClass("fancified"),r.useNativeSelect?a.css({display:"block",position:"absolute",top:0,left:0,opacity:0}):a.css({width:1,height:1,display:"block",position:"absolute",top:0,left:0,opacity:0}),a.wrap('<div class="fancy-select">'),o=a.parent(),a.data("class")&&o.addClass(a.data("class")),o.append('<div class="trigger">'),r.useNativeSelect||o.append('<ul class="options">'),s=o.find(".trigger"),i=o.find(".options"),(t=a.prop("disabled"))&&o.addClass("disabled"),n=function(){var e;return e=r.triggerTemplate(a.find(":selected")),s.html(e)},a.on("blur.fs",function(){if(!l)return d&&!l?(d=!1,void a.focus()):s.hasClass("open")?s.trigger("close.fs"):void 0}),s.on("close.fs",function(){return l=!1,s.removeClass("open"),i.removeClass("open")}),s.on("mousedown.fs",function(){l=!0}),s.on("click.fs",function(){var e;if(l=!1,!t)if(s.toggleClass("open"),r.useNativeSelect){if(s.hasClass("open"))return a.focus()}else if(s.hasClass("open")&&((e=s.parent()).offsetParent(),e.offset().top+e.outerHeight()+i.outerHeight()+20>g(window).height()+g(window).scrollTop()?i.addClass("overflowing"):i.removeClass("overflowing")),i.toggleClass("open"),!r.useNativeSelect)return a.focus()}),a.on("enable",function(){return a.prop("disabled",!1),o.removeClass("disabled"),t=!1}),a.on("disable",function(){return a.prop("disabled",!0),o.addClass("disabled"),t=!0}),a.on("change.fs",function(e){return r.useNativeSelect?n():e.originalEvent&&e.originalEvent.isTrusted?e.stopPropagation():n()}),a.on("keydown",function(e){var t,n,a;if(a=e.which,(t=i.find(".hover")).removeClass("hover"),i.hasClass("open")){if(38===a?(e.preventDefault(),t.length&&0<t.index()?t.prev().addClass("hover"):i.find("li:last-child").addClass("hover")):40===a?(e.preventDefault(),t.length&&t.index()<i.find("li").length-1?t.next().addClass("hover"):i.find("li:first-child").addClass("hover")):27===a?(e.preventDefault(),s.trigger("click.fs")):13===a||32===a?(e.preventDefault(),t.trigger("click.fs")):9===a&&s.hasClass("open")&&s.trigger("close.fs"),(n=i.find(".hover")).length)return i.scrollTop(0),i.scrollTop(n.position().top-12)}else if(13===a||32===a||38===a||40===a)return e.preventDefault(),s.trigger("click.fs")}),i.on("click.fs","li",function(e){var t;t=g(this),a.val(t.data("raw-value")),r.useNativeSelect||a.trigger("blur.fs").trigger("focus.fs"),i.find(".selected").removeClass("selected"),t.addClass("selected"),s.addClass("selected");var n=a.val(t.data("raw-value")).trigger("change.fs").trigger("blur.fs").trigger("focus.fs");return d=l=!1,n}),i.on("mousedown",function(){d=!0}),i.on("mouseup",function(){d&&(d=!1,a.focus()),l=!1}),i.on("mousedown.fs","li",function(){l=!0}),i.on("mouseenter.fs","li",function(){var e;return e=g(this),i.find(".hover").removeClass("hover"),e.addClass("hover")}),i.on("mouseleave.fs","li",function(){return i.find(".hover").removeClass("hover")}),e=function(){if(n(),!r.useNativeSelect)return a.find("option"),a.find("option").each(function(e,t){var n;if(!(t=g(t)).prop("disabled")&&(t.val()||r.includeBlank))return n=r.optionTemplate(t),t.prop("selected")?i.append('<li data-raw-value="'+t.val()+'" class="selected">'+n+"</li>"):i.append('<li data-raw-value="'+t.val()+'">'+n+"</li>")})},a.on("update.fs",function(){return o.find(".options").empty(),e()}),e()})}}.call(this);var qq=qq||{};qq.extend=function(e,t){for(var n in t)e[n]=t[n]},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var a=e.length;for(n<0&&(n+=a);n<a;n++)if(n in e&&e[n]===t)return n;return-1},qq.getUniqueId=function(){var e=0;return function(){return e++}}(),qq.attach=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},qq.detach=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n)},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.insertBefore=function(e,t){t.parentNode.insertBefore(e,t)},qq.remove=function(e){e.parentNode.removeChild(e)},qq.contains=function(e,t){return e==t||(e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e)))},qq.toElement=function(){var n=document.createElement("div");return function(e){n.innerHTML=e;var t=n.firstChild;return n.removeChild(t),t}}(),qq.css=function(e,t){null!=t.opacity&&"string"!=typeof e.style.opacity&&void 0!==e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t)},qq.hasClass=function(e,t){return new RegExp("(^| )"+t+"( |$)").test(e.className)},qq.addClass=function(e,t){qq.hasClass(e,t)||(e.className+=" "+t)},qq.removeClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,"")},qq.setText=function(e,t){e.innerText=t,e.textContent=t},qq.children=function(e){for(var t=[],n=e.firstChild;n;)1==n.nodeType&&t.push(n),n=n.nextSibling;return t},qq.getByClass=function(e,t){if(e.querySelectorAll)return e.querySelectorAll("."+t);for(var n=[],a=e.getElementsByTagName("*"),i=a.length,s=0;s<i;s++)qq.hasClass(a[s],t)&&n.push(a[s]);return n},qq.obj2url=function(e,a,t){var i=[],n="&",s=function(e,t){var n=a?/\[\]$/.test(a)?a:a+"["+t+"]":t;"undefined"!=n&&"undefined"!=t&&i.push("object"==typeof e?qq.obj2url(e,n,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(n)+"="+encodeURIComponent(e()):encodeURIComponent(n)+"="+encodeURIComponent(e))};if(!t&&a)n=/\?/.test(a)?/\?$/.test(a)?"":"&":"?",i.push(a),i.push(qq.obj2url(e));else if("[object Array]"===Object.prototype.toString.call(e)&&void 0!==e)for(var o=0,r=e.length;o<r;++o)s(e[o],o);else if(null!=e&&"object"==typeof e)for(var o in e)s(e[o],o);else i.push(encodeURIComponent(a)+"="+encodeURIComponent(e));return i.join(n).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};function GraphemeSplitter(){var d=0,g=1,u=2,c=3,p=4,h=5,m=6,$=7,f=8,w=9,v=10,_=12,T=13,y=14,S=15,b=16,x=17,C=0,L=1,k=2,E=3,I=4;function l(e,t){void 0===t&&(t=0);var n=e.charCodeAt(t);if(55296<=n&&n<=56319&&t<e.length-1){var a=n;return 56320<=(i=e.charCodeAt(t+1))&&i<=57343?1024*(a-55296)+(i-56320)+65536:a}if(56320<=n&&n<=57343&&1<=t){var i=n;return 55296<=(a=e.charCodeAt(t-1))&&a<=56319?1024*(a-55296)+(i-56320)+65536:i}return n}function q(e,t,n){var a=[e].concat(t).concat([n]),i=a[a.length-2],s=n,o=a.lastIndexOf(y);if(1<o&&a.slice(1,o).every(function(e){return e==c})&&-1==[c,T,x].indexOf(e))return k;var r=a.lastIndexOf(p);if(0<r&&a.slice(1,r).every(function(e){return e==p})&&-1==[_,p].indexOf(i))return a.filter(function(e){return e==p}).length%2==1?E:I;if(i==d&&s==g)return C;if(i==u||i==d||i==g)return s==y&&t.every(function(e){return e==c})?k:L;if(s==u||s==d||s==g)return L;if(i==m&&(s==m||s==$||s==w||s==v))return C;if(!(i!=w&&i!=$||s!=$&&s!=f))return C;if((i==v||i==f)&&s==f)return C;if(s==c||s==S)return C;if(s==h)return C;if(i==_)return C;var l=-1!=a.indexOf(c)?a.lastIndexOf(c)-1:a.length-2;return-1!=[T,x].indexOf(a[l])&&a.slice(l+1,-1).every(function(e){return e==c})&&s==y?C:i==S&&-1!=[b,x].indexOf(s)?C:-1!=t.indexOf(p)?k:i==p&&s==p?C:L}function D(e){return 1536<=e&&e<=1541||1757==e||1807==e||2274==e||3406==e||69821==e||70082<=e&&e<=70083||72250==e||72326<=e&&e<=72329||73030==e?_:13==e?d:10==e?g:0<=e&&e<=9||11<=e&&e<=12||14<=e&&e<=31||127<=e&&e<=159||173==e||1564==e||6158==e||8203==e||8206<=e&&e<=8207||8232==e||8233==e||8234<=e&&e<=8238||8288<=e&&e<=8292||8293==e||8294<=e&&e<=8303||55296<=e&&e<=57343||65279==e||65520<=e&&e<=65528||65529<=e&&e<=65531||113824<=e&&e<=113827||119155<=e&&e<=119162||917504==e||917505==e||917506<=e&&e<=917535||917632<=e&&e<=917759||918e3<=e&&e<=921599?u:768<=e&&e<=879||1155<=e&&e<=1159||1160<=e&&e<=1161||1425<=e&&e<=1469||1471==e||1473<=e&&e<=1474||1476<=e&&e<=1477||1479==e||1552<=e&&e<=1562||1611<=e&&e<=1631||1648==e||1750<=e&&e<=1756||1759<=e&&e<=1764||1767<=e&&e<=1768||1770<=e&&e<=1773||1809==e||1840<=e&&e<=1866||1958<=e&&e<=1968||2027<=e&&e<=2035||2070<=e&&e<=2073||2075<=e&&e<=2083||2085<=e&&e<=2087||2089<=e&&e<=2093||2137<=e&&e<=2139||2260<=e&&e<=2273||2275<=e&&e<=2306||2362==e||2364==e||2369<=e&&e<=2376||2381==e||2385<=e&&e<=2391||2402<=e&&e<=2403||2433==e||2492==e||2494==e||2497<=e&&e<=2500||2509==e||2519==e||2530<=e&&e<=2531||2561<=e&&e<=2562||2620==e||2625<=e&&e<=2626||2631<=e&&e<=2632||2635<=e&&e<=2637||2641==e||2672<=e&&e<=2673||2677==e||2689<=e&&e<=2690||2748==e||2753<=e&&e<=2757||2759<=e&&e<=2760||2765==e||2786<=e&&e<=2787||2810<=e&&e<=2815||2817==e||2876==e||2878==e||2879==e||2881<=e&&e<=2884||2893==e||2902==e||2903==e||2914<=e&&e<=2915||2946==e||3006==e||3008==e||3021==e||3031==e||3072==e||3134<=e&&e<=3136||3142<=e&&e<=3144||3146<=e&&e<=3149||3157<=e&&e<=3158||3170<=e&&e<=3171||3201==e||3260==e||3263==e||3266==e||3270==e||3276<=e&&e<=3277||3285<=e&&e<=3286||3298<=e&&e<=3299||3328<=e&&e<=3329||3387<=e&&e<=3388||3390==e||3393<=e&&e<=3396||3405==e||3415==e||3426<=e&&e<=3427||3530==e||3535==e||3538<=e&&e<=3540||3542==e||3551==e||3633==e||3636<=e&&e<=3642||3655<=e&&e<=3662||3761==e||3764<=e&&e<=3769||3771<=e&&e<=3772||3784<=e&&e<=3789||3864<=e&&e<=3865||3893==e||3895==e||3897==e||3953<=e&&e<=3966||3968<=e&&e<=3972||3974<=e&&e<=3975||3981<=e&&e<=3991||3993<=e&&e<=4028||4038==e||4141<=e&&e<=4144||4146<=e&&e<=4151||4153<=e&&e<=4154||4157<=e&&e<=4158||4184<=e&&e<=4185||4190<=e&&e<=4192||4209<=e&&e<=4212||4226==e||4229<=e&&e<=4230||4237==e||4253==e||4957<=e&&e<=4959||5906<=e&&e<=5908||5938<=e&&e<=5940||5970<=e&&e<=5971||6002<=e&&e<=6003||6068<=e&&e<=6069||6071<=e&&e<=6077||6086==e||6089<=e&&e<=6099||6109==e||6155<=e&&e<=6157||6277<=e&&e<=6278||6313==e||6432<=e&&e<=6434||6439<=e&&e<=6440||6450==e||6457<=e&&e<=6459||6679<=e&&e<=6680||6683==e||6742==e||6744<=e&&e<=6750||6752==e||6754==e||6757<=e&&e<=6764||6771<=e&&e<=6780||6783==e||6832<=e&&e<=6845||6846==e||6912<=e&&e<=6915||6964==e||6966<=e&&e<=6970||6972==e||6978==e||7019<=e&&e<=7027||7040<=e&&e<=7041||7074<=e&&e<=7077||7080<=e&&e<=7081||7083<=e&&e<=7085||7142==e||7144<=e&&e<=7145||7149==e||7151<=e&&e<=7153||7212<=e&&e<=7219||7222<=e&&e<=7223||7376<=e&&e<=7378||7380<=e&&e<=7392||7394<=e&&e<=7400||7405==e||7412==e||7416<=e&&e<=7417||7616<=e&&e<=7673||7675<=e&&e<=7679||8204==e||8400<=e&&e<=8412||8413<=e&&e<=8416||8417==e||8418<=e&&e<=8420||8421<=e&&e<=8432||11503<=e&&e<=11505||11647==e||11744<=e&&e<=11775||12330<=e&&e<=12333||12334<=e&&e<=12335||12441<=e&&e<=12442||42607==e||42608<=e&&e<=42610||42612<=e&&e<=42621||42654<=e&&e<=42655||42736<=e&&e<=42737||43010==e||43014==e||43019==e||43045<=e&&e<=43046||43204<=e&&e<=43205||43232<=e&&e<=43249||43302<=e&&e<=43309||43335<=e&&e<=43345||43392<=e&&e<=43394||43443==e||43446<=e&&e<=43449||43452==e||43493==e||43561<=e&&e<=43566||43569<=e&&e<=43570||43573<=e&&e<=43574||43587==e||43596==e||43644==e||43696==e||43698<=e&&e<=43700||43703<=e&&e<=43704||43710<=e&&e<=43711||43713==e||43756<=e&&e<=43757||43766==e||44005==e||44008==e||44013==e||64286==e||65024<=e&&e<=65039||65056<=e&&e<=65071||65438<=e&&e<=65439||66045==e||66272==e||66422<=e&&e<=66426||68097<=e&&e<=68099||68101<=e&&e<=68102||68108<=e&&e<=68111||68152<=e&&e<=68154||68159==e||68325<=e&&e<=68326||69633==e||69688<=e&&e<=69702||69759<=e&&e<=69761||69811<=e&&e<=69814||69817<=e&&e<=69818||69888<=e&&e<=69890||69927<=e&&e<=69931||69933<=e&&e<=69940||70003==e||70016<=e&&e<=70017||70070<=e&&e<=70078||70090<=e&&e<=70092||70191<=e&&e<=70193||70196==e||70198<=e&&e<=70199||70206==e||70367==e||70371<=e&&e<=70378||70400<=e&&e<=70401||70460==e||70462==e||70464==e||70487==e||70502<=e&&e<=70508||70512<=e&&e<=70516||70712<=e&&e<=70719||70722<=e&&e<=70724||70726==e||70832==e||70835<=e&&e<=70840||70842==e||70845==e||70847<=e&&e<=70848||70850<=e&&e<=70851||71087==e||71090<=e&&e<=71093||71100<=e&&e<=71101||71103<=e&&e<=71104||71132<=e&&e<=71133||71219<=e&&e<=71226||71229==e||71231<=e&&e<=71232||71339==e||71341==e||71344<=e&&e<=71349||71351==e||71453<=e&&e<=71455||71458<=e&&e<=71461||71463<=e&&e<=71467||72193<=e&&e<=72198||72201<=e&&e<=72202||72243<=e&&e<=72248||72251<=e&&e<=72254||72263==e||72273<=e&&e<=72278||72281<=e&&e<=72283||72330<=e&&e<=72342||72344<=e&&e<=72345||72752<=e&&e<=72758||72760<=e&&e<=72765||72767==e||72850<=e&&e<=72871||72874<=e&&e<=72880||72882<=e&&e<=72883||72885<=e&&e<=72886||73009<=e&&e<=73014||73018==e||73020<=e&&e<=73021||73023<=e&&e<=73029||73031==e||92912<=e&&e<=92916||92976<=e&&e<=92982||94095<=e&&e<=94098||113821<=e&&e<=113822||119141==e||119143<=e&&e<=119145||119150<=e&&e<=119154||119163<=e&&e<=119170||119173<=e&&e<=119179||119210<=e&&e<=119213||119362<=e&&e<=119364||121344<=e&&e<=121398||121403<=e&&e<=121452||121461==e||121476==e||121499<=e&&e<=121503||121505<=e&&e<=121519||122880<=e&&e<=122886||122888<=e&&e<=122904||122907<=e&&e<=122913||122915<=e&&e<=122916||122918<=e&&e<=122922||125136<=e&&e<=125142||125252<=e&&e<=125258||917536<=e&&e<=917631||917760<=e&&e<=917999?c:127462<=e&&e<=127487?p:2307==e||2363==e||2366<=e&&e<=2368||2377<=e&&e<=2380||2382<=e&&e<=2383||2434<=e&&e<=2435||2495<=e&&e<=2496||2503<=e&&e<=2504||2507<=e&&e<=2508||2563==e||2622<=e&&e<=2624||2691==e||2750<=e&&e<=2752||2761==e||2763<=e&&e<=2764||2818<=e&&e<=2819||2880==e||2887<=e&&e<=2888||2891<=e&&e<=2892||3007==e||3009<=e&&e<=3010||3014<=e&&e<=3016||3018<=e&&e<=3020||3073<=e&&e<=3075||3137<=e&&e<=3140||3202<=e&&e<=3203||3262==e||3264<=e&&e<=3265||3267<=e&&e<=3268||3271<=e&&e<=3272||3274<=e&&e<=3275||3330<=e&&e<=3331||3391<=e&&e<=3392||3398<=e&&e<=3400||3402<=e&&e<=3404||3458<=e&&e<=3459||3536<=e&&e<=3537||3544<=e&&e<=3550||3570<=e&&e<=3571||3635==e||3763==e||3902<=e&&e<=3903||3967==e||4145==e||4155<=e&&e<=4156||4182<=e&&e<=4183||4228==e||6070==e||6078<=e&&e<=6085||6087<=e&&e<=6088||6435<=e&&e<=6438||6441<=e&&e<=6443||6448<=e&&e<=6449||6451<=e&&e<=6456||6681<=e&&e<=6682||6741==e||6743==e||6765<=e&&e<=6770||6916==e||6965==e||6971==e||6973<=e&&e<=6977||6979<=e&&e<=6980||7042==e||7073==e||7078<=e&&e<=7079||7082==e||7143==e||7146<=e&&e<=7148||7150==e||7154<=e&&e<=7155||7204<=e&&e<=7211||7220<=e&&e<=7221||7393==e||7410<=e&&e<=7411||7415==e||43043<=e&&e<=43044||43047==e||43136<=e&&e<=43137||43188<=e&&e<=43203||43346<=e&&e<=43347||43395==e||43444<=e&&e<=43445||43450<=e&&e<=43451||43453<=e&&e<=43456||43567<=e&&e<=43568||43571<=e&&e<=43572||43597==e||43755==e||43758<=e&&e<=43759||43765==e||44003<=e&&e<=44004||44006<=e&&e<=44007||44009<=e&&e<=44010||44012==e||69632==e||69634==e||69762==e||69808<=e&&e<=69810||69815<=e&&e<=69816||69932==e||70018==e||70067<=e&&e<=70069||70079<=e&&e<=70080||70188<=e&&e<=70190||70194<=e&&e<=70195||70197==e||70368<=e&&e<=70370||70402<=e&&e<=70403||70463==e||70465<=e&&e<=70468||70471<=e&&e<=70472||70475<=e&&e<=70477||70498<=e&&e<=70499||70709<=e&&e<=70711||70720<=e&&e<=70721||70725==e||70833<=e&&e<=70834||70841==e||70843<=e&&e<=70844||70846==e||70849==e||71088<=e&&e<=71089||71096<=e&&e<=71099||71102==e||71216<=e&&e<=71218||71227<=e&&e<=71228||71230==e||71340==e||71342<=e&&e<=71343||71350==e||71456<=e&&e<=71457||71462==e||72199<=e&&e<=72200||72249==e||72279<=e&&e<=72280||72343==e||72751==e||72766==e||72873==e||72881==e||72884==e||94033<=e&&e<=94078||119142==e||119149==e?h:4352<=e&&e<=4447||43360<=e&&e<=43388?m:4448<=e&&e<=4519||55216<=e&&e<=55238?$:4520<=e&&e<=4607||55243<=e&&e<=55291?f:44032==e||44060==e||44088==e||44116==e||44144==e||44172==e||44200==e||44228==e||44256==e||44284==e||44312==e||44340==e||44368==e||44396==e||44424==e||44452==e||44480==e||44508==e||44536==e||44564==e||44592==e||44620==e||44648==e||44676==e||44704==e||44732==e||44760==e||44788==e||44816==e||44844==e||44872==e||44900==e||44928==e||44956==e||44984==e||45012==e||45040==e||45068==e||45096==e||45124==e||45152==e||45180==e||45208==e||45236==e||45264==e||45292==e||45320==e||45348==e||45376==e||45404==e||45432==e||45460==e||45488==e||45516==e||45544==e||45572==e||45600==e||45628==e||45656==e||45684==e||45712==e||45740==e||45768==e||45796==e||45824==e||45852==e||45880==e||45908==e||45936==e||45964==e||45992==e||46020==e||46048==e||46076==e||46104==e||46132==e||46160==e||46188==e||46216==e||46244==e||46272==e||46300==e||46328==e||46356==e||46384==e||46412==e||46440==e||46468==e||46496==e||46524==e||46552==e||46580==e||46608==e||46636==e||46664==e||46692==e||46720==e||46748==e||46776==e||46804==e||46832==e||46860==e||46888==e||46916==e||46944==e||46972==e||47e3==e||47028==e||47056==e||47084==e||47112==e||47140==e||47168==e||47196==e||47224==e||47252==e||47280==e||47308==e||47336==e||47364==e||47392==e||47420==e||47448==e||47476==e||47504==e||47532==e||47560==e||47588==e||47616==e||47644==e||47672==e||47700==e||47728==e||47756==e||47784==e||47812==e||47840==e||47868==e||47896==e||47924==e||47952==e||47980==e||48008==e||48036==e||48064==e||48092==e||48120==e||48148==e||48176==e||48204==e||48232==e||48260==e||48288==e||48316==e||48344==e||48372==e||48400==e||48428==e||48456==e||48484==e||48512==e||48540==e||48568==e||48596==e||48624==e||48652==e||48680==e||48708==e||48736==e||48764==e||48792==e||48820==e||48848==e||48876==e||48904==e||48932==e||48960==e||48988==e||49016==e||49044==e||49072==e||49100==e||49128==e||49156==e||49184==e||49212==e||49240==e||49268==e||49296==e||49324==e||49352==e||49380==e||49408==e||49436==e||49464==e||49492==e||49520==e||49548==e||49576==e||49604==e||49632==e||49660==e||49688==e||49716==e||49744==e||49772==e||49800==e||49828==e||49856==e||49884==e||49912==e||49940==e||49968==e||49996==e||50024==e||50052==e||50080==e||50108==e||50136==e||50164==e||50192==e||50220==e||50248==e||50276==e||50304==e||50332==e||50360==e||50388==e||50416==e||50444==e||50472==e||50500==e||50528==e||50556==e||50584==e||50612==e||50640==e||50668==e||50696==e||50724==e||50752==e||50780==e||50808==e||50836==e||50864==e||50892==e||50920==e||50948==e||50976==e||51004==e||51032==e||51060==e||51088==e||51116==e||51144==e||51172==e||51200==e||51228==e||51256==e||51284==e||51312==e||51340==e||51368==e||51396==e||51424==e||51452==e||51480==e||51508==e||51536==e||51564==e||51592==e||51620==e||51648==e||51676==e||51704==e||51732==e||51760==e||51788==e||51816==e||51844==e||51872==e||51900==e||51928==e||51956==e||51984==e||52012==e||52040==e||52068==e||52096==e||52124==e||52152==e||52180==e||52208==e||52236==e||52264==e||52292==e||52320==e||52348==e||52376==e||52404==e||52432==e||52460==e||52488==e||52516==e||52544==e||52572==e||52600==e||52628==e||52656==e||52684==e||52712==e||52740==e||52768==e||52796==e||52824==e||52852==e||52880==e||52908==e||52936==e||52964==e||52992==e||53020==e||53048==e||53076==e||53104==e||53132==e||53160==e||53188==e||53216==e||53244==e||53272==e||53300==e||53328==e||53356==e||53384==e||53412==e||53440==e||53468==e||53496==e||53524==e||53552==e||53580==e||53608==e||53636==e||53664==e||53692==e||53720==e||53748==e||53776==e||53804==e||53832==e||53860==e||53888==e||53916==e||53944==e||53972==e||54e3==e||54028==e||54056==e||54084==e||54112==e||54140==e||54168==e||54196==e||54224==e||54252==e||54280==e||54308==e||54336==e||54364==e||54392==e||54420==e||54448==e||54476==e||54504==e||54532==e||54560==e||54588==e||54616==e||54644==e||54672==e||54700==e||54728==e||54756==e||54784==e||54812==e||54840==e||54868==e||54896==e||54924==e||54952==e||54980==e||55008==e||55036==e||55064==e||55092==e||55120==e||55148==e||55176==e?w:44033<=e&&e<=44059||44061<=e&&e<=44087||44089<=e&&e<=44115||44117<=e&&e<=44143||44145<=e&&e<=44171||44173<=e&&e<=44199||44201<=e&&e<=44227||44229<=e&&e<=44255||44257<=e&&e<=44283||44285<=e&&e<=44311||44313<=e&&e<=44339||44341<=e&&e<=44367||44369<=e&&e<=44395||44397<=e&&e<=44423||44425<=e&&e<=44451||44453<=e&&e<=44479||44481<=e&&e<=44507||44509<=e&&e<=44535||44537<=e&&e<=44563||44565<=e&&e<=44591||44593<=e&&e<=44619||44621<=e&&e<=44647||44649<=e&&e<=44675||44677<=e&&e<=44703||44705<=e&&e<=44731||44733<=e&&e<=44759||44761<=e&&e<=44787||44789<=e&&e<=44815||44817<=e&&e<=44843||44845<=e&&e<=44871||44873<=e&&e<=44899||44901<=e&&e<=44927||44929<=e&&e<=44955||44957<=e&&e<=44983||44985<=e&&e<=45011||45013<=e&&e<=45039||45041<=e&&e<=45067||45069<=e&&e<=45095||45097<=e&&e<=45123||45125<=e&&e<=45151||45153<=e&&e<=45179||45181<=e&&e<=45207||45209<=e&&e<=45235||45237<=e&&e<=45263||45265<=e&&e<=45291||45293<=e&&e<=45319||45321<=e&&e<=45347||45349<=e&&e<=45375||45377<=e&&e<=45403||45405<=e&&e<=45431||45433<=e&&e<=45459||45461<=e&&e<=45487||45489<=e&&e<=45515||45517<=e&&e<=45543||45545<=e&&e<=45571||45573<=e&&e<=45599||45601<=e&&e<=45627||45629<=e&&e<=45655||45657<=e&&e<=45683||45685<=e&&e<=45711||45713<=e&&e<=45739||45741<=e&&e<=45767||45769<=e&&e<=45795||45797<=e&&e<=45823||45825<=e&&e<=45851||45853<=e&&e<=45879||45881<=e&&e<=45907||45909<=e&&e<=45935||45937<=e&&e<=45963||45965<=e&&e<=45991||45993<=e&&e<=46019||46021<=e&&e<=46047||46049<=e&&e<=46075||46077<=e&&e<=46103||46105<=e&&e<=46131||46133<=e&&e<=46159||46161<=e&&e<=46187||46189<=e&&e<=46215||46217<=e&&e<=46243||46245<=e&&e<=46271||46273<=e&&e<=46299||46301<=e&&e<=46327||46329<=e&&e<=46355||46357<=e&&e<=46383||46385<=e&&e<=46411||46413<=e&&e<=46439||46441<=e&&e<=46467||46469<=e&&e<=46495||46497<=e&&e<=46523||46525<=e&&e<=46551||46553<=e&&e<=46579||46581<=e&&e<=46607||46609<=e&&e<=46635||46637<=e&&e<=46663||46665<=e&&e<=46691||46693<=e&&e<=46719||46721<=e&&e<=46747||46749<=e&&e<=46775||46777<=e&&e<=46803||46805<=e&&e<=46831||46833<=e&&e<=46859||46861<=e&&e<=46887||46889<=e&&e<=46915||46917<=e&&e<=46943||46945<=e&&e<=46971||46973<=e&&e<=46999||47001<=e&&e<=47027||47029<=e&&e<=47055||47057<=e&&e<=47083||47085<=e&&e<=47111||47113<=e&&e<=47139||47141<=e&&e<=47167||47169<=e&&e<=47195||47197<=e&&e<=47223||47225<=e&&e<=47251||47253<=e&&e<=47279||47281<=e&&e<=47307||47309<=e&&e<=47335||47337<=e&&e<=47363||47365<=e&&e<=47391||47393<=e&&e<=47419||47421<=e&&e<=47447||47449<=e&&e<=47475||47477<=e&&e<=47503||47505<=e&&e<=47531||47533<=e&&e<=47559||47561<=e&&e<=47587||47589<=e&&e<=47615||47617<=e&&e<=47643||47645<=e&&e<=47671||47673<=e&&e<=47699||47701<=e&&e<=47727||47729<=e&&e<=47755||47757<=e&&e<=47783||47785<=e&&e<=47811||47813<=e&&e<=47839||47841<=e&&e<=47867||47869<=e&&e<=47895||47897<=e&&e<=47923||47925<=e&&e<=47951||47953<=e&&e<=47979||47981<=e&&e<=48007||48009<=e&&e<=48035||48037<=e&&e<=48063||48065<=e&&e<=48091||48093<=e&&e<=48119||48121<=e&&e<=48147||48149<=e&&e<=48175||48177<=e&&e<=48203||48205<=e&&e<=48231||48233<=e&&e<=48259||48261<=e&&e<=48287||48289<=e&&e<=48315||48317<=e&&e<=48343||48345<=e&&e<=48371||48373<=e&&e<=48399||48401<=e&&e<=48427||48429<=e&&e<=48455||48457<=e&&e<=48483||48485<=e&&e<=48511||48513<=e&&e<=48539||48541<=e&&e<=48567||48569<=e&&e<=48595||48597<=e&&e<=48623||48625<=e&&e<=48651||48653<=e&&e<=48679||48681<=e&&e<=48707||48709<=e&&e<=48735||48737<=e&&e<=48763||48765<=e&&e<=48791||48793<=e&&e<=48819||48821<=e&&e<=48847||48849<=e&&e<=48875||48877<=e&&e<=48903||48905<=e&&e<=48931||48933<=e&&e<=48959||48961<=e&&e<=48987||48989<=e&&e<=49015||49017<=e&&e<=49043||49045<=e&&e<=49071||49073<=e&&e<=49099||49101<=e&&e<=49127||49129<=e&&e<=49155||49157<=e&&e<=49183||49185<=e&&e<=49211||49213<=e&&e<=49239||49241<=e&&e<=49267||49269<=e&&e<=49295||49297<=e&&e<=49323||49325<=e&&e<=49351||49353<=e&&e<=49379||49381<=e&&e<=49407||49409<=e&&e<=49435||49437<=e&&e<=49463||49465<=e&&e<=49491||49493<=e&&e<=49519||49521<=e&&e<=49547||49549<=e&&e<=49575||49577<=e&&e<=49603||49605<=e&&e<=49631||49633<=e&&e<=49659||49661<=e&&e<=49687||49689<=e&&e<=49715||49717<=e&&e<=49743||49745<=e&&e<=49771||49773<=e&&e<=49799||49801<=e&&e<=49827||49829<=e&&e<=49855||49857<=e&&e<=49883||49885<=e&&e<=49911||49913<=e&&e<=49939||49941<=e&&e<=49967||49969<=e&&e<=49995||49997<=e&&e<=50023||50025<=e&&e<=50051||50053<=e&&e<=50079||50081<=e&&e<=50107||50109<=e&&e<=50135||50137<=e&&e<=50163||50165<=e&&e<=50191||50193<=e&&e<=50219||50221<=e&&e<=50247||50249<=e&&e<=50275||50277<=e&&e<=50303||50305<=e&&e<=50331||50333<=e&&e<=50359||50361<=e&&e<=50387||50389<=e&&e<=50415||50417<=e&&e<=50443||50445<=e&&e<=50471||50473<=e&&e<=50499||50501<=e&&e<=50527||50529<=e&&e<=50555||50557<=e&&e<=50583||50585<=e&&e<=50611||50613<=e&&e<=50639||50641<=e&&e<=50667||50669<=e&&e<=50695||50697<=e&&e<=50723||50725<=e&&e<=50751||50753<=e&&e<=50779||50781<=e&&e<=50807||50809<=e&&e<=50835||50837<=e&&e<=50863||50865<=e&&e<=50891||50893<=e&&e<=50919||50921<=e&&e<=50947||50949<=e&&e<=50975||50977<=e&&e<=51003||51005<=e&&e<=51031||51033<=e&&e<=51059||51061<=e&&e<=51087||51089<=e&&e<=51115||51117<=e&&e<=51143||51145<=e&&e<=51171||51173<=e&&e<=51199||51201<=e&&e<=51227||51229<=e&&e<=51255||51257<=e&&e<=51283||51285<=e&&e<=51311||51313<=e&&e<=51339||51341<=e&&e<=51367||51369<=e&&e<=51395||51397<=e&&e<=51423||51425<=e&&e<=51451||51453<=e&&e<=51479||51481<=e&&e<=51507||51509<=e&&e<=51535||51537<=e&&e<=51563||51565<=e&&e<=51591||51593<=e&&e<=51619||51621<=e&&e<=51647||51649<=e&&e<=51675||51677<=e&&e<=51703||51705<=e&&e<=51731||51733<=e&&e<=51759||51761<=e&&e<=51787||51789<=e&&e<=51815||51817<=e&&e<=51843||51845<=e&&e<=51871||51873<=e&&e<=51899||51901<=e&&e<=51927||51929<=e&&e<=51955||51957<=e&&e<=51983||51985<=e&&e<=52011||52013<=e&&e<=52039||52041<=e&&e<=52067||52069<=e&&e<=52095||52097<=e&&e<=52123||52125<=e&&e<=52151||52153<=e&&e<=52179||52181<=e&&e<=52207||52209<=e&&e<=52235||52237<=e&&e<=52263||52265<=e&&e<=52291||52293<=e&&e<=52319||52321<=e&&e<=52347||52349<=e&&e<=52375||52377<=e&&e<=52403||52405<=e&&e<=52431||52433<=e&&e<=52459||52461<=e&&e<=52487||52489<=e&&e<=52515||52517<=e&&e<=52543||52545<=e&&e<=52571||52573<=e&&e<=52599||52601<=e&&e<=52627||52629<=e&&e<=52655||52657<=e&&e<=52683||52685<=e&&e<=52711||52713<=e&&e<=52739||52741<=e&&e<=52767||52769<=e&&e<=52795||52797<=e&&e<=52823||52825<=e&&e<=52851||52853<=e&&e<=52879||52881<=e&&e<=52907||52909<=e&&e<=52935||52937<=e&&e<=52963||52965<=e&&e<=52991||52993<=e&&e<=53019||53021<=e&&e<=53047||53049<=e&&e<=53075||53077<=e&&e<=53103||53105<=e&&e<=53131||53133<=e&&e<=53159||53161<=e&&e<=53187||53189<=e&&e<=53215||53217<=e&&e<=53243||53245<=e&&e<=53271||53273<=e&&e<=53299||53301<=e&&e<=53327||53329<=e&&e<=53355||53357<=e&&e<=53383||53385<=e&&e<=53411||53413<=e&&e<=53439||53441<=e&&e<=53467||53469<=e&&e<=53495||53497<=e&&e<=53523||53525<=e&&e<=53551||53553<=e&&e<=53579||53581<=e&&e<=53607||53609<=e&&e<=53635||53637<=e&&e<=53663||53665<=e&&e<=53691||53693<=e&&e<=53719||53721<=e&&e<=53747||53749<=e&&e<=53775||53777<=e&&e<=53803||53805<=e&&e<=53831||53833<=e&&e<=53859||53861<=e&&e<=53887||53889<=e&&e<=53915||53917<=e&&e<=53943||53945<=e&&e<=53971||53973<=e&&e<=53999||54001<=e&&e<=54027||54029<=e&&e<=54055||54057<=e&&e<=54083||54085<=e&&e<=54111||54113<=e&&e<=54139||54141<=e&&e<=54167||54169<=e&&e<=54195||54197<=e&&e<=54223||54225<=e&&e<=54251||54253<=e&&e<=54279||54281<=e&&e<=54307||54309<=e&&e<=54335||54337<=e&&e<=54363||54365<=e&&e<=54391||54393<=e&&e<=54419||54421<=e&&e<=54447||54449<=e&&e<=54475||54477<=e&&e<=54503||54505<=e&&e<=54531||54533<=e&&e<=54559||54561<=e&&e<=54587||54589<=e&&e<=54615||54617<=e&&e<=54643||54645<=e&&e<=54671||54673<=e&&e<=54699||54701<=e&&e<=54727||54729<=e&&e<=54755||54757<=e&&e<=54783||54785<=e&&e<=54811||54813<=e&&e<=54839||54841<=e&&e<=54867||54869<=e&&e<=54895||54897<=e&&e<=54923||54925<=e&&e<=54951||54953<=e&&e<=54979||54981<=e&&e<=55007||55009<=e&&e<=55035||55037<=e&&e<=55063||55065<=e&&e<=55091||55093<=e&&e<=55119||55121<=e&&e<=55147||55149<=e&&e<=55175||55177<=e&&e<=55203?v:9757==e||9977==e||9994<=e&&e<=9997||127877==e||127938<=e&&e<=127940||127943==e||127946<=e&&e<=127948||128066<=e&&e<=128067||128070<=e&&e<=128080||128110==e||128112<=e&&e<=128120||128124==e||128129<=e&&e<=128131||128133<=e&&e<=128135||128170==e||128372<=e&&e<=128373||128378==e||128400==e||128405<=e&&e<=128406||128581<=e&&e<=128583||128587<=e&&e<=128591||128675==e||128692<=e&&e<=128694||128704==e||128716==e||129304<=e&&e<=129308||129310<=e&&e<=129311||129318==e||129328<=e&&e<=129337||129341<=e&&e<=129342||129489<=e&&e<=129501?T:127995<=e&&e<=127999?y:8205==e?S:9792==e||9794==e||9877<=e&&e<=9878||9992==e||10084==e||127752==e||127806==e||127859==e||127891==e||127908==e||127912==e||127979==e||127981==e||128139==e||128187<=e&&e<=128188||128295==e||128300==e||128488==e||128640==e||128658==e?b:128102<=e&&e<=128105?x:11}return this.nextBreak=function(e,t){if(void 0===t&&(t=0),t<0)return 0;if(t>=e.length-1)return e.length;for(var n,a,i=D(l(e,t)),s=[],o=t+1;o<e.length;o++)if(a=o-1,!(55296<=(n=e).charCodeAt(a)&&n.charCodeAt(a)<=56319&&56320<=n.charCodeAt(a+1)&&n.charCodeAt(a+1)<=57343)){var r=D(l(e,o));if(q(i,s,r))return o;s.push(r)}return e.length},this.splitGraphemes=function(e){for(var t,n=[],a=0;(t=this.nextBreak(e,a))<e.length;)n.push(e.slice(a,t)),a=t;return a<e.length&&n.push(e.slice(a)),n},this.countGraphemes=function(e){for(var t,n=0,a=0;(t=this.nextBreak(e,a))<e.length;)a=t,n++;return a<e.length&&n++,n},this}qq.FileUploaderBasic=function(e){this._options={debug:!1,action:"/server/upload",headers:null,params:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],allowedMimetypes:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(e,t){},onProgress:function(e,t,n,a){},onComplete:function(e,t,n){},onCancel:function(e,t){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(e){alert(e)}},qq.extend(this._options,e),this._filesInProgress=0,this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FileUploaderBasic.prototype={setParams:function(e){this._options.params=e},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(e){var t=this;return new qq.UploadButton({element:e,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),allowedMimetypes:this._options.allowedMimetypes,onChange:function(e){t._onInputChange(e)}})},_createUploadHandler:function(){var e,i=this;return e=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm",new qq[e]({debug:this._options.debug,action:this._options.action,headers:this._options.headers,maxConnections:this._options.maxConnections,onProgress:function(e,t,n,a){i._onProgress(e,t,n,a),i._options.onProgress(e,t,n,a)},onComplete:function(e,t,n){i._onComplete(e,t,n),i._options.onComplete(e,t,n)},onCancel:function(e,t){i._onCancel(e,t),i._options.onCancel(e,t)}})},_preventLeaveInProgress:function(){var t=this;qq.attach(window,"beforeunload",function(e){if(t._filesInProgress)return(e=e||window.event).returnValue=t._options.messages.onLeave,t._options.messages.onLeave})},_onSubmit:function(e,t){this._filesInProgress++},_onProgress:function(e,t,n,a){},_onComplete:function(e,t,n){this._filesInProgress--,n.error&&this._options.showMessage(n.error)},_onCancel:function(e,t){this._filesInProgress--},_onInputChange:function(e){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(e.files):this._validateFile(e)&&this._uploadFile(e),this._button.reset()},_uploadFileList:function(e){for(var t=0;t<e.length;t++)if(!this._validateFile(e[t]))return;for(t=0;t<e.length;t++)this._uploadFile(e[t])},_uploadFile:function(e){var t=this._handler.add(e),n=this._handler.getName(t);!1!==this._options.onSubmit(t,n)&&(this._onSubmit(t,n),this._handler.upload(t,this._options.params))},_validateFile:function(e){var t,n;return e.value?t=e.value.replace(/.*(\/|\\)/,""):(t=null!=e.fileName?e.fileName:e.name,n=null!=e.fileSize?e.fileSize:e.size),t&&(t=decodeURIComponent(t)),this._isAllowedExtension(t)?0===n?(this._error("emptyError",t),!1):n&&this._options.sizeLimit&&n>this._options.sizeLimit?(this._error("sizeError",t),!1):!(n&&n<this._options.minSizeLimit)||(this._error("minSizeError",t),!1):(this._error("typeError",t),!1)},_error:function(e,t){var n=this._options.messages[e];function a(e,t){n=n.replace(e,t)}a("{file}",this._formatFileName(t)),a("{extensions}",this._options.allowedExtensions.join(", ")),a("{sizeLimit}",this._formatSize(this._options.sizeLimit)),a("{minSizeLimit}",this._formatSize(this._options.minSizeLimit)),this._options.showMessage(n)},_formatFileName:function(e){return e},_isAllowedExtension:function(e){var t=-1!==e.indexOf(".")?e.replace(/.*[.]/,"").toLowerCase():"",n=this._options.allowedExtensions;if(!n.length)return!0;for(var a=0;a<n.length;a++)if(n[a].toLowerCase()==t)return!0;return!1},_formatSize:function(e){for(var t=-1;t++,999<(e/=1024););return+e.toFixed(2)+["kB","MB","GB","TB","PB","EB"][t]}},qq.FileUploader=function(e){qq.FileUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button">Upload a file</div><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}}),qq.extend(this._options,e),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button=this._createUploadButton(this._find(this._element,"button")),this._bindCancelEvent(),this._setupDragDrop()},qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype),qq.extend(qq.FileUploader.prototype,{_find:function(e,t){var n=qq.getByClass(e,this._options.classes[t])[0];if(!n)throw new Error("element not found "+t);return n},_setupDragDrop:function(){var t=this,n=this._find(this._element,"drop"),a=new qq.UploadDropZone({element:n,onEnter:function(e){qq.addClass(n,t._classes.dropActive),e.stopPropagation()},onLeave:function(e){e.stopPropagation()},onLeaveNotDescendants:function(e){qq.removeClass(n,t._classes.dropActive)},onDrop:function(e){n.style.display="none",qq.removeClass(n,t._classes.dropActive),t._uploadFileList(e.dataTransfer.files)}});n.style.display="none",qq.attach(document,"dragenter",function(e){a._isValidFileDrag(e)&&(n.style.display="block")}),qq.attach(document,"dragleave",function(e){if(a._isValidFileDrag(e)){var t=document.elementFromPoint(e.clientX,e.clientY);t&&"HTML"!=t.nodeName||(n.style.display="none")}})},_onSubmit:function(e,t){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onProgress:function(e,t,n,a){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var i,s=this._getItemByFileId(e),o=this._find(s,"size");o.style.display="inline",i=n!=a?Math.round(n/a*100)+"% from "+this._formatSize(a):this._formatSize(a),qq.setText(o,i)},_onComplete:function(e,t,n){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var a=this._getItemByFileId(e);qq.remove(this._find(a,"cancel")),n.success?qq.addClass(a,this._classes.success):qq.addClass(a,this._classes.fail)},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);n.qqFileId=e;var a=this._find(n,"file");qq.setText(a,this._formatFileName(t)),this._find(n,"size").style.display="none",this._listElement.appendChild(n)},_getItemByFileId:function(e){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==e)return t;t=t.nextSibling}},_bindCancelEvent:function(){var a=this,e=this._listElement;qq.attach(e,"click",function(e){var t=(e=e||window.event).target||e.srcElement;if(qq.hasClass(t,a._classes.cancel)){qq.preventDefault(e);var n=t.parentNode;a._handler.cancel(n.qqFileId),qq.remove(n)}})}}),qq.UploadDropZone=function(e){this._options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}},qq.extend(this._options,e),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_disableDropOutside:function(e){qq.UploadDropZone.dropOutsideDisabled||(qq.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var n=this;qq.attach(n._element,"dragover",function(e){if(n._isValidFileDrag(e)){var t=e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"==t||"linkMove"==t?"move":"copy",e.stopPropagation(),e.preventDefault()}}),qq.attach(n._element,"dragenter",function(e){n._isValidFileDrag(e)&&n._options.onEnter(e)}),qq.attach(n._element,"dragleave",function(e){if(n._isValidFileDrag(e)){n._options.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);qq.contains(this,t)||n._options.onLeaveNotDescendants(e)}}),qq.attach(n._element,"drop",function(e){n._isValidFileDrag(e)&&(e.preventDefault(),n._options.onDrop(e))})},_isValidFileDrag:function(e){var t=e.dataTransfer,n=-1<navigator.userAgent.indexOf("AppleWebKit");return t&&"none"!=t.effectAllowed&&(t.files||!n&&t.types.contains&&t.types.contains("Files"))}},qq.UploadButton=function(e){this._options={element:null,multiple:!1,allowedMimetypes:[],name:"file",onChange:function(e){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,e),this._element=this._options.element,qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input),qq.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var e=document.createElement("input");if(this._options.multiple&&e.setAttribute("multiple","multiple"),e.setAttribute("type","file"),-1<navigator.userAgent.indexOf("Edge")&&this._options.allowedMimetypes){for(var t=[],n=0;n<this._options.allowedMimetypes.length;n++)"application/xhtml+xml"!=this._options.allowedMimetypes[n]&&t.push(this._options.allowedMimetypes[n]);e.setAttribute("accept",t.join(", "))}else e.setAttribute("accept",this._options.allowedMimetypes.join(", "));e.setAttribute("name",this._options.name),e.setAttribute("title"," "),qq.css(e,{position:"absolute",right:0,top:0,fontSize:"180px",height:"100%",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(e);var a=this;return qq.attach(e,"change",function(){a._options.onChange(e)}),qq.attach(e,"mouseover",function(){qq.addClass(a._element,a._options.hoverClass)}),qq.attach(e,"mouseout",function(){qq.removeClass(a._element,a._options.hoverClass)}),qq.attach(e,"focus",function(){qq.addClass(a._element,a._options.focusClass)}),qq.attach(e,"blur",function(){qq.removeClass(a._element,a._options.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}},qq.UploadHandlerAbstract=function(e){this._options={debug:!1,action:"/upload.php",headers:null,maxConnections:999,onProgress:function(e,t,n,a){},onComplete:function(e,t,n){},onCancel:function(e,t){}},qq.extend(this._options,e),this._queue=[],this._params=[]},qq.UploadHandlerAbstract.prototype={log:function(e){this._options.debug&&"undefined"!=typeof console&&console.log("[uploader] "+e)},add:function(e){},upload:function(e,t){var n=this._queue.push(e),a={};qq.extend(a,t),this._params[e]=a,n<=this._options.maxConnections&&this._upload(e,this._params[e])},cancel:function(e){this._cancel(e),this._dequeue(e)},cancelAll:function(){for(var e=0;e<this._queue.length;e++)this._cancel(this._queue[e]);this._queue=[]},getName:function(e){},getSize:function(e){},getQueue:function(){return this._queue},_upload:function(e){},_cancel:function(e){},_dequeue:function(e){var t=qq.indexOf(this._queue,e);this._queue.splice(t,1);var n=this._options.maxConnections;if(this._queue.length>=n&&t<n){var a=this._queue[n-1];this._upload(a,this._params[a])}}},qq.UploadHandlerForm=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(e){e.setAttribute("name","fname");var t="qq-upload-handler-iframe"+qq.getUniqueId();return(this._inputs[t]=e).parentNode&&qq.remove(e),t},getName:function(e){return this._inputs[e].value.replace(/.*(\/|\\)/,"")},_cancel:function(e){this._options.onCancel(e,this.getName(e)),delete this._inputs[e];var t=document.getElementById(e);t&&(t.setAttribute("src","javascript:false;"),qq.remove(t))},_upload:function(t,e){var n=this._inputs[t];if(!n)throw new Error("file with passed id was not added, or already uploaded or cancelled");var a=this.getName(t),i=this._createIframe(t),s=this._createForm(i,e);s.appendChild(n);var o=this;return this._attachLoadEvent(i,function(){o.log("iframe loaded");var e=o._getIframeContentJSON(i);o._options.onComplete(t,a,e),o._dequeue(t),delete o._inputs[t],setTimeout(function(){qq.remove(i)},1)}),s.submit(),qq.remove(s),t},_attachLoadEvent:function(e,t){qq.attach(e,"load",function(){e.parentNode&&(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML||t())})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+doc.body.outerText);try{response=eval("("+doc.body.outerText+")")}catch(e){response={}}return response},_createIframe:function(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e,t){var n=qq.toElement('<form method="post" enctype="multipart/form-data"></form>'),a=qq.obj2url(t,this._options.action);return n.setAttribute("action",a),n.setAttribute("target",e.name),n.style.display="none",document.body.appendChild(n),n}}),qq.UploadHandlerXhr=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var e=document.createElement("input");return e.type="file","multiple"in e&&"undefined"!=typeof File&&void 0!==(new XMLHttpRequest).upload},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(e){if(!(e instanceof File))throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(e)-1},getName:function(e){var t=this._files[e],n=null!=t.fileName?t.fileName:t.name;return n?decodeURIComponent(n):n},getSize:function(e){var t=this._files[e];return null!=t.fileSize?t.fileSize:t.size},getLoaded:function(e){return this._loaded[e]||0},_upload:function(t,e){var n=this._files[t],a=this.getName(t);this.getSize(t);this._loaded[t]=0;var i=this._xhrs[t]=new XMLHttpRequest,s=this;i.upload.onprogress=function(e){e.lengthComputable&&(s._loaded[t]=e.loaded,s._options.onProgress(t,a,e.loaded,e.total))},i.onreadystatechange=function(){4==i.readyState&&s._onComplete(t,i)},(e=e||{}).fname=a;var o=qq.obj2url(e,this._options.action);for(var r in i.open("POST",o,!0),this._options.headers)this._options.headers.hasOwnProperty(r)&&i.setRequestHeader(r,this._options.headers[r]);i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("X-File-Name",encodeURIComponent(a)),i.setRequestHeader("Content-Type","application/octet-stream"),i.send(n)},_onComplete:function(id,xhr){if(this._files[id]){var name=this.getName(id),size=this.getSize(id);if(this._options.onProgress(id,name,size,size),200==xhr.status){var response;this.log("xhr - server response received"),this.log("responseText = "+xhr.responseText);try{response=eval("("+xhr.responseText+")")}catch(e){response={}}this._options.onComplete(id,name,response)}else this._options.onComplete(id,name,{error:"Fail. HTTP status: "+xhr.status+" "+xhr.statusText});this._files[id]=null,this._xhrs[id]=null,this._dequeue(id)}},_cancel:function(e){this._options.onCancel(e,this.getName(e)),this._files[e]=null,this._xhrs[e]&&(this._xhrs[e].abort(),this._xhrs[e]=null)}}),function(){var e={getSelection:function(){var i=this.$?this[0]:this;return("selectionStart"in i&&function(){var e=i.selectionEnd-i.selectionStart;return{start:i.selectionStart,end:i.selectionEnd,length:e,text:i.value.substr(i.selectionStart,e)}}||document.selection&&function(){try{var e=document.selection.createRange();if(0<$(e.parentElement()).parents(".translateContainerRight").length)return{start:0,end:i.value.length,length:0,text:""};if(null==e)return{start:0,end:i.value.length,length:0};var t=i.createTextRange(),n=t.duplicate();t.moveToBookmark(e.getBookmark()),n.setEndPoint("EndToStart",t);var a=n.text;return{start:a.replace(/\r\n/g,"\n").length,end:a.length+e.text.length,length:e.text.length,text:e.text}}catch(e){return 0<i.length?{start:0,end:i[0].value.length,length:0,text:""}:{start:0,end:i.value.length,length:0,text:""}}}||function(){return{start:0,end:i.length,length:0,text:""}})()},replaceSelection:function(){var e=this.$?this[0]:this,t=arguments[0]||"";return("selectionStart"in e&&function(){return e.value=e.value.substr(0,e.selectionStart)+t+e.value.substr(e.selectionEnd,e.value.length),this}||document.selection&&function(){return e.focus(),document.selection.createRange().text=t,this}||function(){return e.value+=t,this})()}};$.each(e,function(e){$.fn[e]=this}),$.fn.addOption=function(){var t=function(e,t,n,a,i){var s=document.createElement("option");s.value=t,s.text=n;var o=e.options,r=o.length;if(!e.cache){e.cache={};for(var l=0;l<r;l++)e.cache[o[l].value]=l}if(i||0==i)for(var d=s,g=i;g<=r;g++){var u=e.options[g];e.options[g]=d,o[g]=d,e.cache[o[g].value]=g,d=u}void 0===e.cache[t]&&(e.cache[t]=r),e.options[e.cache[t]]=s,a&&(s.selected=!0)},e=arguments;if(0==e.length)return this;var n,a,i,s=!0,o=!1;return"object"==typeof e[0]&&(o=!0,n=e[0]),2<=e.length&&("boolean"==typeof e[1]?(s=e[1],startindex=e[2]):("boolean"==typeof e[2]&&(s=e[2]),startindex=e[1]),o||(a=e[0],i=e[1])),this.each(function(){if("select"==this.nodeName.toLowerCase())if(o)for(var e in n)t(this,e,n[e],s,startindex),startindex+=1;else t(this,a,i,s,startindex)}),this},$.fn.selectOptions=function(e,t){var a=e,n=typeof e;if("object"==n&&a.constructor==Array){var i=this;$.each(a,function(){i.selectOptions(this,t)})}var s=t||!1;return"string"!=n&&"function"!=n&&"object"!=n||this.each(function(){if("select"!=this.nodeName.toLowerCase())return this;for(var e=this.options,t=e.length,n=0;n<t;n++)a.constructor==RegExp?e[n].value.match(a)?e[n].selected=!0:s&&(e[n].selected=!1):e[n].value==a?e[n].selected=!0:s&&(e[n].selected=!1)}),this},$.fn.selectedValues=function(){var e=[];return this.selectedOptions().each(function(){e[e.length]=this.value}),e},$.fn.selectedOptions=function(){return this.find("option:selected")},$.fn.getDefaultFontSize=function(e){if($.fn.defaultFontSize)return $.fn.defaultFontSize;if(!(e=e||document.body))return null;var t=document.createElement("span");return t.style.cssText="display:inline-block; padding:0; line-height:1; position:absolute; visibility:hidden; font-size:1em",t.appendChild(document.createTextNode("M")),e.appendChild(t),$.fn.defaultFontSize=[t.offsetWidth,t.offsetHeight],e.removeChild(t),$.fn.defaultFontSize}}(),$.extend(Tilde.TranslatorWidgetDefaultOptions,{_useRecentLangSelector:!1}),$.extend(Tilde.TranslatorWidget.prototype,{recentlangsPluginInit:function(){$widget.settings._useRecentLangSelector&&($widget.onSystemListLoadedHandlers.push(function(){$widget.loadPopularSourceLangList(),$widget.loadPopularTargetLangList()}),$widget.onSystemChangedHandlers.push(function(e){$widget.changePopularLangList(e)}),$(document).on("click",".popSourceLangs li",function(){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active")),$('.translateSourceLang option[value="'+$(this).attr("data-value")+'"]').prop("selected",!0),$widget.fancySource.trigger("update.fs"),$('.translate-source-language .dropdown-item[data-value="'+$(this).attr("data-value")+'"]').addClass("active"),$(".translate-source-language .dropdown-toggle").attr("data-value",$(this).attr("data-value")),$(".translate-source-language .dropdown-toggle").text($(this).text())}),$(document).on("click",".popTargetLangs li",function(){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active")),$('.translateTargetLang option[lang="'+$(this).attr("data-value")+'"]').prop("selected",!0),$widget.fancyTarget.trigger("update.fs"),$('.translate-target-language .dropdown-item[data-value="'+$(this).attr("data-value")+'"]').addClass("active"),$(".translate-target-language .dropdown-toggle").attr("data-value",$(this).attr("data-value")),$(".translate-target-language .dropdown-toggle").text($(this).text())}),$(window).on("resize",function(){$widget.loadPopularSourceLangList(),$widget.loadPopularTargetLangList()}))},loadPopularSourceLangList:function(t){t||(t=3),languageIndexes=[],$(".translateSourceLang option").each(function(e){e<t?languageIndexes.push(e):$(this).val()===$(this).parent().val()&&(0<languageIndexes.length&&languageIndexes.pop(),languageIndexes.push(e))});var n="";$(".translateSourceLang option").each(function(e){0<=$.inArray(e,languageIndexes)&&(n+='<li data-value="'+$(this).val()+'" class="page-item'+($(this).val()===$(this).parent().val()?' active"':'"')+'><a tabindex=0 class="page-link" title="'+$(this).text()+'">'+$(this).text()+"</a></li>")}),$(".translateSystemContainerLeft .fancy-select").toggle($(".translateSourceLang option").length>t),$(".popSourceLangs").html(n),50<$(".translateSystemContainerLeft").height()&&1<t&&$widget.loadPopularSourceLangList(t-1)},loadPopularTargetLangList:function(t){t||(t=3),languageIndexes=[],$(".translateTargetLang option").each(function(e){e<t?languageIndexes.push(e):$(this).val()===$(this).parent().val()&&(0<languageIndexes.length&&languageIndexes.pop(),languageIndexes.push(e))});var n="";$(".translateTargetLang option").each(function(e){if(0<=$.inArray(e,languageIndexes)){var t=$(this).attr("lang")?$(this).attr("lang"):$(this).val();n+='<li data-value="'+t+'" class="page-item'+($(this).val()===$(this).parent().val()?' active"':'"')+'><a tabindex=0 class="page-link" title="'+$(this).text()+'">'+$(this).text()+"</a></li>"}}),$(".translateSystemContainerRight .fancy-select").toggle($(".translateTargetLang option").length>t),$(".popTargetLangs").html(n),50<$(".translateSystemContainerRight").height()&&1<t&&$widget.loadPopularTargetLangList(t-1)},changePopularLangList:function(e){var t=$widget.getActiveSystemObj();if(t){var n=t.SourceLanguage.Code,a=t.TargetLanguage.Code;$(".popSourceLangs li").removeClass("active"),0<$('.popSourceLangs li[data-value="'+n+'"]').length?$('.popSourceLangs li[data-value="'+n+'"]').addClass("active"):($(".popSourceLangs").prepend('<li data-value="'+n+'" class="page-item active"><a class="page-link" tabindex=0 title="'+$(".translateSourceLang :selected").text()+'">'+$(".translateSourceLang :selected").text()+"</a></li>"),$(".popSourceLangs li").last().remove(),1<$(".popSourceLangs li").length&&50<$(".translateSystemContainerLeft").height()&&$(".popSourceLangs li").last().remove()),$widget.loadPopularTargetLangList(),$(".popTargetLangs li").removeClass("active"),0<$('.popTargetLangs li[data-value="'+a+'"]').length?$('.popTargetLangs li[data-value="'+a+'"]').addClass("active"):($(".popTargetLangs").prepend('<li data-value="'+a+'" class="page-item active"><a tabindex=0 class="page-link" title="'+$(".translateTargetLang :selected").text()+'">'+$(".translateTargetLang :selected").text()+"</a></li>"),$(".popTargetLangs li").last().remove(),1<$(".popTargetLangs li").length&&50<$(".translateSystemContainerRight").height()&&$(".popTargetLangs li").last().remove())}}}),"undefined"!=typeof $customWidgetInit&&$customWidgetInit||Tilde.TranslatorWidget.prototype.pluginInitializers.push(Tilde.TranslatorWidget.prototype.recentlangsPluginInit),$.extend(Tilde.TranslatorWidgetDefaultOptions,{_uploadUrl:"https://yoursite/ws/Files/Upload",_deleteUrl:"https://yoursite/ws/Files/Delete",_downloadUrl:"https://yoursite/ws/Files/Download",_translateUrl:"https://yoursite/ws/Files/StartTranslation",_previewUrl:"https://yoursite/ws/Files/GetDocumentPreview",_checkStatusUrl:"https://yoursite/ws/Files/GetStatus",_languageNamesUrl:"https://yoursite/ws/Files/GetLanguageNames",_assistantUrl:"https://yoursite/Files/SendToAssistant",_landingView:!1,_allowedFileTypes:[{ext:"txt",mime:"text/plain"}],_showAllowedFileInfo:!1,_mimetypeFilter:!0,_uploadSizeLimit:31457280,_startPercent:3,_docMaxWordCount:0,_docMaxSegmentCount:-1,_docTransMetadata:{},_warnWhenRunningAway:!1,_onFileUpload:null,_onDocTranslationStart:null,_onDocTranslationCancel:null,_onDocTranslationStop:null,_onDocTranslationFinished:null,_onDocTranslationError:null,_onDocTranslationProgress:null,_advancedOptions:!1,_translationAssistant:!1,_fileTranslateBtn:".translateButton",_extraFileDownloadLink:!0,_bsalertCloseVerbalization:"Close"}),$.extend(Tilde.TranslatorWidget.prototype,{filePluginInit:function(){if(0!==$("#docUploadFile",$widget.settings.container).length){$widget.filePluginEvents(),$widget.filePluginSetTempTextResult(),-1<navigator.userAgent.indexOf("iPhone OS")&&$(".docAppleLimited").removeClass("hide"),$widget.settings._landingView&&$widget.filePluginShowIntro();var e=[],t=[];for(var n in $widget.settings._allowedFileTypes){var a=$widget.settings._allowedFileTypes[n];-1==$.inArray(a.ext,e)&&e.push(a.ext),$widget.settings._mimetypeFilter&&-1==$.inArray(a.mime,t)&&t.push(a.mime)}$widget.onSystemChangedHandlers.push(function(){$widget.getActiveSystemObj()?($("#docSourcePreview",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().SourceLanguage.Code),$(".translateResult",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().TargetLanguage.Code)):($("#docSourcePreview",$widget.settings.container).removeAttr("lang"),$(".translateResult",$widget.settings.container).removeAttr("lang"))});var i="";$widget.settings._showAllowedFileInfo&&(i='<span class="supTypesList">'+uiResources[$widget.settings._language].docSupportedTypes.replace("{extensions}",'<span class="format">'+e.join('</span>, <span class="format">')+"</span>")+"</span>"),-1!==$widget.settings._docMaxSegmentCount&&$(".stickyMessageBox").html(uiResources[$widget.settings._language].docLimit.replace("{limit}",$widget.settings._docMaxSegmentCount)).removeClass("hide");new qq.FileUploader({element:document.getElementById("docUploadFile"),multiple:!1,allowedExtensions:e,allowedMimetypes:t,action:$widget.settings._uploadUrl,headers:$widget.getAuthHeaders(),debug:!1,sizeLimit:$widget.settings._uploadSizeLimit,template:'<div class="qq-uploader"> <div class="qq-upload-drop-area"></div>\t<div href="#" class="qq-upload-button icon icon-folder justify-content-md-center p-0 py-md-3">  <div class="qq-upload-button-image"></div>  <div class="qq-upload-button-text">     <span>'+uiResources[$widget.settings._language].docUploadTooltip+"</span>"+i+'  </div> </div>\t<ul class="qq-upload-list hide"></ul></div>',fileTemplate:'<li> <div class="qq-upload-meta">     <span class="qq-upload-meta-title">'+uiResources[$widget.settings._language].docUploadFilename+'</span>     <span class="qq-upload-file"></span>     <span class="qq-upload-failed-text">'+uiResources[$widget.settings._language].docUploadFailed+'</span>     <a class="qq-upload-cancel hide"></a> </div> <div class="qq-upload-meta">     <span class="qq-upload-meta-title">'+uiResources[$widget.settings._language].docUploadFilesize+'</span>     <span class="qq-upload-size"></span> </div> <div class="qq-upload-meta">     <span class="qq-upload-meta-title">'+uiResources[$widget.settings._language].docUploadWordcount+'</span>     <span class="qq-upload-wordcount"></span> </div></li>',messages:{typeError:uiResources[$widget.settings._language].docUploadMsgType,sizeError:uiResources[$widget.settings._language].docUploadMsgSize,emptyError:uiResources[$widget.settings._language].docUploadMsgEmpty},onSubmit:$widget.filePluginUploadOnSubmit,onComplete:$widget.filePluginUploadOnComplete,showMessage:function(e){$(".translateProgress").addClass("hide"),$widget.settings._bootstrap?bsalert({title:e,closeVerbalization:$widget.settings._bsalertCloseVerbalization}):$(".infoMessageBox").html(e).removeClass("hide")}});$widget.onSystemChangedHandlers.push(function(e){1!==$(".buttonDownDoc").length||$(".buttonDownDoc").hasClass("hide")||$widget.filePluginUploadNew(),$widget.filePluginSetTempTextResult()}),$widget.settings._advancedOptions&&($(".buttonAdvancedOptions").removeClass("hide"),$(".optionBox .optCheck").change(function(){$(this).is(":checked")?($(this).parent().find(".manualInput").slideDown(),"cbAddSourcePrefix"===$(this).attr("id")&&""===$("#inputSourcePrefix").val()&&$("#inputSourcePrefix").val("*M*"),"cbAddTargetPrefix"===$(this).attr("id")&&""===$("#inputTargetPrefix").val()&&$("#inputTargetPrefix").val("*M*")):$(this).parent().find(".manualInput").slideUp()}),$(".optionBox  .langOptCheck").change(function(){if($(this).is(":checked")){$(".tmxSourceLang").empty(),$(".tmxTargetLang").empty();if($widget.activeSystemId){var e=$widget.getActiveSystemObj(),t=e.SourceLanguage.Code+"-"+e.TargetLanguage.Code;$.ajax({type:"POST",url:$widget.settings._languageNamesUrl,headers:$widget.getAuthHeaders(),data:{languagePair:t},success:function(e){var t=e.split("\n");2==t.length&&($(".tmxSourceLang").empty().append(t[0]),$(".tmxTargetLang").empty().append(t[1]))},error:function(e){console.error(e)}})}$(this).parent().find(".manualInput").slideDown()}else $(this).parent().find(".manualInput").slideUp()}))}},filePluginUploadOnSubmit:function(){$widget.settings._bootstrap?bsalertClear():$(".infoMessageBox").html("").addClass("hide"),$(".qq-upload-list").html("").addClass("hide"),$(".translateProgress").removeClass("hide")},filePluginUploadOnComplete:function(e,t,n){if(n.success){$widget.settings._landingView&&($(".translateContainerRight",$widget.settings.container).removeClass("hide"),$(".translateContainerLeft, .translateContainerHeader",$widget.settings.container).removeClass("intro")),$(".transFileMeta").html($(".qq-upload-success").html()),$(".docUploadNewDoc").removeClass("hide"),$($widget.settings._textSource).attr("disabled",!0),$($widget.settings._fileTranslateBtn).removeClass("hide"),$widget.enableSystemChange(),$("#sendEmail, #sendEmailLabel").removeClass("hide"),$("#sendEmail").removeAttr("disabled");var a=n.filename,i=n.wordcount;if($(".qq-upload-wordcount").html(i),$("#docUploadFile").addClass("hide"),$(".translateProgress").addClass("hide"),$(".uploadedDocumentName").text($(".qq-upload-file:first").text()).removeClass("hide"),0==$("#hidTranslRealFilename").length?$(".docTranslateContent").after($("<input>",{type:"hidden",id:"hidTranslRealFilename",value:a})):$("#hidTranslRealFilename").val(a),$("#docSourcePreview").removeClass("hide"),$("#docSourcePreview").html(n.preview),$("#docSourcePreview").toggleClass("bigIcon",0<$(".no-preview",$("#docSourcePreview")).length),$widget.settings._onFileUpload&&"function"==typeof $widget.settings._onFileUpload&&$widget.settings._onFileUpload(a,i),0!==$widget.settings._docMaxWordCount&&$widget.settings._docMaxWordCount<parseInt(i)){var s=uiResources[$widget.settings._language].docUploadMsgWordcnt.replace("{wordCount}",i);$(".qq-upload-wordcount").addClass("warning"),$widget.settings._bootstrap?bsalert({title:s,closeVerbalization:$widget.settings._bsalertCloseVerbalization}):$(".infoMessageBox").html(s).removeClass("hide"),$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("FT_ERR_WORDCOUNT",s)}else $(".qq-upload-wordcount").removeClass("warning"),$(".qq-upload-warn-msg").remove()}else if(n.error||jQuery.isEmptyObject(n)){s=uiResources[$widget.settings._language].docUploadFailed;$(".translateProgress").addClass("hide"),$widget.settings._bootstrap?bsalert({title:s,closeVerbalization:$widget.settings._bsalertCloseVerbalization}):$(".infoMessageBox").html(s).show(),$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("FT_ERR_UPLOAD",s)}},filePluginTranslate:function(){$widget.disableSystemChange(),$($widget.settings._fileTranslateBtn+", .docUploadNewDoc").addClass("hide"),$widget.settings._advancedOptions&&($(".advancedOptions").addClass("hide"),$(".buttonAdvancedOptions").addClass("hide"),$(".buttonAdvancedOptions .btnText").text($(".buttonAdvancedOptions .btnText").text().replace("▴","▾"))),$(".buttonCancelDoc").removeClass("hide"),$(".docTempTarget").addClass("hide"),$(".translateContainerRight").addClass("docProgress"),$(".translateResult").removeClass("hide"),$(".translateResult").addClass("bigIcon"),$widget.settings._onDocTranslationStart&&"function"==typeof $widget.settings._onDocTranslationStart&&$widget.settings._onDocTranslationStart(),$("#hidStopTranslation").val("false"),$(".translateResult").html('<div id="translProgress" class="starting">   <div class="progressImage"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div><div id="transItem" class="transItem">\t    <span class="percent">'+uiResources[$widget.settings._language].docStarting+"</span>   </div></div>");var e={systemid:$widget.activeSystemId,appid:$widget.settings._appId,filename:$(".transFileMeta .qq-upload-file").text(),tmpname:$("#hidTranslRealFilename").val(),wordlimit:$widget.settings._docMaxWordCount,segmentlimit:$widget.settings._docMaxSegmentCount,termcorpusid:$widget.termCorpusId&&"Ready"==$widget.getSelectedTermCorpusStatus()?$widget.termCorpusId:null};$widget.settings._advancedOptions&&(e.sendEmail=0<$("#sendEmail:checked").length,0<$("#cbAddSourcePrefix:checked").length&&(e.sourcePrefix=$("#inputSourcePrefix").val()),0<$("#cbAddTargetPrefix:checked").length&&(e.targetPrefix=$("#inputTargetPrefix").val()),e.doNotReplaceExistingTranslation=0<$("#cbReplaceTarget:checked").length,0<$("#cbLangSpec:checked").length&&(e.sourceLanguage=$(".tmxSourceLang option:selected").val(),e.targetLanguage=$(".tmxTargetLang option:selected").val())),$.ajax({type:"POST",dataType:"json",url:$widget.settings._translateUrl,headers:$widget.getAuthHeaders(),data:e,success:function(e){$widget.settings._warnWhenRunningAway&&$(window).bind("beforeunload.warn",function(){return uiResources[$widget.settings._language].docTranslInProgress}),0===$("#hidUploadTempId").length?$(".docTranslateContent").after($("<input>",{type:"hidden",id:"hidUploadTempId",value:e})):$("#hidUploadTempId").val(e),$widget.filePluginTranslateProgress(e),void 0!==$widget.checkSystemStatus&&$widget.checkSystemStatus()},error:function(e){if(401===e.status&&$widget.settings._loginUrl&&(window.location=$widget.settings._loginUrl),403===e.status)var t=uiResources[$widget.settings._language].E_UNAUTHORIZED;else t=uiResources[$widget.settings._language].E_FAILED_IN_TRANSLATION;$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("",t),$widget.settings._onDocTranslationStop&&"function"==typeof $widget.settings._onDocTranslationStop&&$widget.settings._onDocTranslationStop(),$widget.settings._bootstrap?bsalert({title:t,closeVerbalization:$widget.settings._bsalertCloseVerbalization}):$(".infoMessageBox").html(t).removeClass("hide"),$(".buttonDelDoc").addClass("hide"),$(".docUploadNewDoc").removeClass("hide"),$(".translateContainerRight").removeClass("docProgress"),$("#translProgress").html(""),$widget.settings._advancedOptions&&$(".buttonAdvancedOptions").removeClass("hide")},complete:function(){$("#translProgress").removeClass("starting"),$("#translProgress #transItem .percent").text($widget.settings._startPercent+"%")}})},filePluginEvents:function(){$(".docUploadNewDoc",$widget.settings.container).on("click",function(){$widget.filePluginUploadNew()}),$(".buttonDelDoc",$widget.settings.container).on("click",function(){$widget.filePluginDeleteFile()}),$(".buttonCancelDoc",$widget.settings.container).on("click",function(){$widget.settings._warnWhenRunningAway&&$(window).unbind("beforeunload.warn"),$widget.filePluginDeleteFile()}),$($widget.settings._fileTranslateBtn,$widget.settings.container).on("click",function(){if("true"===$(this).attr("data-disabled"))return!1;$widget.filePluginTranslate()}),$widget.settings._advancedOptions&&$(".buttonAdvancedOptions",$widget.settings.container).on("click",function(){$(".advancedOptions").toggleClass("hide"),0<$(".buttonAdvancedOptions .btnText").text().indexOf("▾")?$(".buttonAdvancedOptions .btnText").text($(".buttonAdvancedOptions .btnText").text().replace("▾","▴")):$(".buttonAdvancedOptions .btnText").text($(".buttonAdvancedOptions .btnText").text().replace("▴","▾"))}),$widget.settings._translationAssistant&&$(".buttonAssistant",$widget.settings.container).on("click",function(){$widget.filePluginSendToAssistant($("#hidUploadTempId").val())})},filePluginUploadNew:function(){var e=$("#hidUploadTempId").val();void 0===e&&(e=""),this.filePluginDeleteFileOnServer(),$(".translateContainerRight").removeClass("p-3"),$(".docUploadNewDoc").addClass("hide"),$($widget.settings._textSource).removeAttr("disabled"),$(".buttonDownDoc").removeAttr("href").addClass("hide"),$("#hidTranslTempFilename").remove(),$("#hidUploadTempId").remove(),$(".uploadedDocumentName").text("").addClass("hide"),$(".qq-upload-list").html(""),$(".transFileMeta").html(""),$("#docTransPercent").html(""),$("#docTransPercent").attr("aria-valuenow",0),$widget.settings._bootstrap?bsalertClear():$(".infoMessageBox").html("").addClass("hide"),$("#hidStopTranslation").val("false"),$("#docUploadFile").removeClass("hide"),$("#docSourcePreview").empty(),$("#docSourcePreview").addClass("hide"),$(".translateTextTempSourceContainer style").remove(),$(".translateResult").empty(),$widget.settings._advancedOptions&&$(".buttonAdvancedOptions").removeClass("hide"),$widget.settings._translationAssistant&&$(".buttonAssistant").addClass("hide"),$widget.filePluginSetTempTextResult(),$widget.enableSystemChange(),$($widget.settings._fileTranslateBtn).addClass("hide"),$widget.settings._onDocTranslationCancel&&"function"==typeof $widget.settings._onDocTranslationCancel&&$widget.settings._onDocTranslationCancel(e),$widget.settings._landingView&&$widget.filePluginShowIntro()},filePluginShowIntro:function(){$(".translateContainerRight",$widget.settings.container).addClass("hide"),$(".translateContainerLeft, .translateContainerHeader",$widget.settings.container).addClass("intro")},filePluginDeleteFile:function(){$(".docUploadNewDoc").click(),$(".docTranslateContent").after($("<input>",{type:"hidden",id:"hidStopTranslation",value:!0})),$(".buttonDelDoc, .buttonCancelDoc").addClass("hide"),$(".translateContainerRight").removeClass("docProgress"),this.filePluginSetTempTextResult(),this.filePluginDeleteFileOnServer()},filePluginDeleteFileOnServer:function(){var e=$("#hidUploadTempId").val();void 0===e&&(e=""),0<e.length&&$.ajax({type:"POST",dataType:"json",url:$widget.settings._deleteUrl,headers:$widget.getAuthHeaders(),data:{docid:e},success:function(){$widget.enableSystemChange()},error:function(e){"undefined"!=typeof console&&console.error("error while deleting: "+e.responseJSON),401==e.status&&$widget.settings._loginUrl&&(window.location=$widget.settings._loginUrl),$widget.enableSystemChange()}})},filePluginTranslateProgress:function(r){"true"!==$("#hidStopTranslation").val()&&($(".translateContainerRight").hasClass("docProgress")||$(".translateContainerRight").addClass("docProgress"),$.ajax({type:"POST",dataType:"json",url:$widget.settings._checkStatusUrl,headers:$widget.getAuthHeaders(),data:{docId:r},success:function(e){var t=e.completed<$widget.settings._startPercent?$widget.settings._startPercent:e.completed;if($("#translProgress").removeClass("starting"),$("#translProgress .percent").text(t+"%"),"completed"===e.status){if(e.warnings&&0<e.warnings.length){var n=e.warnings,a=[];for(counter=0;counter<n.length;counter++)uiResources[$widget.settings._language][n[counter]]?a.push(uiResources[$widget.settings._language][n[counter]]):a.push(n[counter]);$widget.settings._bootstrap?bsalert({title:a.join("<br /> "),closeVerbalization:$widget.settings._bsalertCloseVerbalization}):$(".infoMessageBox").html(a.join("<br /> ")).removeClass("hide")}var i=$widget.settings._downloadUrl+"?docid="+encodeURIComponent(r)+"&filename="+encodeURIComponent(e.filename),s=$widget.getAuthHeaders();s&&(s["client-id"]&&(i+="&clientId="+encodeURIComponent(s["client-id"])),s["website-auth-cookie"]&&(i+="&websiteAuthCookie="+encodeURIComponent(s["website-auth-cookie"]))),$(".buttonDownDoc").attr("href",i).removeClass("hide"),$(".buttonDelDoc").addClass("hide"),$(".buttonCancelDoc").addClass("hide"),$("#hidTranslTempFilename").remove(),$(".docUploadNewDoc").removeClass("hide"),$widget.settings._warnWhenRunningAway&&$(window).unbind("beforeunload.warn"),$widget.settings._translationAssistant&&$(".buttonAssistant").removeClass("hide"),$widget.settings._onDocTranslationFinished&&"function"==typeof $widget.settings._onDocTranslationFinished&&$widget.settings._onDocTranslationFinished(r);var o=e.filename;$.ajax({type:"POST",dataType:"json",url:$widget.settings._previewUrl,headers:$widget.getAuthHeaders(),data:{filename:o,docid:r},success:function(e){e.success?($(".translateContainerRight").addClass("p-3"),e.preview?($(".translateResult").html(e.preview),$(".translateResult").removeClass("bigIcon")):$widget.settings._extraFileDownloadLink&&($(".translateResult").html('<a href="'+i+'" target="_blank"><div class="translated-no-preview"></div><span>'+o+"</span></a>"),$(".translateResult").addClass("bigIcon"))):$widget.settings._bootstrap?bsalert({title:uiResources[$widget.settings._language].docPreviewError,closeVerbalization:$widget.settings._bsalertCloseVerbalization}):$(".infoMessageBox").html(uiResources[$widget.settings._language].docPreviewError).removeClass("hide"),$(".translateContainerRight").removeClass("docProgress"),$("#translProgress").html("")},error:function(e){401==e.status&&$widget.settings._loginUrl&&(window.location=$widget.settings._loginUrl),$widget.settings._bootstrap?bsalert({title:uiResources[$widget.settings._language].docPreviewError,closeVerbalization:$widget.settings._bsalertCloseVerbalization}):$(".infoMessageBox").html(uiResources[$widget.settings._language].docPreviewError).removeClass("hide"),$(".translateContainerRight").removeClass("docProgress"),$("#translProgress").html("")}})}else $(".buttonCancelDoc").removeClass("hide"),$widget.settings._onDocTranslationProgress&&"function"==typeof $widget.settings._onDocTranslationProgress&&$widget.settings._onDocTranslationProgress(t),setTimeout(function(){$widget.filePluginTranslateProgress(r)},5e3)},error:function(e){if($widget.settings._warnWhenRunningAway&&$(window).unbind("beforeunload.warn"),401===e.status&&$widget.settings._loginUrl)window.location=$widget.settings._loginUrl;else{var t=uiResources[$widget.settings._language].docTranslFailed;e.responseJSON&&uiResources[$widget.settings._language][e.responseJSON]&&(t=uiResources[$widget.settings._language][e.responseJSON]),$(".docUploadNewDoc").removeClass("hide"),$(".buttonCancelDoc").addClass("hide"),$widget.settings._bootstrap?bsalert({title:t,closeVerbalization:$widget.settings._bsalertCloseVerbalization}):$(".infoMessageBox").html(t).removeClass("hide"),$("#translProgress").html(""),$widget.settings._onDocTranslationError&&"function"==typeof $widget.settings._onDocTranslationError&&$widget.settings._onDocTranslationError("",t),$widget.settings._onDocTranslationStop&&"function"==typeof $widget.settings._onDocTranslationStop&&$widget.settings._onDocTranslationStop()}}}))},filePluginGetTranslationStatus:function(){if(0===$(".qq-upload-file").length)return"blank";if($(".translateContainerRight").hasClass("docProgress")){var e=$(".buttonDownDoc").attr("href");return void 0!==e&&0===e.length?"translating":"translated"}return"uploaded"},filePluginSetTempTextResult:function(){var e=uiResources[$widget.settings._language].docTempTarget;if("domain"===$widget.settings._systemSelectType){var t=$(".translateDomain option:selected",$widget.settings.container).text(),n=uiResources[$widget.settings._language]["DOMAIN_"+t.toUpperCase()];void 0!==n&&(e=n+"<p>"+e+"</p>")}$(".docTempTarget",$widget.settings.container).html(e).removeClass("hide"),$(".translateResult",$widget.settings.container).addClass("hide")},filePluginSendToAssistant:function(e){function t(){$(".buttonAssistant").toggleClass("hide"),$(".assistantLoading").toggleClass("hide")}t(),$widget.settings._userIsAuthenticated?$.ajax({url:$widget.settings._assistantFileServiceUrl,data:{docId:e},headers:$widget.getAuthHeaders(),type:"post",dataType:"json",success:function(e){window.open(e,"_blank").focus()},error:function(e){bsalert({title:e.responseJSON,closeVerbalization:$widget.settings._bsalertCloseVerbalization})},complete:function(){t()}}):(t(),bsalert({title:uiResources[$widget.settings._language].authorizeForMatecatApiUse,alertStyling:"warning",closeVerbalization:$widget.settings._bsalertCloseVerbalization}))}}),"undefined"!=typeof $customWidgetInit&&$customWidgetInit||Tilde.TranslatorWidget.prototype.pluginInitializers.push(Tilde.TranslatorWidget.prototype.filePluginInit),$.extend(Tilde.TranslatorWidgetDefaultOptions,{_translationUrl:"https://yoursite/ws/Service.svc/json/Translate",_updateTranslationUrl:"https://yoursite/ws/Service.svc/json/UpdateTranslation",_dictionaryLetonikaUrl:"https://yoursite/api/ajax/GetDictionaryEntry",_dictionaryUrl:"https://yoursite/ws/Service.svc/json/GetDictionaryEntry",_ttsUrl:"https://yoursite/TTS/GetSound",_textSource:".translateTextSource",_textResult:".translateTextResult",_textTranslateBtn:".translateButton",_updateTranslation:!0,_customUpdateTranslationForm:!1,_landingView:!1,_enableParallelHover:!0,_highlightTranslated:!0,_highlightTranslatedTimeout:1500,_focusAfterClear:!0,_focusAfterTranslate:!0,_focusAfterLoad:!1,_translateAll:!1,_translationLimit:-1,_useDictionaryLetonika:!1,_useDictionary:!1,_useSpeakers:!1,_ttsV2:!1,_onTranslationStarted:null,_onTranslationFinished:null,_onUrlEntered:null,_onTextInput:null,_onScrollBarWidthChanged:null,_text:null}),$.extend(Tilde.TranslatorWidget.prototype,{textTranslator:null,translatedCnt:0,hoveredElements:[],textPluginInit:function(){0!==$(".translateTextSource",$widget.settings.container).length&&("undefined"!=typeof history&&(window.onpopstate=function(e){e.state&&($widget.suppressTranslationOnSystemChange=!0,$widget.setActiveSystem(e.state.system),$widget.suppressTranslationOnSystemChange=!1,$widget.textTranslator.setSourceText(e.state.text))}),$widget.settings._focusAfterLoad&&$($widget.settings._textSource,$widget.settings.container).focus(),$widget.textPluginEvents(),$widget.settings._landingView&&($(".fakeCursor",$widget.settings.container).removeClass("hide"),$(".translateContainerRight",$widget.settings.container).addClass("hide"),$(".translateContainerLeft, .translateContainerHeader",$widget.settings.container).addClass("intro")),$widget.settings._enableParallelHover&&$widget.textPluginInitParallelHover(),$widget.textTranslator=new Tilde.TextTranslator($.extend($widget.settings)),$widget.settings._text?$widget.textTranslator.pta.setSourceText($widget.settings._text):$widget.textPluginSetTempText(),$widget.onSystemChangedHandlers.push(function(){$widget.getActiveSystemObj()?($(".translateTextSource",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().SourceLanguage.Code),$(".backGroundSource",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().SourceLanguage.Code),$(".translateTextResult",$widget.settings.container).attr("lang",$widget.getActiveSystemObj().TargetLanguage.Code)):($(".translateTextSource",$widget.settings.container).removeAttr("lang"),$(".backGroundSource",$widget.settings.container).removeAttr("lang"),$(".translateTextResult",$widget.settings.container).removeAttr("lang"))}),$widget.onSystemChangedHandlers.push($widget.textPluginTranslate),void 0!==$widget.termCorpusChangedHandlers&&$widget.termCorpusChangedHandlers.push($widget.textPluginTranslate),$widget.settings._updateTranslation&&$widget.initUpdateTranslation(),$($widget.settings._textTranslateBtn).removeClass("hide"),void 0!==$widget.onSystemWokenUpHandlers&&$widget.onSystemWokenUpHandlers.push(function(){$widget.textTranslator.doTranslation({translateAll:!0})}))},initUpdateTranslation:function(){$(".editButton",$widget.settings.container).click(function(){$("#translationEditSave").length&&$("#translationEditSave").off(),$("#translationEditClose").length&&$("#translationEditClose").off(),$("#translationEditBack").length&&$("#translationEditBack").off(),$("#translationEditForward").length&&$("#translationEditForward").off(),$widget.settings._customUpdateTranslationForm||$.each($("input,select,a,textarea"),function(e,t){jQueryFocusableElement=$(t),jQueryFocusableElement.data("old-tab-index",jQueryFocusableElement.attr("tabindex")),jQueryFocusableElement.attr("tabindex","-1")});var e=0<$(".dictionarySource").length;e||0!=$(".translateTextResult .selected",$widget.settings.container).length||($(".translateTextResult p .sentence",$widget.settings.container).first().addClass("selected"),$(".backGroundSource div .sentence",$widget.settings.container).first().addClass("selected"));var t=e?$(".dictionarySource").text():$(".backGroundSource .selected",$widget.settings.container).text(),n=e?$(".dictionaryTranslationTranslation").first().text():$(".translateTextResult .selected",$widget.settings.container).text();if($widget.settings._customUpdateTranslationForm)$("#translationEditOriginal").text(t),$("#translationEditTranslation").val(n);else{$("body").append($("<div></div>",{id:"translationEditBackground"}));var a=$("<div></div>",{id:"translationEditForm",class:"form"});$("body").append(a),a.append($("<a></a>",{href:"javascript:;",id:"translationEditClose",title:uiResources[$widget.settings._language].translationEditClose})),a.append($("<label></label>").text(uiResources[$widget.settings._language].translationEditOriginal)),a.append($("<p>",{id:"translationEditOriginal"}).text(t)),a.append($("<label></label>",{for:"translationEditTranslation"}).text(uiResources[$widget.settings._language].translationEditTranslation)),textarea=$("<textarea></textarea>",{id:"translationEditTranslation",autofocus:"autofocus",maxlength:"5000"}).val(n),a.append(textarea),a.append($("<div></div>",{id:"translationEditDescription"}).text(uiResources[$widget.settings._language].translationEditDescription)),a.append($('<div class="translateProgress progress hide"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'));var i=$("<div></div>",{id:"translationEditButtons"});a.append(i),i.append($("<a></a>",{class:"button",id:"translationEditBack",href:"javascript:;"}).text("◄")),i.append($("<a></a>",{class:"button",id:"translationEditSave",href:"javascript:;"}).text(uiResources[$widget.settings._language].translationEditSave)),i.append($("<a></a>",{class:"button",id:"translationEditForward",href:"javascript:;"}).text("►")),$widget.resizeEditForm()}$(window).on("keydown.translationEditForm",function(e){27==e.which&&$("#translationEditClose").trigger("click")}),$("#translationEditClose").click(function(){$(this).is("[disabled]")?event.preventDefault():($(window).off("keydown.translatioEditForm"),$widget.settings._customUpdateTranslationForm||($("#translationEditForm").remove(),$("#translationEditBackground").remove()),$.each($("input,select,a,textarea"),function(e,t){jQueryFocusableElement=$(t),void 0===jQueryFocusableElement.data("old-tab-index")?jQueryFocusableElement.removeAttr("tabindex"):jQueryFocusableElement.attr("tabindex",jQueryFocusableElement.data("old-tab-index"))}))}),e?($("#translationEditBack").hide(),$("#translationEditForward").hide()):($("#translationEditBack").on("click",function(){for(var e=$(".backGroundSource .sentence",$widget.settings.container),t=$(".translateTextResult .sentence",$widget.settings.container),n=$(".translateTextResult .sentence.selected",$widget.settings.container),a=-1,i=0;i<t.length;i++)if(t[i]==n[0]){a=i;break}$(e[a]).removeClass("selected"),$(t[a]).removeClass("selected");var s=0<a?a-1:a;$(e[s]).addClass("selected"),$(t[s]).addClass("selected"),$("#translationEditOriginal").text($(e[s]).text()),$("#translationEditTranslation").val($(t[s]).text()),$widget.settings._customUpdateTranslationForm||$widget.resizeEditForm()}),$("#translationEditForward").on("click",function(){for(var e=$(".backGroundSource .sentence",$widget.settings.container),t=$(".translateTextResult .sentence",$widget.settings.container),n=$(".translateTextResult .sentence.selected",$widget.settings.container),a=-1,i=0;i<t.length;i++)if(t[i]==n[0]){a=i;break}$(e[a]).removeClass("selected"),$(t[a]).removeClass("selected");var s=a<t.length-1?a+1:a;$(e[s]).addClass("selected"),$(t[s]).addClass("selected"),$("#translationEditOriginal").text($(e[s]).text()),$("#translationEditTranslation").val($(t[s]).text()),$widget.settings._customUpdateTranslationForm||$widget.resizeEditForm()})),$("#translationEditSave").on("click",function(){$("#translationEditButtons").addClass("hide"),$("#translationEditForm .translateProgress").removeClass("hide"),$.ajax({url:$widget.settings._updateTranslationUrl,headers:$widget.getAuthHeaders(),method:"POST",dataType:"text",type:"GET",contentType:"application/json",data:JSON.stringify({appID:$widget.settings._appId,systemID:$widget.activeSystemId,text:$("#translationEditOriginal").text(),translation:$("#translationEditTranslation").val(),options:"suggestion,origin=FREE_FOR_ALL"}),success:function(){$(".translateTextResult .sentence.selected",$widget.settings.container).text($("#translationEditTranslation").val()),$("#translationEditClose").trigger("click"),$("#translationEditButtons").removeClass("hide"),$("#translationEditForm .translateProgress").addClass("hide")},error:function(e){$("#translationEditButtons").removeClass("hide"),$("#translationEditForm .translateProgress").addClass("hide"),$widget.settings._bootstrap&&(bsalert({title:uiResources[$widget.settings._language].translationEditSubmitFail,closeVerbalization:$widget.settings._bsalertCloseVerbalization}),$("#translationEditForm").modal("toggle"))}})}),$("#translationEditForm").off(),$("#translationEditForm").on("shown.bs.modal",function(){$("#translationEditTranslation").trigger("focus")})})},resizeEditForm:function(){var e=$("#translationEditForm"),t=$("#translationEditForm textarea");t.height(0);var n=t[0].scrollHeight;0<navigator.userAgent.indexOf("Trident")||0<navigator.userAgent.indexOf("MSIE")||0<navigator.userAgent.indexOf("Chrome")?n+=t.outerHeight()-t.innerHeight():n+=t.outerHeight()-t.height(),t.css("height",n+"px");var a=0;$.each(e.children(),function(e,t){$(t).hasClass("hide")||"translationEditClose"==$(t).attr("id")||(a+=$(t).outerHeight(!0))}),e.css("height",a+"px"),e.css("top","calc(50% - "+a/2+"px)")},textPluginUnload:function(){$widget.textTranslator&&$widget.textTranslator.clearTranslation()},textPluginEvents:function(){var e="click";-1<navigator.userAgent.indexOf("Android")&&-1<navigator.userAgent.indexOf("Version/")&&(e+=" touchstart"),$($widget.settings._textTranslateBtn,$widget.settings.container).on("click",function(){if("true"===$(this).attr("data-disabled"))return!1;$widget.textPluginTranslate()}),$(".translateResultClear").on("click",function(){$widget.textPluginResultClear()}),$(".sourceSpeak").on("click",function(){$widget.textPluginSpeak("sourceAudio",$(".translateTextSource",$widget.settings.container).val())}),$(".targetSpeak").on("click",function(){$widget.textPluginSpeak("targetAudio",$(".dictionarySource").length?$(".dictionarySource").text():$(".translateTextResult",$widget.settings.container).text())}),$(".translateTextSourceContainer",$widget.settings.container).bind(e,function(){if("true"===$(".translateTextTempSourceContainer").attr("data-disabled"))return!1;$($widget.settings._textSource,$widget.settings.container).focus()}),$($widget.settings._textSource,$widget.settings.container).bind("focusout",$.proxy(function(){""==$($widget.settings._textSource,$widget.settings.container).val()&&$widget.textPluginSetTempText()},this)),$widget.settings._onTranslationStarted=function(){$widget.textPluginTranslationStarted()},$widget.settings._onTranslationFinished=function(){$widget.textPluginTranslationFinished()},$widget.settings._enableParallelHover&&$(".translateTextSource").on("mousemove mouseleave",function(s){var o=[],r=null;$.each($(".backGroundSource").find(".classMTsource"),function(e,t){for(var n=t.getClientRects(),a=0;a<n.length;a++){var i=n[a];if(s.clientX>=i.left&&s.clientY>=i.top&&s.clientX<=i.right&&s.clientY<=i.bottom)return r=t,!1}}),null!=r&&$.each($(r).find("span"),function(e,t){for(var n=t.getClientRects(),a=0;a<n.length;a++){var i=n[a];s.clientX>=i.left&&s.clientY>=i.top&&s.clientX<=i.right&&s.clientY<=i.bottom&&o.push(t)}});for(var e=0;e<$widget.hoveredElements.length;e++){var t=$widget.hoveredElements[e];-1==$.inArray(t,o)&&$(t).trigger("mouseleave")}for(var n=0;n<o.length;n++){var a=o[n];-1==$.inArray(a,$widget.hoveredElements)&&$(a).trigger("mouseenter")}$widget.hoveredElements=o})},textPluginTranslationStarted:function(){$($widget.settings._textResult,$widget.settings.container).removeClass("translateTextTemp"),$(".translateProgress",this.settings.container).removeClass("hide")},textPluginTranslationFinished:function(){$(".translateProgress",$widget.settings.container).addClass("hide"),0!==$($widget.settings._textSource).length&&0==$($widget.settings._textSource).val().length&&$widget.textPluginSetTempTextResult()},textPluginResultClear:function(){$widget.translatedCnt=0,$widget.textPluginSetTempText(),$widget.settings._focusAfterClear&&$($widget.settings._textSource,$widget.settings.container).focus(),$(".translateResultClear").addClass("hide")},textPluginInitParallelHover:function(){var e=/.*Windows Phone (\d.\d).*/.exec(navigator.userAgent);e&&e.length&&1<e.length&&e[1]<="8.0"||($(".translateTextSource").on("scroll",function(){var e=$(".backGroundSource")[0],t=$(".translateTextSource")[0];if(e.scrollTop!=t.scrollTop&&(e.scrollTop=t.scrollTop),!window.Tilde.targetScrollingTime||200<(new Date).getTime()-window.Tilde.targetScrollingTime){var n=$(".translateTextResult")[0];n.scrollTop!=t.scrollTop&&(window.Tilde.sourceScrollingTime=(new Date).getTime(),n.scrollTop=t.scrollTop)}}),$(".translateTextResult").on("scroll",function(){var e=$(".translateTextSource");-1<navigator.userAgent.indexOf("Android")&&-1<navigator.userAgent.indexOf("Version/")&&null!=document.activeElement&&document.activeElement!=document&&document.activeElement!=document.body||(!window.Tilde.sourceScrollingTime||200<(new Date).getTime()-window.Tilde.sourceScrollingTime)&&e[0].scrollTop!=this.scrollTop&&(window.Tilde.targetScrollingTime=(new Date).getTime(),e[0].scrollTop=this.scrollTop)}),-1<navigator.userAgent.indexOf("Android")&&-1<navigator.userAgent.indexOf("Version/")&&$(".translateContainerRight").bind("touchstart",function(){$(":focus").blur()}),$(".translateTextResult").on("mouseenter mouseleave",".mt-translation",function(e){$(".hoverStyleSource").removeClass("hoverStyleSource"),$(".mt-translation.hover").removeClass("hover"),"mouseenter"===e.type&&($(this).addClass("hover"),$('.classMTsource[cursorId="'+$(this).attr("cursorId")+'"]').addClass("hoverStyleSource"))}))},suppressTranslationOnSystemChange:!1,textPluginTranslate:function(){$widget.suppressTranslationOnSystemChange||($widget.settings._onUrlEntered&&$widget.textTranslator.checkTextForUrl(),$widget.textTranslator&&$widget.textTranslator.doTranslation({translateAll:!0}))},textPluginSetTempText:function(){$widget.textTranslator&&$widget.textTranslator.clearTranslation(),$widget.textPluginSetTempTextResult(),$widget.textPluginSetTempTextSource(),$($widget.settings._textResult,$widget.settings.container).removeClass("transLimit"),$(".sourceLang, .targetLang",$widget.settings.container).text(""),$(".translateResultClear",$widget.settings.container).addClass("hide"),$(".translateProgress",$widget.settings.container).addClass("hide"),$widget.settings._useSpeakers&&($(".sourceSpeak, .targetSpeak",$widget.settings.container).addClass("hide"),$(".sourceSpeak, .targetSpeak",$widget.settings.container).attr("aria-hidden",!0))},textPluginSetTempTextSource:function(){$($widget.settings._textSource,$widget.settings.container).val(""),$widget.settings._landingView&&$(".intro .fakeCursor",$widget.settings.container).removeClass("hide"),$(".translateTextTempSourceContainer",$widget.settings.container).removeClass("hide"),$(".translateTextTempSourceContainer",$widget.settings.container).html(uiResources[$widget.settings._language].sourceTextTooltip),$(".translateTextTempSourceContainer",$widget.settings.container).unbind("focus"),$(".translateTextTempSourceContainer",$widget.settings.container).bind("focus",function(){$(".translateTextTempSourceContainer",$widget.settings.container).addClass("hide")}),$($widget.settings._textSource,$widget.settings.container).unbind("focus"),$($widget.settings._textSource,$widget.settings.container).bind("focus",function(){$widget.settings._landingView&&$(".intro .fakeCursor",$widget.settings.container).addClass("hide"),$(".translateTextTempSourceContainer",$widget.settings.container).addClass("hide")})},textPluginSetTempTextResult:function(){$($widget.settings._textResult,$widget.settings.container).addClass("translateTextTemp");var e=uiResources[$widget.settings._language].targetTextTooltip;if("domain"===$widget.settings._systemSelectType){var t=$(".translateDomain option:selected",$widget.settings.container).text(),n=uiResources[$widget.settings._language]["DOMAIN_"+t.toUpperCase()];void 0!==n&&(e=n+"<p>"+e+"</p>")}$($widget.settings._textResult,$widget.settings.container).html(e).removeClass("noNetwork")},textPluginSpeak:function(s,e){if($widget.settings._ttsV2)$("."+s+"Icon").addClass("hide"),$("."+s+"Loading").removeClass("hide"),$.ajax({url:$widget.settings._ttsUrl+"/synthesis",type:"POST",data:{appID:$widget.settings._appId,text:e.trim()},headers:$widget.getAuthHeaders(),success:function(e){var t="clientId="+encodeURIComponent($widget.settings._clientId);if(!$widget.settings._apiIsInTheSameDomain){var n=$widget.readCookie("smts");n&&(t+="&websiteAuthCookie="+encodeURIComponent(n))}$("."+s+"Icon").removeClass("hide"),$("."+s+"Loading").addClass("hide");var a=$widget.settings._ttsUrl+"/synthesis/"+encodeURIComponent(e.request_id)+"/audio?appID="+$widget.settings._appId+"&"+t;$('audio[id="'+s+'"] source').attr("src",a);var i=document.getElementById(s);i.paused?(i.load(),i.play()):i.pause()},error:function(e){alert("Kļūda, iespējams, ka teksts nav latviešu valodā.")}});else{$('audio[id="'+s+'"] source').attr("src",$widget.settings._ttsUrl+"?text="+e.substring(0,144));var t=document.getElementById(s);t.paused?(t.load(),t.play()):t.pause()}},getTTSAuthParams:function(){return authParams}}),"undefined"!=typeof $customWidgetInit&&$customWidgetInit||Tilde.TranslatorWidget.prototype.pluginInitializers.push(Tilde.TranslatorWidget.prototype.textPluginInit),Tilde.TextTranslator=function(e){this.init(e)},Tilde.TextTranslator.prototype={options:null,pta:null,timeoutParagraph:null,timeoutText:null,translationInProgress:!1,init:function(e){void 0===e&&alert('no options specified for "Tilde.TextTranslator"'),this.options=e;var t=new Tilde.ProgressiveTextAreaOptions;if(t.directCompare=!1,t.textAreaSelector=e._textSource,t.onNewParagraph=$.proxy(this.onNewParagraph,this),t.onTextChanged=$.proxy(this.onTextChanged,this),t.onTextInput=$.proxy(this.onTextInput,this),this.options._focusAfterLoad&&(t.onTextChangedWithoutDelay=$.proxy(function(){0<$(this.options._textSource).val().length&&$(".translateTextTempSourceContainer",this.options.container).addClass("hide")},this)),this.options._onScrollBarWidthChanged){$(window).resize(this.checkScrollbarWidth);var n=this;if(t.onTextChangedWithoutDelay){var a=t.onTextChangedWithoutDelay;t.onTextChangedWithoutDelay=$.proxy(function(){a(),window.setTimeout(n.checkScrollbarWidth,0)},this)}}t.onBackgroundHover=this.options.onBackgroundHover,this.pta=new Tilde.ProgressiveTextArea(t)},setSystem:function(e){this.options.translatorSystem=e},setTargetText:function(e){$(this.options._textResult).html(e)},clearTranslation:function(){this.setSourceText("")},onNewParagraph:function(){void 0!==this.timeoutParagraph&&null!=this.timeoutParagraph&&(clearTimeout(this.timeoutParagraph),this.timeoutParagraph=null),void 0!==this.timeoutText&&null!=this.timeoutText&&(clearTimeout(this.timeoutText),this.timeoutText=null),$.proxy(this.onNewParagraphWork,this)()},onTextChanged:function(){void 0!==this.timeoutText&&null!=this.timeoutText&&(clearTimeout(this.timeoutText),this.timeoutText=null),this.timeoutText=setTimeout($.proxy(this.onNewParagraphWork,this),250)},onTextInput:function(e){this.options._onTextInput&&this.options._onTextInput(e)},onBackgroundHover:function(e,t){for(var n=this.obj,a=void 0===e?$(".backGroundSource").html(""):null;;){if(null==n){$(".backGroundSource").append($("<br/>"));break}if(void 0===e||n.id==e){var i=n.string,s=null;if(void 0===e?(s=$("<div></div>",{id:"source-mt-"+n.id,cursorId:n.id,class:"classMTsource"+(n.latest?" latestHighlight":"")})).appendTo(a):(0==(s=$("#source-mt-"+e)).length&&(s=$("<div></div>",{id:"source-mt-"+n.id,cursorId:n.id,class:"classMTsource"+(n.latest?" latestHighlight":"")}),t?s.insertAfter($("#source-mt-"+t)):s.appendTo($(".backGroundSource"))),s.empty()),0==i.replace(/\s/g,"").length)s.html("<br />");else{var o=n.translation;$widget.settings._enableParallelHover&&o&&o.originalSentenceRanges&&o.sourceWordRanges&&o.phraseAlignment&&o.confidentWordAlignment?$widget.textTranslator.drawSentencePhraseWordTags(s,i,n.id,o.sourceWordRanges,o.originalSentenceRanges,o.phraseAlignment,o.confidentWordAlignment,0):s.text(i)}}n=n.child}$(".translateTextSource").trigger("scroll")},clearAlltimeouts:function(){void 0!==this.timeoutText&&null!=this.timeoutText&&(clearTimeout(this.timeoutText),this.timeoutText=null),void 0!==this.timeoutParagraph&&null!=this.timeoutParagraph&&(clearTimeout(this.timeoutParagraph),this.timeoutParagraph=null)},onNewParagraphWork:function(){for(var e=this.pta.obj;;)if(e.changed)e.translation=e.string,e.changed=!1,e.translated=!1,e.translating&&(e.retranslate=!0);else if(null==(e=e.child))break;this.redrawResult(),$widget.settings._onUrlEntered&&$widget.textTranslator.checkTextForUrl(),this.doTranslation({translateAll:$widget.settings._translateAll})},previousScrollBarWidth:0,checkScrollbarWidth:function(){var e=$($widget.settings._textSource)[0];if(void 0!==e){var t=e.offsetWidth-e.clientWidth;this.previousScrollBarWidth!=t&&(window.setTimeout(function(){$(".translateTextSource").trigger("scroll")},50),$widget.settings._onScrollBarWidthChanged(t),this.previousScrollBarWidth=t)}},redrawResult:function(){var e=this.pta.obj;for($(this.options._textResult).html(""),$(".backGroundSource .selected").removeClass("selected");;){if(null==e)break;var t=e.translation;translationData=null,void 0!==e.translation.translation&&(t=e.translation.translation,translationData=e.translation);var n=e.translated||0==t.replace(/\s/g,"").length,a=0==t.replace(/\s/g,"").length,i=$("<p></p>",{cursorId:e.id,class:"mt-translation","aria-haspopup":"true",id:"mt-result-"+e.id});if(a?i.append($("<br />")):$widget.settings._enableParallelHover&&translationData&&translationData.translationSentenceRanges&&translationData.targetWordRanges&&translationData.phraseAlignment&&translationData.confidentWordAlignment?this.drawSentencePhraseWordTags(i,t,e.id,translationData.targetWordRanges,translationData.translationSentenceRanges,translationData.phraseAlignment,translationData.confidentWordAlignment,1):i.text(t),$(this.options._textResult).append(i),null!=e.scroll&&this.options.scrollToTranslated&&($(this.options._textResult)[0].scrollTop=i[0].offsetTop-$(this.options._textResult).height()/2,e.scroll=null),null!=e.latest&&this.options._highlightTranslated){$('.mt-translation[cursorId="'+e.id+'"]').addClass("latestHighlight"),$('.classMTsource[cursorId="'+e.id+'"]').addClass("latestHighlight");var s=e.id;setTimeout($.proxy(function(){this.latest=null,$('.mt-translation[cursorId="'+s+'"]').removeClass("latestHighlight"),$('.classMTsource[cursorId="'+s+'"]').removeClass("latestHighlight")},e),this.options._highlightTranslatedTimeout)}n?i.removeAttr("translationProgress"):i.attr("translationProgress","true"),e=e.child}this.options._onScrollBarWidthChanged&&this.checkScrollbarWidth()},highlightMouseEnter:function(e){for(var t=$(this).attr("class").split(" "),n=[],a=[],i=1;i<t.length;i++)t[i]&&"hover"!=t[i]&&"highlight-sibling"!=t[i]&&0==!t[i].indexOf("sibling")&&n.push("."+t[i]),t[i]&&0==t[i].indexOf("sibling")&&a.push("."+t[i].replace("sibling","word"));0<n.length&&$(n.join(", ")).addClass("hover"),0<a.length&&$(a.join(", "),$(this).parent().parent()).addClass("highlight-sibling")},highlightMouseLeave:function(e){for(var t=$(this).attr("class").split(" "),n=[],a=[],i=1;i<t.length;i++)t[i]&&"hover"!=t[i]&&"highlight-sibling"!=t[i]&&0==!t[i].indexOf("sibling")&&n.push("."+t[i]),t[i]&&0==t[i].indexOf("sibling")&&a.push("."+t[i].replace("sibling","word"));0<n.length&&$(n.join(", ")).removeClass("hover"),0<a.length&&$(a.join(", "),$(this).parent().parent()).removeClass("highlight-sibling")},highlightMouseEnterWithoutBubble:function(e){e.stopPropagation(),$.proxy($widget.textTranslator.highlightMouseEnter,this)(e)},highlightMouseLeaveWithoutBubble:function(e){e.stopPropagation(),$.proxy($widget.textTranslator.highlightMouseLeave,this)(e)},translationSentenceClicked:function(e){$(this).hasClass("selected")?($(this).removeClass("selected"),$(".backGroundSource .sentence."+$(this).attr("class").split(" ")[1]).removeClass("selected")):($(".backGroundSource .sentence.selected").removeClass("selected"),$(".translateTextResult .sentence.selected").removeClass("selected"),$(this).addClass("selected"),$(".backGroundSource .sentence."+$(this).attr("class").split(" ")[1]).addClass("selected"))},graphemeSplitter:GraphemeSplitter(),drawSentencePhraseWordTags:function(e,t,n,a,i,s,o,r){0==r&&(sortedPhraseAlignment=s.slice(),sortedPhraseAlignment.sort(function(e,t){return e[0][0]-t[0][0]}),s=sortedPhraseAlignment);var l=0,d=-1,g=null,u=-1,c=null,p=this.graphemeSplitter.splitGraphemes(t);if(0==a.length)e.text(t);else{for(var h=0;h<a.length;h++){var m=null;l<a[h][0]&&(m=document.createTextNode(p.slice(l,a[h][0]).join(""))),l=a[h][1],0<=d&&-1<$.inArray(h,s[d][r])?null!==m&&(""==$.trim(m.nodeValue)?g.append(m):(c.append(g),c.append(m),(g=$("<span></span>",{class:"phrase phrase-"+n+"-"+s[d][0].join("-")+"-"+s[d][1].join("-")})).hover(1==r?this.highlightMouseEnter:this.highlightMouseEnterWithoutBubble,1==r?this.highlightMouseLeave:this.highlightMouseLeaveWithoutBubble))):(g&&c.append(g),null!==m&&0<=u&&a[h][0]<=i[u][0]+i[u][1]&&c.append(m),d+=1,(g=$("<span></span>",{class:"phrase phrase-"+n+"-"+(0<s.length?s[d][0].join("-")+"-"+s[d][1].join("-"):"0")})).hover(1==r?this.highlightMouseEnter:this.highlightMouseEnterWithoutBubble,1==r?this.highlightMouseLeave:this.highlightMouseLeaveWithoutBubble)),(u<0||a[h][0]>i[u][0]+i[u][1])&&(c&&e.append(c),null!==m&&e.append(m),u+=1,(c=$("<span></span>",{class:"sentence sentence-"+n+"-"+u})).hover(1==r?this.highlightMouseEnter:this.highlightMouseEnterWithoutBubble,1==r?this.highlightMouseLeave:this.highlightMouseLeaveWithoutBubble),1==r&&c.click(this.translationSentenceClicked));for(var f=[],w=0;w<o.length;w++)if(o[w][r]==h){f.push("word-"+n+"-"+o[w][0]+"-"+o[w][1]);for(var v=0;v<o.length;v++)o[v][1==r?0:1]==o[w][1==r?0:1]&&v!=w&&f.push("sibling-"+n+"-"+o[v][0]+"-"+o[v][1])}wordHtml=$("<span></span>",{class:"word "+f.join(" ")}).text(p.slice(a[h][0],a[h][1]).join("")),wordHtml.hover(1==r?this.highlightMouseEnter:this.highlightMouseEnterWithoutBubble,1==r?this.highlightMouseLeave:this.highlightMouseLeaveWithoutBubble),g.append(wordHtml)}g.html()&&c.append(g),c.html()&&e.append(c),l<t.length&&e.append(document.createTextNode(p.slice(l,p.length).join("")))}},makeAllNotTranslated:function(){for(var e=this.pta.obj;;){if(null==e)break;e.translated=!1,e.changed=!1,e.translating=!1,e.retranslate=!1,e.translation=e.string,e=e.child}this.redrawResult()},setSourceText:function(e){this.setTargetText(""),this.pta.setSourceText(e),this.doTranslation({translateAll:!0})},checkTextForUrl:function(){var e=$(this.options._textSource,this.options.container).val(),t=/\b((?:https?:(?:\/{1,3}|[a-z0-9%])|[a-z0-9.\-]+[.](?:com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|Ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\/)(?:[^\s()<>{}\[\]]+|\([^\s()]*?\([^\s()]+\)[^\s()]*?\)|\([^\s]+?\))+(?:\([^\s()]*?\([^\s()]+\)[^\s()]*?\)|\([^\s]+?\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’])|(?:[a-z0-9]+(?:[.\-][a-z0-9]+)*[.](?:com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|Ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\b\/?(?!@)))/gi.exec(e);if(t){var n=t[0];.8<n.length/$.trim(e).length&&$widget.settings._onUrlEntered(n)}},doTranslation:function(e){if($(".editButtonContainer").addClass("hide"),$(".backGroundSource .selected").removeClass("selected"),$(".translateTextResult .selected").removeClass("selected"),this.redrawBackground(),cursor=this.pta.obj,!this.translationInProgress&&cursor&&(this.translationInProgress=!0,this.options._onTranslationStarted&&this.options._onTranslationStarted()),void 0===e&&(e={translateAll:!1}),e.translateAll&&this.makeAllNotTranslated(),$widget.settings._useSpeakers){var t=$(".sourceSpeak");t.addClass("hide"),t.attr("aria-hidden",!0),$widget.getActiveSystemObj()&&$(".translateTextSource").val()&&"lv"===$widget.getActiveSystemObj().SourceLanguage.Code&&(t.removeClass("hide"),t.removeAttr("aria-hidden"))}if((void 0===e||void 0===e.merryGoRound||!e.merryGoRound)&&null!==$widget.getActiveSystemObj()){var n=$widget.getActiveSystemObj().SourceLanguage.Code,a=$widget.getActiveSystemObj().TargetLanguage.Code,i=n+"-"+a;if(text=$(".translateTextSource").val().trim(),!$widget.settings._useDictionaryLetonika||"en-lv"!==i&&"lv-en"!==i&&"lv-ru"!==i){if($widget.settings._useDictionary&&0<text.length&&text.length<100&&text.trim().split(" ").length<=3){var s=$widget.getSystemMetaValue($widget.getActiveSystemObj().Metadata,"tags");if(null!=s&&-1<s.indexOf("dictionary"))return void this.doDictionaryTranslation(n,a,text,e)}}else if(0<text.length&&-1==text.search(/\s/g))return void this.doDictionaryLetonikaTranslation(n,a,cursor.string,e)}this.doTextTranslation(e)},appendPageToBrowsingHistory:function(){if("undefined"!=typeof history){var e=$($widget.settings._textSource,$widget.settings.container).val(),t=$widget.activeSystemId;if(e&&t){var n=document.location.href,a=n.indexOf("?");-1!=a&&(n=n.substring(0,a)),void 0===history.state||null==history.state?history.replaceState({text:e,system:t},"",n+"?text="+encodeURIComponent(e)+"&systemId="+t):history.state.text==e&&history.state.system==t||history.pushState({text:e,system:t},"",n+"?text="+encodeURIComponent(e)+"&systemId="+t)}}},doDictionaryTranslation:function(e,t,a,f){a&&(that=this,$.ajax({url:$widget.settings._dictionaryUrl,headers:$widget.getAuthHeaders(),method:"GET",dataType:"json",type:"GET",data:{word:a,sourceLanguage:e,targetLanguage:t},success:function(e){if(e){for($(".translateResultClear",$widget.settings.container).removeClass("hide"),n=0;n<e.length;n++){$(".translateTextResult").empty(),$(".translateTextResult").append($("<h2></h2>",{text:e[n].translations[n].target_word,class:"dictionarySource"}));var t="banana",a=null;for(i=0;i<e[n].translations.length;i++){var s=e[n].translations[i];if(s.type!==t){if(s.type){var o=s.type;uiResources[$widget.settings._language]["dictionary-entry-word-class-"+s.type]&&(o=uiResources[$widget.settings._language]["dictionary-entry-word-class-"+s.type]),$(".translateTextResult").append($("<p></p>",{text:o,class:"dictionaryWordType"}))}t=s.type,a=$("<table></table>",{class:"dictionaryTranslationTable"}),$(".translateTextResult").append(a)}var r=$("<tr></tr>");a.append(r);var l=$("<td></td>",{class:"dictionaryTranslationProbabilityCell"});r.append(l);var d=$("<span></span>",{class:"dictionaryTranslationProbabilityContainer"});l.append(d);d.append($("<span></span>",{class:"dictionaryTranslationProbability",style:"width:"+100*s.probability*1+"%",title:s.probability.toString()}));var g=$("<td></td>",{class:"dictionaryTranslationCell "+s.target_word});r.append(g);var u=$("<a></a>",{text:s.target_word,href:"javascript:;",class:"dictionaryTranslationTranslation"});g.append(u),u.click(function(){that.appendPageToBrowsingHistory();var e=$widget.getReverseSystem();e&&($widget.suppressTranslationOnSystemChange=!0,$widget.setActiveSystem(e.ID),$widget.suppressTranslationOnSystemChange=!1,that.setSourceText(this.innerHTML),that.appendPageToBrowsingHistory())});var c=$("<td></td>",{class:"dictionaryTranslationReverseCell"});if(r.append(c),s.reverse_translations)for(reverseTransIndex=0;reverseTransIndex<s.reverse_translations.length;reverseTransIndex++){0<c.text().length&&c.append(", ");var p=$("<a></a>",{text:s.reverse_translations[reverseTransIndex],class:"dictionaryTranslationReverse",href:"javascript:;"});c.append(p),p.click(function(){that.appendPageToBrowsingHistory(),that.setSourceText(this.innerHTML),that.appendPageToBrowsingHistory()})}}if(void 0!==e[n].examples&&null!=e[n].examples&&0<e[n].examples.length)for($(".translateTextResult").append($("<p></p>",{text:uiResources[$widget.settings._language].examples,class:"dictionaryExamplesTitle"})),i=0;i<e[n].examples.length;i++){var h=e[n].examples[i],m=$("<div></div>",{class:"dictionaryExamplePair"});m.append($("<p></p>",{html:h.source,class:"dictionaryExample"})),m.append($("<p></p>",{html:h.target,class:"dictionaryExample"})),$(".translateTextResult").append(m)}cursor.translating=!1,cursor.translated=!0,that.checkIfStoppedTranslating()}$(".editButtonContainer").removeClass("hide"),$widget.settings._useSpeakers&&($(".targetSpeak").addClass("hide"),$widget.getActiveSystemObj()&&$(".translateTextSource").val()&&"lv"===$widget.getActiveSystemObj().TargetLanguage.Code&&$(".targetSpeak").removeClass("hide"))}else that.doTextTranslation(f);cursor&&(cursor.translating=!1)},error:function(e){that.doTextTranslation(f),cursor&&(cursor.translating=!1)}}))},doDictionaryLetonikaTranslation:function(e,t,n,a){$.ajax({context:{ref:this},dataType:this.options.jsonType,type:"GET",contentType:"application/json",url:this.options._dictionaryLetonikaUrl,data:{appid:this.options._appId,srcLng:e,trgLng:t,phrase:n},success:function(e){var t=e.data;""!==t?(t=(t=t.split("SEE_FULL_ENTRY").join(uiResources[$widget.settings._language].seeFullEntry)).split("<a href").join('<a target="_blank" href'),$(this.ref.options._textResult).html(t),$(".translateResultClear",$widget.settings.container).removeClass("hide"),cursor.translating=!1,cursor.translated=!0,this.ref.checkIfStoppedTranslating()):this.ref.doTextTranslation(a)},error:this.onSuccess})},checkIfStoppedTranslating:function(){for(var e=this.pta.obj,t=!1;e&&(""==e.string||e.translated&&!e.translating||(t=!0),e=e.child),e;);t||(this.translationInProgress=!1,this.options._onTranslationFinished&&this.options._onTranslationFinished(),$(".editButtonContainer").hasClass("hide")&&0<$(".translateTextResult p").length&&0==$(".translateTextResult p[translationprogress=true]").length&&0==$(".translateTextResult .dictionarySource").length&&$(".editButtonContainer").removeClass("hide"))},doTextTranslation:function(e){for(var t=null;;){var n=this;if(cursor&&cursor.translating){window.setTimeout(function(){n.doTextTranslation(e)},100);break}if(!cursor||cursor.changed||cursor.translated&&!cursor.retranslate||cursor.translating){if(null==cursor){this.checkIfStoppedTranslating();break}t=cursor.id,cursor=cursor.child}else{if(cursor.translating=!0,cursor.retranslate=!1,"false"===$("#hidOnline").val())return this.options._onTranslationFinished&&this.options._onTranslationFinished(),this.translationInProgress=!1,$($widget.settings._textResult,$widget.settings.container).text(uiResources[$widget.settings._language].noInternet).addClass("noNetwork"),void(cursor.translating=!1);if(-1!==$widget.settings._translationLimit&&$widget.translatedCnt>$widget.settings._translationLimit)return this.options._onTranslationFinished&&this.options._onTranslationFinished(),this.translationInProgress=!1,$($widget.settings._textResult,$widget.settings.container).text(uiResources[$widget.settings._language].transLimit).addClass("transLimit"),void(cursor.translating=!1);if("true"===$(".translateTextTempSourceContainer").attr("data-disabled"))return this.options._onTranslationFinished&&this.options._onTranslationFinished(),this.translationInProgress=!1,void(cursor.translating=!1);if(this.redrawBackground(cursor.id,t),void 0!==cursor.translation.translation||0!=cursor.translation.replace(/\s/g,"").length){$widget.settings._focusAfterTranslate||$($widget.settings._textSource).blur(),$(".translateResultClear",$widget.settings.container).removeClass("hide"),"hugo.lv"===this.options._appId?($(".sourceLang",$widget.settings.container).text($(".translate-source-language .dropdown-item.active").text()),$(".targetLang",$widget.settings.container).text($(".translate-target-language .dropdown-item.active").text())):($(".sourceLang",$widget.settings.container).text($(".translateSourceLang option:selected",$widget.settings.container).text()),$(".targetLang",$widget.settings.container).text($(".translateTargetLang option:selected",$widget.settings.container).text())),$($widget.settings._textResult,$widget.settings.container).removeClass("noNetwork"),$widget.settings._landingView&&($(".fakeCursor",$widget.settings.container).addClass("hide"),$(".translateContainerRight",$widget.settings.container).removeClass("hide"),$(".translateContainerLeft, .translateContainerHeader",$widget.settings.container).removeClass("intro")),$.ajax({context:{id:cursor.id,obj:this,onAjaxError:this.options.onAjaxError},dataType:this.options.jsonType,type:"POST",contentType:"application/json",url:this.options._translationUrl,headers:$widget.getAuthHeaders(),data:JSON.stringify({appID:this.options._appId,text:cursor.string,systemID:$widget.activeSystemId,options:"widget=text,alignment,markSentences"+($widget.termCorpusId&&"Ready"==$widget.getSelectedTermCorpusStatus()?",termCorpusId="+$widget.termCorpusId:"")}),success:this.onSuccess,error:this.onSuccess});break}cursor.translated=!0,cursor.translating=!1}}},onSuccess:function(e){401==e.status&&$widget.settings._loginUrl&&(window.location=$widget.settings._loginUrl);var t=this.id,n=null;if(void 0!==this.obj){for(var a=this.obj.pta.obj;;){if(a.id==t&&(a.translating=!1),a.id==t&&!a.changed){if(a.translated=!0,a.latest=!0,a.scroll=!0,void 0===e||null==e||e.status&&"200"!==e.status||!e.translation&&!e.replace){var i=!1;void 0!==e.responseJSON&&void 0!==e.responseJSON.ErrorCode&&"21"===e.responseJSON.ErrorCode&&$widget.showSystemWaking&&"function"==typeof $widget.showSystemWaking&&($widget.showSystemWaking(!1),i=!0),a.translation=i?a.translation:"{{"+a.translation+"}}"}else{if(void 0!==e.countSentences){var s=parseInt(e.countSentences);$widget.translatedCnt+=0<s?s:1}else $widget.translatedCnt++;if(a.translation=e,$widget.settings._useSpeakers){var o=$(".targetSpeak");o.addClass("hide"),o.attr("aria-hidden",!0),"lv"===$widget.getActiveSystemObj().TargetLanguage.Code&&(o.removeClass("hide"),o.removeAttr("aria-hidden"))}}this.obj.checkIfStoppedTranslating();break}if(n=a.id,null==(a=a.child))break}this.obj.redrawResult(),this.obj.redrawBackground(t,n),this.obj.doTranslation({translateAll:!1,merryGoRound:!0})}},redrawBackground:function(e,t){this.options._enableParallelHover&&$.proxy(this.onBackgroundHover,this.pta)(e,t)}},Tilde.ProgressiveTextAreaElement=function(){},Tilde.ProgressiveTextAreaElement.prototype={start:function(){for(var e=this,t=0;;){if(null==e.parent)break;t+=(e=e.parent).string.length+1}return t},string:"",end:function(){return this.start()+this.string.length},child:null,parent:null,changed:!0,translation:"",translated:!1,translating:!1,retranslate:!1,latest:null,scroll:null,id:0,copy:function(e){var t=new Tilde.ProgressiveTextAreaElement;void 0===e&&(e=this),t.string=e.string,t.id=e.id,t.changed=e.changed,t.translated=e.translated,t.translating=e.translating,t.retranslate=e.retranslate;var n=null;return null!=e.child&&(n=e.child.copy()),null!=n&&((t.child=n).parent=t),t}},Tilde.ProgressiveTextAreaOptions=function(){},Tilde.ProgressiveTextAreaOptions.prototype={textAreaSelector:"",directCompare:!1,onTextInput:null,onTextChanged:null,onNewParagraph:null,onBackgroundHover:null},Tilde.ProgressiveTextArea=function(e){this.init(e)},Tilde.ProgressiveTextArea.prototype={NEW_LINE:"<BREAK>",obj:null,objID:0,oldString:"",options:new Tilde.ProgressiveTextAreaOptions,init:function(e){void 0===e&&alert('no options specified for "Tilde.ProgressiveTextArea"'),this.options=e,this.obj=new Tilde.ProgressiveTextAreaElement,$(this.options.textAreaSelector).off("keypress keyup keydown").keypress($.proxy(this.onKeyStroke,this)).keyup($.proxy(this.onKeyStroke,this)).keydown($.proxy(this.onKeyStroke,this)),$(this.options.textAreaSelector).off("paste copy cut delete input").bind("paste",$.proxy(this.onKeyStroke,this)).bind("copy",$.proxy(this.onKeyStroke,this)).bind("cut",$.proxy(this.onKeyStroke,this)).bind("delete",$.proxy(this.onKeyStroke,this)).bind("input",$.proxy(this.onKeyStroke,this))},getLastChild:function(e){return void 0===e?this.getLastChild(this.obj):null==e.child?e:this.getLastChild(e.child)},getStringBetween:function(e,t,n){for(var a=e.length,i=0,s=n;s<e.length;s++)if("\n"==e.charAt(s)){a=s;break}for(s=n-1;0<=s;s--)if("\n"==e.charAt(s)){i=s+1;break}return{string:e.substring(i,a),start:i,end:a}},getCharChanged:function(e,t){var n="removed",a="";e.length<=t.length&&(n="added",e.length==t.length&&(n="changed",e==t&&(n="equal")));var i=0;switch(n){case"added":for(var s=0;s<t.length;s++)if(e.charAt(s)!=t.charAt(s)){a=t.charAt(s),i=s+(t.length-e.length);break}break;case"removed":case"changed":for(s=0;s<e.length;s++)if(e.charAt(s)!=t.charAt(s)){a=e.charAt(s),i=s;break}}return"\n"==a&&(a=this.NEW_LINE),{type:n,char:a,start:i}},saveState:function(){for(var e=this.obj;;){if(null==e)break;e.changed=!1,e=e.child}},recalculate:function(){this.obj=this.createNewObject()},createNewObject:function(){var e=new Tilde.ProgressiveTextAreaElement,t=e,n="";0!==$(this.options.textAreaSelector).length&&(n=$(this.options.textAreaSelector).val());for(var a=0,i=this.objID;;){if(t.string=this.getStringBetween(n,"\n",a).string,t.id=++i,t.changed=!0,(a=t.end()+1)>n.length)break;t.child=new Tilde.ProgressiveTextAreaElement,t=(t.child.parent=t).child}return this.objID=i,e},setSourceText:function(e){this.objID=0,this.oldString="",$(this.options.textAreaSelector).val(e),this.recalculate(),this.redrawBackground()},kayTimeout:null,onKeyStroke:function(e){if(this.options.onTextChangedWithoutDelay&&this.options.onTextChangedWithoutDelay(),void 0!==this.kayTimeout&&null!=this.kayTimeout&&(clearTimeout(this.kayTimeout),this.kayTimeout=null),void 0===e||13==e.keyCode)return this.onKeyStrokeSub(e),void this.triggerOnTextInput(e);var t=e;this.kayTimeout=setTimeout($.proxy(function(){this.onKeyStrokeSub(t),this.kayTimeout=null,this.triggerOnTextInput(t)},this),2e3)},onKeyStrokeSub:function(e){var t=$(this.options.textAreaSelector).val();if(null!=t){var n=Math.abs(t.length-this.oldString.length),a=t==this.oldString,i=$(this.options.textAreaSelector).getSelection(),s=this.getCharChanged(this.oldString,t),o=i.start,r=!1;if(activeSource=this.obj,current=this.getStringBetween(t,"\n",o),0==t.length&&(this.objID=0),!a&&n<2){var l,d,g=t.length;for(t.length>this.oldString.length&&(g=this.oldString.length),l=0;l<g&&t.charAt(l)==this.oldString.charAt(l);l++);for(d=1;d<g-l&&t.charAt(t.length-l)==this.oldString.charAt(this.oldString.length-l);d++);n=Math.abs(d-l)}if(!a&&0==n){var u=0;s=0;do{if(t.charAt(u)!==this.oldString.charAt(u)&&(s++,"\n"!=t.charAt(u)&&"\n"!=this.oldString.charAt(u)||s++,2==s)){r=!0;break}u++}while(u<t.length)}if(this.options.directCompare||1<=Math.abs(n)||r){var c=this.obj,p=this.createNewObject(),h=p;for(h=p;;){for(c=this.obj;;){if(null!=c&&-1!=c.id&&c.string==h.string){h.id=c.id,h.changed=c.changed,h.translated=c.translated,h.translating=c.translating,h.retranslate=c.retranslate,h.translation=c.translation,c.id=-1;break}if(null==(c=c.child)){h.id=++this.objID,h.changed=!0,0;break}}if(null==(h=h.child))break}this.obj=p}else switch(s.type){case"removed":if(s.char==this.NEW_LINE)for(1;;){if(activeSource.end()>o){var m=activeSource.string.length;activeSource=activeSource.parent,activeSource.child=activeSource.child.child,m+=activeSource.string.length,null!=activeSource.child&&(activeSource.child.parent=activeSource),activeSource.string.length==m&&null!=activeSource.parent&&activeSource.string==current.string||(activeSource.translated=!1,activeSource.changed=!0,activeSource.translation="",activeSource.id=++this.objID),activeSource.string=current.string;break}activeSource=activeSource.child}else{if("\n"==t.charAt(o)){for(var f=!1,w=this.getStringBetween(t,"\n",o),v=this.getStringBetween(t,"\n",o+1);;){if(activeSource.start()==w.start){f=!(activeSource.string==w.string);break}activeSource=activeSource.child}f?current=w:(current=v,o++),activeSource=this.obj}else current=this.getStringBetween(t,"\n",o);for(;;){if(activeSource.start()<=o&&(null==activeSource.child||activeSource.end()>=o)){activeSource.string=current.string,activeSource.changed=!0;break}activeSource=activeSource.child}}break;case"changed":case"added":if(s.char==this.NEW_LINE)if(t.length-1<=o)for(;;){if(null==activeSource.child){var _=activeSource;activeSource.child=new Tilde.ProgressiveTextAreaElement,activeSource=activeSource.child,activeSource.parent=_,activeSource.string="",activeSource.id=++this.objID,activeSource.changed=!0;break}activeSource=activeSource.child}else for(;;){if(activeSource.start()<=o&&activeSource.end()>=o){var T=null,y=null;if("\n"==t.charAt(o))T=this.getStringBetween(t,"\n",o+1),y=this.getStringBetween(t,"\n",o);else T=this.getStringBetween(t,"\n",o),y=this.getStringBetween(t,"\n",o-1);var S=null,b=null,x=null,C=null,L=null,k=null;if(activeSource.string==T.string)S=activeSource.id,b=activeSource.changed,x=activeSource.translated,C=activeSource.translation,L=activeSource.translating,k=activeSource.retranslate;activeSource.string!=y.string&&(activeSource.changed=!0,activeSource.translated=!1,activeSource.translation="",activeSource.id=++this.objID),activeSource.string=y.string;var E=activeSource.child;activeSource.child=new Tilde.ProgressiveTextAreaElement,activeSource.child.string!=T.string&&(activeSource.child.changed=!0,activeSource.child.translated=!1,activeSource.child.translation="",activeSource.child.id=++this.objID),null!=S?(activeSource.child.id=S,activeSource.child.changed=b,activeSource.child.translated=x,activeSource.child.translation=C,activeSource.child.translating=L,activeSource.child.retranslate=k):activeSource.child.id=++this.objID,activeSource.child.string=T.string,activeSource.child.id=++this.objID,activeSource.child.parent=activeSource,null!=(activeSource.child.child=E)&&(E.parent=activeSource.child);break}activeSource=activeSource.child}else for(;;){if(activeSource.start()<=o&&(null==activeSource.child||activeSource.end()+1>=o)){activeSource.string=current.string,activeSource.changed=!0;break}activeSource=activeSource.child}}(this.oldString.match(/\n/g)||[]).length!=($(this.options.textAreaSelector).val().match(/\n/g)||[]).length?this.triggerOnNewParagraph():a||this.triggerOnNewText(),this.oldString=$(this.options.textAreaSelector).val(),this.redrawBackground()}},trimIfTooLarge:function(){for(var e=this.obj,t="",n=1;;){if(null==e.child)break;if(n++,t+=e.string+"\r\n",250<n){e.child=null,$(this.options.textAreaSelector).val(t);break}e=e.child}},redrawBackground:function(e,t){this.options.onBackgroundHover&&$.proxy(this.options.onBackgroundHover,this)(e,t)},triggerOnTextInput:function(e){this.options.onTextInput&&this.options.onTextInput(e)},triggerOnNewParagraph:function(){this.options.onNewParagraph&&this.options.onNewParagraph()},triggerOnNewText:function(){this.options.onTextChanged&&this.options.onTextChanged()}},$.extend(Tilde.TranslatorWidgetDefaultOptions,{_websiteTranslationUrl:"http://localhost:53130/Translate/WebsiteEmbedded?embeddedStyle=noUI",_debug:!1,_onWebTranslateUrlLoaded:null,_webLangAutodetect:!0,_localizeMTSystems:!0}),$.extend(Tilde.TranslatorWidget.prototype,{webPluginInit:function(){if(0!=$("#websiteFrame",$widget.settings.container).length){var e,t=$widget.settings._websiteTranslationUrl.indexOf("returnUrl");e=-1<t?decodeURIComponent($widget.settings._websiteTranslationUrl.substring(t+10)):$widget.settings._websiteTranslationUrl,$widget.translateWeb_IframeSchemaPortDomain=e.substring(0,e.indexOf("/",e.indexOf("://")+3)),$widget.translateWeb_Url=$(".url",$widget.settings.container),$widget.translateWeb_Iframe=$("#websiteFrame",$widget.settings.container)[0],$widget.translateWeb_IframeContainer=$("#websiteFrameContainer",$widget.settings.container),$widget.translateWeb_translateButton=$(".translateButton",$widget.settings.container),$widget.translateWeb_cancelButton=$(".cancelButton",$widget.settings.container),$widget.translateWeb_restoreButton=$(".restoreButton",$widget.settings.container),$widget.translateWeb_spinner=$(".translateProgress",$widget.settings.container),$widget.translateWeb_translating=!1;var n="";-1<$widget.settings._websiteTranslationUrl.indexOf("returnUrl")?(-1<$widget.settings._websiteTranslationUrl.indexOf("%3f")?n+="%26":n+="%3f",n+="appId%3d"+$widget.settings._appId,$widget.settings._clientId&&(n+="%26clientId%3d"+$widget.settings._clientId),$widget.settings._allowedSystemStatuses&&(n+="%26allowedSystemStatuses%3d"+encodeURIComponent(encodeURIComponent($widget.settings._allowedSystemStatuses))),$widget.settings._getFilteredSystems&&(n+="%26filterSystemsByAppId%3dtrue")):(-1<$widget.settings._websiteTranslationUrl.indexOf("?")?n+="&":n+="?",n+="appId="+$widget.settings._appId,$widget.settings._clientId&&(n+="&clientId="+$widget.settings._clientId),$widget.settings._allowedSystemStatuses&&(n+="&allowedSystemStatuses="+encodeURIComponent($widget.settings._allowedSystemStatuses)),$widget.settings._getFilteredSystems&&(n+="&filterSystemsByAppId=true")),$widget.settings._websiteTranslationUrl+=n,$(".loadButton",$widget.settings.container).click(function(){$widget.translateWeb_loadUrl()}),$(".url",$widget.settings.container).keypress(function(e){13==e.which&&($widget.translateWeb_loadUrl(),e.preventDefault())}),$widget.translateWeb_translateButton.click(function(){if("true"===$widget.translateWeb_translateButton.attr("data-disabled"))return!1;$widget.translateWeb_translateButton.attr("data-disabled",!0),$widget.disableSystemChange();var e={message:"loadUrl",url:$widget.translateWeb_Url.val(),translateAfterLoad:!0};$widget.termCorpusId&&"Ready"==$widget.getSelectedTermCorpusStatus()&&(e.termCorpusId=$widget.termCorpusId),$widget.translateWeb_sendMessageToIframe(e)}),$widget.translateWeb_cancelButton.click(function(){$widget.translateWeb_cancelButton.attr("data-disabled",!0),$widget.translateWeb_sendMessageToIframe({message:"untranslate"})}),$widget.translateWeb_restoreButton.click(function(){$widget.translateWeb_restoreButton.attr("data-disabled",!0),$widget.translateWeb_sendMessageToIframe({message:"untranslate"})}),window.removeEventListener("message",$widget.translateWeb_initIframeMsg),window.addEventListener("message",$widget.translateWeb_initIframeMsg,!1),$widget.translateWeb_IframeLastScrollWidth=null,$widget.translateWeb_IframeLastScrollHeight=null,$widget.translateWeb_resizeLayout(),$widget.settings._onWidgetLoaded=function(){window.open($widget.settings._websiteTranslationUrl,"websiteFrame")}}},translateWeb_initIframeMsg:function(e){if($widget.settings._debug&&console.info("Message received from iframe:"+JSON.stringify(e.data)),e.data&&e.data.message)switch(e.data.message){case"ready":$widget.onSystemChangedHandlers.push(function(e){$widget.translateWeb_systemSuggestedByIframe==e?$widget.translateWeb_systemSuggestedByIframe=null:$widget.translateWeb_sendMessageToIframe({message:"changeSystem",systemId:$widget.activeSystemId})}),$widget.onSystemListLoadedHandlers.push(function(e){for(var t=[],n=0;n<e.length;n++)t.push({id:e[n].ID,sourceLanguage:e[n].SourceLanguage.Code,targetLanguage:e[n].TargetLanguage.Code,name:e[n].Title?e[n].Title.Text:e[n].ID,order:n});$widget.translateWeb_sendMessageToIframe({message:"setSystemList",systemList:t})});var t=[],n=$widget.settings._systems;if(null!=n)for(var a=0;a<n.length;a++)t.push({id:n[a].ID,sourceLanguage:n[a].SourceLanguage.Code,targetLanguage:n[a].TargetLanguage.Code,name:n[a].Title?n[a].Title.Text:n[a].ID,order:a});$widget.settingSystemListForFirstTime=!0,$widget.translateWeb_sendMessageToIframe({message:"setSystemList",systemList:t}),$("input.url").blur().focus();break;case"urlLoaded":$widget.translateWeb_Url.val(e.data.url),$widget.translateWeb_translateButton.removeClass("hide"),$widget.translateWeb_translateButton.attr("data-disabled",!1);break;case"startedLoading":$widget.translateWeb_spinner.removeClass("hide"),$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.addClass("hide"),$widget.translateWeb_translateButton.addClass("hide");break;case"stoppedLoading":$widget.translateWeb_translating||($widget.enableSystemChange(),$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.addClass("hide"),$widget.translateWeb_translateButton.removeClass("hide"),$widget.translateWeb_translateButton.attr("data-disabled",!1),$widget.translateWeb_spinner.addClass("hide"));break;case"systemChanged":$widget.settingSystemListForFirstTime?($widget.settingSystemListForFirstTime=!1,$widget.translateWeb_sendMessageToIframe({message:"changeSystem",systemId:$widget.activeSystemId})):e.data.auto&&e.data.changed&&($widget.settings._webLangAutodetect?($widget.translateWeb_systemSuggestedByIframe=e.data.systemId,$widget.setActiveSystem(e.data.systemId),$(".translateSourceLangContainer .fancy-select .trigger",$widget.settings.container).addClass("attention"),$(".translateSourceLangContainer .translateSingleSourceLang",$widget.settings.container).addClass("attention"),$(".translateSystemContainer .fancy-select .trigger",$widget.settings.container).addClass("attention"),setTimeout(function(){$(".translateSourceLangContainer .fancy-select .trigger",$widget.settings.container).removeClass("attention"),$(".translateSourceLangContainer .translateSingleSourceLang",$widget.settings.container).removeClass("attention"),$(".translateSystemContainer .fancy-select .trigger",$widget.settings.container).removeClass("attention")},5e3)):($widget.translateWeb_systemSuggestedByIframe=$widget.activeSystemId,$widget.translateWeb_sendMessageToIframe({message:"changeSystem",systemId:$widget.activeSystemId})));break;case"translationStarted":$widget.disableSystemChange(),$widget.translateWeb_translateButton.addClass("hide"),$widget.translateWeb_cancelButton.removeClass("hide"),$widget.translateWeb_cancelButton.attr("data-disabled",!1),$widget.translateWeb_spinner.removeClass("hide"),$widget.translateWeb_translating=!0;break;case"translationStopped":$widget.translateWeb_translating=!1,$widget.translateWeb_spinner.addClass("hide");break;case"translated":$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.removeClass("hide"),$widget.translateWeb_restoreButton.attr("data-disabled",!1);break;case"untranslated":$widget.enableSystemChange(),$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.addClass("hide"),$widget.translateWeb_translateButton.removeClass("hide"),$widget.translateWeb_translateButton.attr("data-disabled",!1);break;case"error":$widget.enableSystemChange(),$widget.translateWeb_cancelButton.addClass("hide"),$widget.translateWeb_restoreButton.addClass("hide"),$widget.translateWeb_translateButton.removeClass("hide"),$widget.translateWeb_translateButton.attr("data-disabled",!1),console&&console.error(e.data.description),e.data.shownInUI||(-1!==e.data.description.indexOf("system is starting")&&$widget.showSystemWaking&&"function"==typeof $widget.showSystemWaking?$widget.showSystemWaking(!1):alert(e.data.description));break;case"warning":console&&console.warn(e.data.description)}},translateWeb_loadUrl:function(){$widget.translateWeb_sendMessageToIframe({message:"loadUrl",url:$widget.translateWeb_Url.val(),translateAfterLoad:!1}),$widget.enableSystemChange(),$widget.settings._onWebTranslateUrlLoaded&&"function"==typeof $widget.settings._onWebTranslateUrlLoaded&&$widget.settings._onWebTranslateUrlLoaded($widget.translateWeb_Url.val())},translateWeb_sendMessageToIframe:function(e){$widget.settings._debug&&console.info("Message sent to iframe:"+JSON.stringify(e)),$widget.translateWeb_Iframe.contentWindow.postMessage(e,$widget.translateWeb_IframeSchemaPortDomain)},translateWeb_resizeLayout:function(){window.innerWidth<50*$.fn.getDefaultFontSize()[0]||window.innerHeight<30*$.fn.getDefaultFontSize()[1]?($widget.translateWeb_Iframe.contentWindow&&$widget.translateWeb_Iframe.contentWindow.document&&$widget.translateWeb_Iframe.contentWindow.document.body?$widget.translateWeb_IframeLastScrollWidth==Math.max($widget.translateWeb_Iframe.contentWindow.document.body.scrollWidth,window.innerWidth)&&$widget.translateWeb_IframeLastScrollHeight==$widget.translateWeb_Iframe.contentWindow.document.body.scrollHeight+32||($widget.translateWeb_IframeLastScrollWidth=Math.max($widget.translateWeb_Iframe.contentWindow.document.body.scrollWidth,window.innerWidth),$widget.translateWeb_IframeContainer.width($widget.translateWeb_IframeLastScrollWidth),$widget.translateWeb_IframeLastScrollHeight=$widget.translateWeb_Iframe.contentWindow.document.body.scrollHeight+32,$widget.translateWeb_IframeContainer.height($widget.translateWeb_IframeLastScrollHeight)):($widget.translateWeb_IframeContainer.css("height",""),$widget.translateWeb_IframeContainer.css("width",""),$widget.translateWeb_IframeLastScrollWidth=null,$widget.translateWeb_IframeLastScrollHeight=null),$widget.translateWeb_IframeContainer.css("position","static")):void 0!==$widget.translateWeb_IframeContainer&&($widget.translateWeb_IframeContainer.css("height",""),$widget.translateWeb_IframeContainer.css("width",""),$widget.translateWeb_IframeContainer.css("position","")),window.setTimeout($widget.translateWeb_resizeLayout,100)}}),"undefined"!=typeof $customWidgetInit&&$customWidgetInit||Tilde.TranslatorWidget.prototype.pluginInitializers.push(Tilde.TranslatorWidget.prototype.webPluginInit),uiResources=$.extend(!0,uiResources,{en:{E_DEFAULT_ERROR:"Error occurred while translating.",E_UNKNOWN_FILE_TYPE:"Unknown file type.",E_CANNOT_READ_FILE:"Cannot read file, file may be corrupted.",E_FAILED_IN_TRANSLATION:"Error occurred while translating.",E_FORMAT_TRACK_CHANGES:"Could not translate because track changes was turned on. Changes must first be accepted.",E_UNKNOWN_ERROR:"An unknown error occurred.",E_UNAUTHORIZED:"Document translation was denied.",W_TIMEOUT:"Some sentences are not translated, because translation took too much time.",W_SENTENCE_TOO_LONG:"Some sentences are not translated, because they are too long."},lv:{E_DEFAULT_ERROR:"Tulkojot radās kļūda.",E_UNKNOWN_FILE_TYPE:"Nezināms faila tips.",E_CANNOT_READ_FILE:"Neizdevās nolasīt faila saturu, iespējams, fails ir bojāts.",E_FAILED_IN_TRANSLATION:"Tulkojot radās kļūda.",E_FORMAT_TRACK_CHANGES:"Nevarēja iztulkot dokumentu, jo bija ieslēgta izmaiņu reģistrēšana. Vispirms apstipriniet izmaiņas.",E_UNKNOWN_ERROR:"Radās nezināma kļūda.",E_UNAUTHORIZED:"Dokumenta tulkošana tika liegta.",W_TIMEOUT:"Daži teikumi netika iztulkoti, jo tulkošana prasīja pārāk daudz laika.",W_SENTENCE_TOO_LONG:"Daži teikumi nav iztulkoti, jo tie bija pārāk gari."},ru:{E_DEFAULT_ERROR:"Во время перевода возникла ошибка.",E_UNKNOWN_FILE_TYPE:"Неизвестный тип файла.",E_CANNOT_READ_FILE:"Не удалось считать содержание файла, возможно, файл поврежден.",E_FAILED_IN_TRANSLATION:"Во время перевода возникла ошибка.",E_FORMAT_TRACK_CHANGES:"Не удалось перевести, поскольку был включен режим отслеживания исправлений. Сначала примите исправления.",E_UNKNOWN_ERROR:"Возникла неизвестная ошибка.",E_UNAUTHORIZED:"Перевод документа запрещен.",W_TIMEOUT:"Some sentences are not translated, because translation took too much time.",W_SENTENCE_TOO_LONG:"Some sentences are not translated, because they are too long."},lt:{E_DEFAULT_ERROR:"Verčiant įvyko klaida.",E_UNKNOWN_FILE_TYPE:"Nežinomas failo tipas.",E_CANNOT_READ_FILE:"Failo nuskaityti nepavyko. Jis gali būti sugadintas.",E_FAILED_IN_TRANSLATION:"Verčiant įvyko klaida.",E_FORMAT_TRACK_CHANGES:"Išversti nepavyko, nes įjungtas keitimų sekimas (angl. track changes). Pirmiausia sutikite su visais keitimais.",E_UNKNOWN_ERROR:"Aptikta nenustatyta klaida.",E_UNAUTHORIZED:"Dokumento vertimas atmestas.",W_TIMEOUT:"Kai kurie sakiniai liko neišversti, nes baigėsi vertimui skirtas laikas.",W_SENTENCE_TOO_LONG:"Kai kurie sakiniai liko neišversti, nes jie per ilgi."},fr:{E_DEFAULT_ERROR:"Une erreur est survenue pendant la traduction.",E_UNKNOWN_FILE_TYPE:"Type de fichier inconnu.",E_CANNOT_READ_FILE:"Impossible de lire le fichier, le fichier est peut-être endommagé.",E_FAILED_IN_TRANSLATION:"Une erreur est survenue pendant la traduction.",E_FORMAT_TRACK_CHANGES:"Impossible de traduire car le suivi des corrections est activé. Les corrections doivent d'abord être acceptées.",E_UNKNOWN_ERROR:"Une erreur inconnue s'est produite.",E_UNAUTHORIZED:"La traduction du document a été refusée.",W_TIMEOUT:"Some sentences are not translated, because translation timed out.",W_SENTENCE_TOO_LONG:"Some sentences are not translated, because they are too long."},et:{E_DEFAULT_ERROR:"Tõlkimisel ilmnes tõrge.",E_UNKNOWN_FILE_TYPE:"Tundmatu failitüüp.",E_CANNOT_READ_FILE:"Faili ei saa lugeda. See võib olla rikutud.",E_FAILED_IN_TRANSLATION:"Tõlkimisel ilmnes tõrge.",E_FORMAT_TRACK_CHANGES:"Tõlkida ei saanud, kuna muutuste jälitus oli sisse lülitatud. Muutused tuleb esmalt aktsepteerida.",E_UNKNOWN_ERROR:"Ilmnes tundmatu tõrge.",E_UNAUTHORIZED:"Dokumendi tõlkimine keelati.",W_TIMEOUT:"Mõni lause jäi tõlkimata, kuna tõlkimisel ilmnes ajalõpp.",W_SENTENCE_TOO_LONG:"Mõnda lauset ei tõlgitud, kuna need on liiga pikad."},bg:{E_DEFAULT_ERROR:"Грешка в процеса на превод.",E_UNKNOWN_FILE_TYPE:"Непознат формат на файл.",E_CANNOT_READ_FILE:"Cannot read file, file may be corrupted.",E_FAILED_IN_TRANSLATION:"Файлът не се чете, файлът може би е повреден.",E_FORMAT_TRACK_CHANGES:"Преводът не можа да бъде осъществен, защото режимът „Проследете промените“ е включен. Направените промени трябва да бъдат одобрени.",E_UNKNOWN_ERROR:"Възникна неизвестна грешка.",E_UNAUTHORIZED:"Преводът на документа бе отказан.",W_TIMEOUT:"Някои изречения не са преведени, защото преводът отне твърде много време.",W_SENTENCE_TOO_LONG:"Някои изречения не са преведени, защото са прекалено дълги."},de:{E_DEFAULT_ERROR:"Beim Übersetzen ist ein Fehler aufgetreten.",E_UNKNOWN_FILE_TYPE:"Unbekannter Dateityp.",E_CANNOT_READ_FILE:"Die Datei kann nicht gelesen werden. Die Datei könnte beschädigt sein.",E_FAILED_IN_TRANSLATION:"Beim Übersetzen ist ein Fehler aufgetreten.",E_FORMAT_TRACK_CHANGES:'Übersetzen war nicht möglich, da "Änderungen nachverfolgen" aktiviert ist. Die Änderungen müssen zuerst angenommen werden.',E_UNKNOWN_ERROR:"Ein unbekannter Fehler ist aufgetreten.",E_UNAUTHORIZED:"Die Übersetzung des Dokuments wurde verweigert.",W_TIMEOUT:"Manche Sätze wurden nicht übersetzt, da die Übersetzung zu viel Zeit in Anspruch nahm.",W_SENTENCE_TOO_LONG:"Manche Sätze wurden nicht übersetzt, da sie zu lang sind."}}),uiResources=$.extend(!0,uiResources,{en:{docTempTarget:"Machine translation results for documents help to understand the meaning of a source text, but do not equal translation by a human.",docDownload:"Download",docCancel:"Cancel",docUploadTooltip:"Upload document",docUploadMsgType:'The file "{file}" format is not recognized. Translation is supported for these document formats: {extensions}.',docUploadMsgSize:'File "{file}" is too large. Maximum file size is {sizeLimit}.',docUploadMsgEmpty:'File "{file}" is empty. Please select a file with content.',docUploadMsgWordcnt:"The maximum word count for one translation ({wordCount}) has been exceeded.",docUploadFilename:"Document title:",docUploadFilesize:"Document size:",docUploadWordcount:"Word count:",docUploadFailed:"File upload was not successful.",docTranslFailed:"Document translation failed. Please try again.",docUploadNewDoc:"Delete",docStarting:"Document translation is starting...",docPreviewError:"Could not generate a preview of the document.",docAppleLimited:"File upload on iOS devices is limited.",docTranslInProgress:"Document translation is in progress. If you leave the page, the translation will be lost.",docSupportedTypes:"Currently the system supports {extensions} file formats. UTF-8 or UTF-16 coding required.",docLimit:'Please be informed that only first {limit} segments of each document will be translated for you as a DEMO user. We kindly invite you to contact us <a href="mailto:mt@tilde.com">mt@tilde.com</a> to get full access',advancedOptions:"Options▾",useAssistant:"Open with translation assistant",assistLoading:"preparing document..."},lv:{docTempTarget:"Dokumentu mašīntulkošanas rezultāti ļauj saprast teksta nozīmi, bet nevar aizstāt cilvēka radītu tulkojumu.",docDownload:"Atvērt",docCancel:"Atcelt",docUploadTooltip:"Augšupielādēt dokumentu",docUploadMsgType:'Faila "{file}" formāts nav atpazīts. Tulkošana tiek atbalstīta šādiem dokumentu formātiem: {extensions}.',docUploadMsgSize:'Fails "{file}" ir pārāk liels. Maksimālais lielums ir {sizeLimit}.',docUploadMsgEmpty:'Fails "{file}" ir tukšs. Izvēlieties failu, kurā ir saturs.',docUploadMsgWordcnt:"Ir pārsniegts vienam tulkojumam pieejamais vārdu skaits ({wordCount}), tādēļ dokuments tiks iztulkots daļēji. Pilnam tulkojumam, lūdzu, sadaliet tekstu vairākos dokumentos.",docUploadFilename:"Dokumenta nosaukums:",docUploadFilesize:"Dokumenta lielums:",docUploadWordcount:"Vārdu skaits:",docUploadFailed:"Neizdevās ielādēt failu.",docTranslFailed:"Document translation failed. Please try again.",docUploadNewDoc:"Izdzēst",docStarting:"Tiek sākta dokumenta tulkošana...",docPreviewError:"Neizdevās izveidot dokumenta priekšskatījumu.",docAppleLimited:"iOS iekārtās failu augšupielāde ir ierobežota.",docTranslInProgress:"Patreiz notiek dokumenta tulkošana. Pametot lapu, tulkojums tiks pazaudēts.",docSupportedTypes:"Tiek atbalstīti šādi dokumentu formāti: {extensions}. Nepieciešams UTF-8 vai UTF-16 kodējums.",docLimit:'Please be informed that only first {limit} segments of each document will be translated for you as a DEMO user. We kindly invite you to contact us <a href="mailto:mt@tilde.com">mt@tilde.com</a> to get full access',advancedOptions:"Options▾",useAssistant:"Atvērt ar tulkošanas asistentu",assistLoading:"sagatavojam dokumentu..."},ru:{docTempTarget:"Результаты машинного перевода документов позволяют понять значение текста, но не позволяют заменить сделанный человеком перевод.",docDownload:"Открыть",docCancel:"Отменить",docUploadTooltip:"Загрузить документ",docUploadMsgType:'Формат файла "{file}" не опознан. Перевод поддерживается для следующих форматов документов: {extensions}.',docUploadMsgSize:'Файл "{file}" слишком большой. Максимальный размер: {sizeLimit}.',docUploadMsgEmpty:'Файл "{file}" пустой. Выберите файл с содержимым.',docUploadMsgWordcnt:"Превышено количество слов, доступное для одного файла ({wordCount}).",docUploadFilename:"Название документа:",docUploadFilesize:"Размер документа:",docUploadWordcount:"Количество слов:",docUploadFailed:"Файл не удалось загрузить.",docTranslFailed:"Document translation failed. Please try again.",docUploadNewDoc:"Удалить",docStarting:"Начат перевод документа...",docPreviewError:"Не удалось создать предварительный просмотр документа.",docAppleLimited:"Загрузка файла на устройствах IOS ограничено.",docTranslInProgress:"Перевод документов в процессе. Если вы уйдете со страницы, перевод будет потерян.",docSupportedTypes:"Currently the system supports {extensions} file formats. UTF-8 or UTF-16 coding required.",docLimit:'Please be informed that only first {limit} segments of each document will be translated for you as a DEMO user. We kindly invite you to contact us <a href="mailto:mt@tilde.com">mt@tilde.com</a> to get full access',advancedOptions:"Options▾",useAssistant:"Open with translation assistant",assistLoading:"preparing document..."},lt:{docTempTarget:"Dokumentų mašininio vertimo rezultatai padeda suprasti originalo teksto prasmę, tačiau jo kokybės negalima lyginti su žmonių atliekamu vertimu.",docDownload:"Atidaryti",docCancel:"Atšaukti",docUploadTooltip:"Įkelti dokumentą",docUploadMsgType:"Failo „{file}“ formatas neatpažintas. Atliekamas tik šių dokumentų formatų vertimas: {extensions}.",docUploadMsgSize:"Failas „{file}“ yra per didelis. Maksimalus leistinas failo dydis: {sizeLimit}.",docUploadMsgEmpty:"Failas „{file}“ yra tuščias. Pasirinkite failą su turiniu.",docUploadMsgWordcnt:"Viršytas maksimalus vieno vertimo žodžių skaičius ({wordCount}).",docUploadFilename:"Document title:",docUploadFilesize:"Document size:",docUploadWordcount:"Word count:",docUploadFailed:"Failo įkelti nepavyko.",docTranslFailed:"Document translation failed. Please try again.",docUploadNewDoc:"Ištrinti",docStarting:"Pradedamas dokumento vertimas...",docPreviewError:"Dokumento peržiūros sugeneruoti nepavyko.",docAppleLimited:"Failų įkėlimas iOS įrenginiuose yra apribotas.",docTranslInProgress:"Dokumentas verčiamas. Jei uždarysite šį puslapį, vertimas bus prarastas.",docSupportedTypes:"Šiuo metu sistema palaiko {extensions} failų formatus. Būtinas UTF-8 arba UTF-16 kodavimas."},fr:{docTempTarget:"Les résultats de la traduction automatique de documents aident à comprendre le sens d'un texte source, mais ils ne sont pas équivalents à une traduction humaine.",docDownload:"Ouvrir",docCancel:"Annuler",docUploadTooltip:"Charger le document",docUploadMsgType:'Le format du fichier "{file}" n\'est pas reconnu. La traduction est prise en charge pour les formats de document suivants : {extensions}.',docUploadMsgSize:'Le fichier "{file}" est trop grand. La taille maximum du fichier est de {sizeLimit}.',docUploadMsgEmpty:'Le fichier "{file}" est vide. Veuillez sélectionner un fichier avec contenu.',docUploadMsgWordcnt:"Le nombre maximum de mots pour une traduction ({wordCount}) a été dépassé.",docUploadFilename:"Document title:",docUploadFilesize:"Document size:",docUploadWordcount:"Word count:",docUploadFailed:"Failo įkelti nepavyko.",docTranslFailed:"Échec du chargement du fichier.",docUploadNewDoc:"Supprimer",docStarting:"La traduction du document démarre…",docPreviewError:"Impossible de générer un aperçu du document.",docAppleLimited:"Le chargement de fichiers sur les appareils iOS est limité.",docTranslInProgress:"La traduction du document est en cours. Si vous quittez la page, la traduction sera perdue.",docSupportedTypes:"Currently the system supports {extensions} file formats. UTF-8 or UTF-16 coding required."},et:{docTempTarget:"Masintõlge aitab teksti sisust aru saada, kuid ei asenda inimtõlget.",docDownload:"Laadi alla",docCancel:"Tühista",docUploadTooltip:"Laadi dokument üles",docUploadMsgType:'Faili "{file}" vorming on tundmatu. Tõlketugi on olemas järgmiste failivormingute puhul: {extensions}.',docUploadMsgSize:'Fail "{file}" on liiga suur. Faili lubatud maksimummaht on {sizeLimit}.',docUploadMsgEmpty:'Fail "{file}" on tühi. Valige andmeid sisaldav fail.',docUploadMsgWordcnt:"Ühe tõlke suurim lubatud sõnaarv ({wordCount}) on ületatud.",docUploadFilename:"Dokumendi pealkiri:",docUploadFilesize:"Dokumendi suurus:",docUploadWordcount:"Sõnade arv:",docUploadFailed:"Faili üleslaadimine nurjus.",docTranslFailed:"Dokumendi tõlkimine nurjus. Proovige uuesti.",docUploadNewDoc:"Kustuta",docStarting:"Algab dokumendi tõlkimine...",docPreviewError:"Dokumendi eelvaate loomine nurjus.",docAppleLimited:"Failide üleslaadimine iOS-seadmetest on piiratud.",docTranslInProgress:"Dokumendi tõlkimine on pooleli. Kui lehelt lahkute, läheb tõlge kaotsi.",docSupportedTypes:"Praegu toetab süsteem järgmisi failivorminguid: {extensions}. Vajalik on kodeering UTF-8 või UTF-16."},bg:{docTempTarget:"Резултатите от машинния превод на документи помагат да се разбере смисълът на изходния текст, но не са равностойни на превод, направен от човек.",docDownload:"Свали",docCancel:"Отказ",docUploadTooltip:"Зареди документ",docUploadMsgType:'Файлът {file}" не беше разпознат. Преводът се поддържа за следните формати: {extensions}.',docUploadMsgSize:'Файлът {file}" е прекалено голям. Допустимият размер за файл е {sizeLimit}.',docUploadMsgEmpty:'Файлът  {file}" е празен. Моля, изберете файл със съдържание.',docUploadMsgWordcnt:"Максималният брой думи за един превод ({wordCount}) е превишен.",docUploadFilename:"Име на документ:",docUploadFilesize:"Размер на документ:",docUploadWordcount:"Брой думи:",docUploadFailed:"Зареждането на файл не беше успешно.",docTranslFailed:"Документът не беше преведен. Моля, опитайте отново.",docUploadNewDoc:"Изтрий",docStarting:"Преводът на документа започва...",docPreviewError:"Не може да се генерира предварителен изглед на документа.",docAppleLimited:"Зареждането на файлове на устройства с iOS е ограничено.",docTranslInProgress:"В момента се извършва превод на документа. Ако излезете от тази страница, преводът ще бъде загубен.",docSupportedTypes:"Понастоящем системата поддържа следните {extensions} файлови формати. Необходимо е кодиране на UTF-8 или UTF-16.",docLimit:"Моля, имайте предвид, че само първите {limit} части от всеки документ ще бъдат преведени за Вас като потребител на демо версия. Любезно Ви каним да се свържете с нас на имейл mt@tilde.com, за да получите пълен достъп.",advancedOptions:"Настройки▾"},de:{docTempTarget:"Die Ergebnisse der maschinellen Übersetzung helfen dabei, den Inhalt eines Ausgangstextes zu verstehen, aber sie sind nicht mit von Menschen gemachten Übersetzungen gleichzusetzen.",docDownload:"Download",docCancel:"Abbrechen",docUploadTooltip:"Dokument hochladen",docUploadMsgType:'Das Dateiformat {file}" wird nicht erkannt. Für die folgenden Dokumentformate wird die Übersetzung unterstützt: {extensions}.',docUploadMsgSize:'Die Datei {file}" ist zu groß. Die maximale Dateigröße beträgt {sizeLimit}.',docUploadMsgEmpty:'Die Datei {file}" ist leer. Bitte wählen Sie eine Datei mit Inhalt.',docUploadMsgWordcnt:"Die maximale Wortanzahl für eine Übersetzung ({wordCount}) wurde überschritten.",docUploadFilename:"Dokumenttitel:",docUploadFilesize:"Dokumentgröße:",docUploadWordcount:"Wortanzahl:",docUploadFailed:"Das Hochladen der Datei war nicht erfolgreich.",docTranslFailed:"Das Dokument konnte nicht übersetzt werden. Bitte versuchen Sie es noch einmal.",docUploadNewDoc:"Löschen",docStarting:"Mit der Übersetzung des Dokuments wird begonnen...",docPreviewError:"Eine Vorschau des Dokuments konnte nicht erstellt werden.",docAppleLimited:"Der Dateiupload auf iOS-Geräten ist nur begrenzt möglich.",docTranslInProgress:"Die Übersetzung des Dokuments wird bearbeitet. Wenn Sie diese Seite verlassen, geht die Übersetzung verloren.",docSupportedTypes:"Derzeit unterstützt das System {extensions} Dateiformate. Es sind die Kodierungen UTF-8 oder UTF-16 erforderlich.",docLimit:"Bitte beachten Sie, dass Sie als DEMO-BenutzerIn nur die ersten {limit} Segmente eines einzelnen Dokuments übersetzen lassen können. Wir laden Sie herzlich ein, uns unter mt@tilde.com zu kontaktieren, um Vollzugriff zu erhalten.",advancedOptions:"Optionen▾"}}),uiResources=$.extend(!0,uiResources,{en:{clearTranslation:"Clear",sourceTextTooltip:"Enter the text you want to translate.",noInternet:"No internet connection",targetTextTooltip:"Machine translation results help to understand the meaning of a source text, but do not equal translation by a human.",transLimit:"You have reached the maximum word limit for one translation request. To translate the untranslated part please make another request.",seeFullEntry:"Read complete entry",speaker:"Listen",editButton:"Edit",editButtonTooltip:"Suggest a better translation",translationEditSave:"Contribute",translationEditClose:"Close",translationEditOriginal:"Original sentence",translationEditTranslation:"Translation",translationEditDescription:"Your translation suggestion will be used to improve the quality of machine translation.",examples:"examples","dictionary-entry-word-class-noun":"[noun]","dictionary-entry-word-class-adj":"[adj]","dictionary-entry-word-class-verb":"[verb]","dictionary-entry-word-class-adv":"[adv]","dictionary-entry-word-class-conj":"[conj]","dictionary-entry-word-class-interjection":"[interjection]","dictionary-entry-word-class-pron":"[pron]"},fr:{clearTranslation:"Effacer",sourceTextTooltip:"Entrez le texte que vous voulez traduire",noInternet:"No internet connection",targetTextTooltip:"Les résultats de traduction électronique aident à comprendre le sens du texte original mais ils ne remplacent pas un traducteur humain.",transLimit:"Ir sasniegts maksimālais vārdu limits vienā tulkošanas pieprasījumā. Lūdzu, sadaliet tekstu mazākos gabalos.",seeFullEntry:"Read complete entry",speaker:"Listen",editButton:"Edit",translationEditSave:"Contribute",translationEditClose:"Close",translationEditOriginal:"Original sentence",translationEditTranslation:"Translation",translationEditDescription:"Your translation suggestion will be used to improve the quality of machine translation.",examples:"examples"},lt:{clearTranslation:"Ištrinti",sourceTextTooltip:"Įveskite norimą versti tekstą",noInternet:"No internet connection",targetTextTooltip:"Automatinio vertimo rezultatai padeda suprasti teksto prasmę, tačiau nepakeičia žmonių kuriamų vertimų.",transLimit:"Pasiekėte vienos vertimo užklausos leistiną žodžių ribą. Jei norite versti neišverstą dalį, pateikite kitą užklausą.",seeFullEntry:"Read complete entry",speaker:"Klausykite",editButton:"Redaguoti",editButtonTooltip:"Siūlyti vertimą",translationEditSave:"Siūlyti",translationEditClose:"Uždaryti",translationEditOriginal:"Originalo sakinys",translationEditTranslation:"Vertimas",translationEditDescription:"Jūsų vertimo pasiūlymą naudosime, kad pagerintume mašininio vertimo kokybę.",examples:"examples"},lv:{clearTranslation:"Notīrīt",sourceTextTooltip:"Ievadiet tulkojamo tekstu",noInternet:"No internet connection",targetTextTooltip:"Mašīntulkošanas rezultāti ļauj saprast teksta nozīmi, bet nevar aizstāt cilvēka radītu tulkojumu.",transLimit:"You have reached the maximum word limit for one translation request. To translate the untranslated part please make another request.",seeFullEntry:"Skatīt pilnu šķirkli",speaker:"Klausīties",editButton:"Rediģēt",editButtonTooltip:"Ieteikt labāku tulkojumu",translationEditSave:"Ieteikt",translationEditClose:"Aizvērt",translationEditOriginal:"Sākotnējais teikums",translationEditTranslation:"Tulkojums",translationEditDescription:"Jūsu tulkojuma ieteikums tiks izmantots tulkošanas kvalitātes uzlabošanai.",examples:"piemēri","dictionary-entry-word-class-noun":"[noun]","dictionary-entry-word-class-adj":"[adj]","dictionary-entry-word-class-verb":"[verb]","dictionary-entry-word-class-adv":"[adv]","dictionary-entry-word-class-conj":"[conj]","dictionary-entry-word-class-interjection":"[interjection]","dictionary-entry-word-class-pron":"[pron]"},ru:{clearTranslation:"Очистить",sourceTextTooltip:"Введите текст для перевода",noInternet:"No internet connection",targetTextTooltip:"Результаты машинного перевода позволяют понять значение текста, но не позволяют заменить сделанный человеком перевод.",transLimit:"You have reached the maximum word limit for one translation request. To translate the untranslated part please make another request.",seeFullEntry:"Read complete entry",speaker:"Listen",editButton:"Edit",editButtonTooltip:"[Ieteikt labāku tulkojumu]",translationEditSave:"Contribute",translationEditClose:"Close",translationEditOriginal:"Original sentence",translationEditTranslation:"Translation",translationEditDescription:"Your translation suggestion will be used to improve the quality of machine translation.",examples:"examples","dictionary-entry-word-class-noun":"[noun]","dictionary-entry-word-class-adj":"[adj]","dictionary-entry-word-class-verb":"[verb]","dictionary-entry-word-class-adv":"[adv]","dictionary-entry-word-class-conj":"[conj]","dictionary-entry-word-class-interjection":"[interjection]","dictionary-entry-word-class-pron":"[pron]"},et:{clearTranslation:"Tühjenda",sourceTextTooltip:"Sisestage soovitud tekst",noInternet:"No internet connection",targetTextTooltip:"Masintõlge aitab teksti sisust aru saada, kuid ei asenda inimtõlget.",transLimit:"Ühe tõlketaotluse suurim sõnaarv on täis. Tõlkimata osa tõlkimiseks esitage uus taotlus.",seeFullEntry:"Read complete entry",speaker:"Kuulake",editButton:"Redigeeri",editButtonTooltip:"Soovita tõlget",translationEditSave:"Andke oma panus",translationEditClose:"Sule",translationEditOriginal:"Algne lause",translationEditTranslation:"Tõlge",translationEditDescription:"Teie tõlkesoovitust kasutatakse masintõlke kvaliteedi parandamiseks.",examples:"examples"},bg:{clearTranslation:"Изчисти",sourceTextTooltip:"Въведете текста, който искате да преведете.",noInternet:"Няма възка с интернет.",targetTextTooltip:"Резултатите от машинния превод помагат да се разбере смисълът на изходния текст, но не са равностойни на превод, направен от човек.",transLimit:"Достигнахте максималния лимит за думите за една заявка за превод. За да преведете непреведената част от документа, моля да направите друга заявка.",seeFullEntry:"Прочети пълния запис",speaker:"Чуй",editButton:"Редактирай",editButtonTooltip:"Предложи по-добър превод",translationEditSave:"Помогнете ни",translationEditClose:"Затвори",translationEditOriginal:"Изречение в оригинал",translationEditTranslation:"Превод",translationEditDescription:"Вашето предложение за превод ще бъде използвано за подобряване качеството на машинния превод."},de:{clearTranslation:"Löschen",sourceTextTooltip:"Geben Sie den Text ein, den Sie übersetzen möchten.",noInternet:"Keine Internetverbindung",targetTextTooltip:"Die Ergebnisse der maschinellen Übersetzung helfen dabei, den Inhalt eines Ausgangstextes zu verstehen, aber sie sind nicht mit von Menschen gemachten Übersetzungen gleichzusetzen.",transLimit:"Sie haben die maximale Wortanzahl für eine Übersetzungsanfrage erreicht. Um den restlichen Teil des Dokuments übersetzen zu lassen, stellen Sie bitte eine weitere Anfrage.",seeFullEntry:"Den kompletten Eintrag lesen",speaker:"Anhören",editButton:"Bearbeiten",editButtonTooltip:"Eine bessere Übersetzung vorschlagen",translationEditSave:"Beitragen",translationEditClose:"Schließen",translationEditOriginal:"Originalsatz",translationEditTranslation:"Übersetzung",translationEditDescription:"Wir werden Ihren Übersetzungsvorschlag verwenden, um die Qualität der maschinellen Übersetzung zu verbessern."}}),uiResources=$.extend(!0,uiResources,{en:{address:"Address",loadButton:"Load webpage",cancelButton:"Cancel",restoreButton:"Restore"},lv:{address:"Adrese",loadButton:"Ielādēt lapu",cancelButton:"Atcelt",restoreButton:"Atjaunot"},ru:{address:"[Adrese]",loadButton:"[Ielādēt lapu]",cancelButton:"[Atcelt]",restoreButton:"[Atjaunot]"},lt:{address:"Adresas",loadButton:"Įkelti svetainę",cancelButton:"Atšaukti",restoreButton:"Atkurti"},et:{address:"Aadress",loadButton:"Laadi veebileht",cancelButton:"Tühista",restoreButton:"Taasta"},bg:{address:"Адрес",loadButton:"Зареждане на страница",cancelButton:"Отказ",restoreButton:"Възстанови"},de:{address:"Adresse",loadButton:"Webseite laden",cancelButton:"Abbrechen",restoreButton:"Wiederherstellen"}});